(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var Dd={exports:{}},El={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function RA(){if(P_)return El;P_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:c}}return El.Fragment=e,El.jsx=n,El.jsxs=n,El}var k_;function IA(){return k_||(k_=1,Dd.exports=RA()),Dd.exports}var S=IA(),Od={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function CA(){if(U_)return Ie;U_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),R=Symbol.iterator;function D(w){return w===null||typeof w!="object"?null:(w=R&&w[R]||w["@@iterator"],typeof w=="function"?w:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,re={};function Y(w,z,te){this.props=w,this.context=z,this.refs=re,this.updater=te||G}Y.prototype.isReactComponent={},Y.prototype.setState=function(w,z){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,z,"setState")},Y.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function le(){}le.prototype=Y.prototype;function de(w,z,te){this.props=w,this.context=z,this.refs=re,this.updater=te||G}var K=de.prototype=new le;K.constructor=de,J(K,Y.prototype),K.isPureReactComponent=!0;var Ae=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},be=Object.prototype.hasOwnProperty;function V(w,z,te,ee,he,Ce){return te=Ce.ref,{$$typeof:s,type:w,key:z,ref:te!==void 0?te:null,props:Ce}}function A(w,z){return V(w.type,z,void 0,void 0,void 0,w.props)}function C(w){return typeof w=="object"&&w!==null&&w.$$typeof===s}function P(w){var z={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(te){return z[te]})}var O=/\/+/g;function x(w,z){return typeof w=="object"&&w!==null&&w.key!=null?P(""+w.key):z.toString(36)}function I(){}function Ne(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(I,I):(w.status="pending",w.then(function(z){w.status==="pending"&&(w.status="fulfilled",w.value=z)},function(z){w.status==="pending"&&(w.status="rejected",w.reason=z)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function Me(w,z,te,ee,he){var Ce=typeof w;(Ce==="undefined"||Ce==="boolean")&&(w=null);var Ee=!1;if(w===null)Ee=!0;else switch(Ce){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(w.$$typeof){case s:case e:Ee=!0;break;case T:return Ee=w._init,Me(Ee(w._payload),z,te,ee,he)}}if(Ee)return he=he(w),Ee=ee===""?"."+x(w,0):ee,Ae(he)?(te="",Ee!=null&&(te=Ee.replace(O,"$&/")+"/"),Me(he,z,te,"",function(kn){return kn})):he!=null&&(C(he)&&(he=A(he,te+(he.key==null||w&&w.key===he.key?"":(""+he.key).replace(O,"$&/")+"/")+Ee)),z.push(he)),1;Ee=0;var kt=ee===""?".":ee+":";if(Ae(w))for(var Ke=0;Ke<w.length;Ke++)ee=w[Ke],Ce=kt+x(ee,Ke),Ee+=Me(ee,z,te,Ce,he);else if(Ke=D(w),typeof Ke=="function")for(w=Ke.call(w),Ke=0;!(ee=w.next()).done;)ee=ee.value,Ce=kt+x(ee,Ke++),Ee+=Me(ee,z,te,Ce,he);else if(Ce==="object"){if(typeof w.then=="function")return Me(Ne(w),z,te,ee,he);throw z=String(w),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function F(w,z,te){if(w==null)return w;var ee=[],he=0;return Me(w,ee,"","",function(Ce){return z.call(te,Ce,he++)}),ee}function ne(w){if(w._status===-1){var z=w._result;z=z(),z.then(function(te){(w._status===0||w._status===-1)&&(w._status=1,w._result=te)},function(te){(w._status===0||w._status===-1)&&(w._status=2,w._result=te)}),w._status===-1&&(w._status=0,w._result=z)}if(w._status===1)return w._result.default;throw w._result}var ce=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function ie(){}return Ie.Children={map:F,forEach:function(w,z,te){F(w,function(){z.apply(this,arguments)},te)},count:function(w){var z=0;return F(w,function(){z++}),z},toArray:function(w){return F(w,function(z){return z})||[]},only:function(w){if(!C(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},Ie.Component=Y,Ie.Fragment=n,Ie.Profiler=l,Ie.PureComponent=de,Ie.StrictMode=r,Ie.Suspense=y,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(w){return se.H.useMemoCache(w)}},Ie.cache=function(w){return function(){return w.apply(null,arguments)}},Ie.cloneElement=function(w,z,te){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var ee=J({},w.props),he=w.key,Ce=void 0;if(z!=null)for(Ee in z.ref!==void 0&&(Ce=void 0),z.key!==void 0&&(he=""+z.key),z)!be.call(z,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&z.ref===void 0||(ee[Ee]=z[Ee]);var Ee=arguments.length-2;if(Ee===1)ee.children=te;else if(1<Ee){for(var kt=Array(Ee),Ke=0;Ke<Ee;Ke++)kt[Ke]=arguments[Ke+2];ee.children=kt}return V(w.type,he,void 0,void 0,Ce,ee)},Ie.createContext=function(w){return w={$$typeof:f,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:c,_context:w},w},Ie.createElement=function(w,z,te){var ee,he={},Ce=null;if(z!=null)for(ee in z.key!==void 0&&(Ce=""+z.key),z)be.call(z,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(he[ee]=z[ee]);var Ee=arguments.length-2;if(Ee===1)he.children=te;else if(1<Ee){for(var kt=Array(Ee),Ke=0;Ke<Ee;Ke++)kt[Ke]=arguments[Ke+2];he.children=kt}if(w&&w.defaultProps)for(ee in Ee=w.defaultProps,Ee)he[ee]===void 0&&(he[ee]=Ee[ee]);return V(w,Ce,void 0,void 0,null,he)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(w){return{$$typeof:p,render:w}},Ie.isValidElement=C,Ie.lazy=function(w){return{$$typeof:T,_payload:{_status:-1,_result:w},_init:ne}},Ie.memo=function(w,z){return{$$typeof:g,type:w,compare:z===void 0?null:z}},Ie.startTransition=function(w){var z=se.T,te={};se.T=te;try{var ee=w(),he=se.S;he!==null&&he(te,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(ie,ce)}catch(Ce){ce(Ce)}finally{se.T=z}},Ie.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},Ie.use=function(w){return se.H.use(w)},Ie.useActionState=function(w,z,te){return se.H.useActionState(w,z,te)},Ie.useCallback=function(w,z){return se.H.useCallback(w,z)},Ie.useContext=function(w){return se.H.useContext(w)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(w,z){return se.H.useDeferredValue(w,z)},Ie.useEffect=function(w,z,te){var ee=se.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(w,z)},Ie.useId=function(){return se.H.useId()},Ie.useImperativeHandle=function(w,z,te){return se.H.useImperativeHandle(w,z,te)},Ie.useInsertionEffect=function(w,z){return se.H.useInsertionEffect(w,z)},Ie.useLayoutEffect=function(w,z){return se.H.useLayoutEffect(w,z)},Ie.useMemo=function(w,z){return se.H.useMemo(w,z)},Ie.useOptimistic=function(w,z){return se.H.useOptimistic(w,z)},Ie.useReducer=function(w,z,te){return se.H.useReducer(w,z,te)},Ie.useRef=function(w){return se.H.useRef(w)},Ie.useState=function(w){return se.H.useState(w)},Ie.useSyncExternalStore=function(w,z,te){return se.H.useSyncExternalStore(w,z,te)},Ie.useTransition=function(){return se.H.useTransition()},Ie.version="19.1.1",Ie}var L_;function wm(){return L_||(L_=1,Od.exports=CA()),Od.exports}var Pe=wm(),xd={exports:{}},Tl={},Vd={exports:{}},Md={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function NA(){return j_||(j_=1,(function(s){function e(F,ne){var ce=F.length;F.push(ne);e:for(;0<ce;){var ie=ce-1>>>1,w=F[ie];if(0<l(w,ne))F[ie]=ne,F[ce]=w,ce=ie;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var ne=F[0],ce=F.pop();if(ce!==ne){F[0]=ce;e:for(var ie=0,w=F.length,z=w>>>1;ie<z;){var te=2*(ie+1)-1,ee=F[te],he=te+1,Ce=F[he];if(0>l(ee,ce))he<w&&0>l(Ce,ee)?(F[ie]=Ce,F[he]=ce,ie=he):(F[ie]=ee,F[te]=ce,ie=te);else if(he<w&&0>l(Ce,ce))F[ie]=Ce,F[he]=ce,ie=he;else break e}}return ne}function l(F,ne){var ce=F.sortIndex-ne.sortIndex;return ce!==0?ce:F.id-ne.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var y=[],g=[],T=1,R=null,D=3,G=!1,J=!1,re=!1,Y=!1,le=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function Ae(F){for(var ne=n(g);ne!==null;){if(ne.callback===null)r(g);else if(ne.startTime<=F)r(g),ne.sortIndex=ne.expirationTime,e(y,ne);else break;ne=n(g)}}function se(F){if(re=!1,Ae(F),!J)if(n(y)!==null)J=!0,be||(be=!0,x());else{var ne=n(g);ne!==null&&Me(se,ne.startTime-F)}}var be=!1,V=-1,A=5,C=-1;function P(){return Y?!0:!(s.unstable_now()-C<A)}function O(){if(Y=!1,be){var F=s.unstable_now();C=F;var ne=!0;try{e:{J=!1,re&&(re=!1,de(V),V=-1),G=!0;var ce=D;try{t:{for(Ae(F),R=n(y);R!==null&&!(R.expirationTime>F&&P());){var ie=R.callback;if(typeof ie=="function"){R.callback=null,D=R.priorityLevel;var w=ie(R.expirationTime<=F);if(F=s.unstable_now(),typeof w=="function"){R.callback=w,Ae(F),ne=!0;break t}R===n(y)&&r(y),Ae(F)}else r(y);R=n(y)}if(R!==null)ne=!0;else{var z=n(g);z!==null&&Me(se,z.startTime-F),ne=!1}}break e}finally{R=null,D=ce,G=!1}ne=void 0}}finally{ne?x():be=!1}}}var x;if(typeof K=="function")x=function(){K(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ne=I.port2;I.port1.onmessage=O,x=function(){Ne.postMessage(null)}}else x=function(){le(O,0)};function Me(F,ne){V=le(function(){F(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_next=function(F){switch(D){case 1:case 2:case 3:var ne=3;break;default:ne=D}var ce=D;D=ne;try{return F()}finally{D=ce}},s.unstable_requestPaint=function(){Y=!0},s.unstable_runWithPriority=function(F,ne){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ce=D;D=F;try{return ne()}finally{D=ce}},s.unstable_scheduleCallback=function(F,ne,ce){var ie=s.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?ie+ce:ie):ce=ie,F){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=ce+w,F={id:T++,callback:ne,priorityLevel:F,startTime:ce,expirationTime:w,sortIndex:-1},ce>ie?(F.sortIndex=ce,e(g,F),n(y)===null&&F===n(g)&&(re?(de(V),V=-1):re=!0,Me(se,ce-ie))):(F.sortIndex=w,e(y,F),J||G||(J=!0,be||(be=!0,x()))),F},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(F){var ne=D;return function(){var ce=D;D=ne;try{return F.apply(this,arguments)}finally{D=ce}}}})(Md)),Md}var z_;function DA(){return z_||(z_=1,Vd.exports=NA()),Vd.exports}var Pd={exports:{}},Kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function OA(){if(q_)return Kt;q_=1;var s=wm();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(y,g,T){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:R==null?null:""+R,children:y,containerInfo:g,implementation:T}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Kt.createPortal=function(y,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(y,g,null,T)},Kt.flushSync=function(y){var g=f.T,T=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=g,r.p=T,r.d.f()}},Kt.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},Kt.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},Kt.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var T=g.as,R=p(T,g.crossOrigin),D=typeof g.integrity=="string"?g.integrity:void 0,G=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:R,integrity:D,fetchPriority:G}):T==="script"&&r.d.X(y,{crossOrigin:R,integrity:D,fetchPriority:G,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Kt.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=p(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},Kt.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,R=p(T,g.crossOrigin);r.d.L(y,T,{crossOrigin:R,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Kt.preloadModule=function(y,g){if(typeof y=="string")if(g){var T=p(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},Kt.requestFormReset=function(y){r.d.r(y)},Kt.unstable_batchedUpdates=function(y,g){return y(g)},Kt.useFormState=function(y,g,T){return f.H.useFormState(y,g,T)},Kt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Kt.version="19.1.1",Kt}var B_;function xA(){if(B_)return Pd.exports;B_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Pd.exports=OA(),Pd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function VA(){if(H_)return Tl;H_=1;var s=DA(),e=wm(),n=xA();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(r(188))}function y(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===o)return p(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=d;break}if(E===o){v=!0,o=h,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,o=h;break}if(E===o){v=!0,o=d,a=h;break}E=E.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,R=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),de=Symbol.for("react.consumer"),K=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function x(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Ne(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case J:return"Fragment";case Y:return"Profiler";case re:return"StrictMode";case se:return"Suspense";case be:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case K:return(t.displayName||"Context")+".Provider";case de:return(t._context.displayName||"Context")+".Consumer";case Ae:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return i=t.displayName||null,i!==null?i:Ne(t.type)||"Memo";case A:i=t._payload,t=t._init;try{return Ne(t(i))}catch{}}return null}var Me=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},ie=[],w=-1;function z(t){return{current:t}}function te(t){0>w||(t.current=ie[w],ie[w]=null,w--)}function ee(t,i){w++,ie[w]=t.current,t.current=i}var he=z(null),Ce=z(null),Ee=z(null),kt=z(null);function Ke(t,i){switch(ee(Ee,i),ee(Ce,t),ee(he,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?u_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=u_(i),t=c_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}te(he),ee(he,t)}function kn(){te(he),te(Ce),te(Ee)}function mo(t){t.memoizedState!==null&&ee(kt,t);var i=he.current,a=c_(i,t.type);i!==a&&(ee(Ce,t),ee(he,a))}function Zr(t){Ce.current===t&&(te(he),te(Ce)),kt.current===t&&(te(kt),pl._currentValue=ce)}var Wr=Object.prototype.hasOwnProperty,Js=s.unstable_scheduleCallback,Jr=s.unstable_cancelCallback,Dh=s.unstable_shouldYield,po=s.unstable_requestPaint,sn=s.unstable_now,au=s.unstable_getCurrentPriorityLevel,St=s.unstable_ImmediatePriority,Nt=s.unstable_UserBlockingPriority,_i=s.unstable_NormalPriority,Oh=s.unstable_LowPriority,go=s.unstable_IdlePriority,xh=s.log,er=s.unstable_setDisableYieldValue,Xi=null,Ft=null;function bn(t){if(typeof xh=="function"&&er(t),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Xi,t)}catch{}}var Wt=Math.clz32?Math.clz32:lu,Vh=Math.log,ou=Math.LN2;function lu(t){return t>>>=0,t===0?32:31-(Vh(t)/ou|0)|0}var $n=256,$i=4194304;function Un(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function An(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~d,o!==0?h=Un(o):(v&=E,v!==0?h=Un(v):a||(a=E&~t,a!==0&&(h=Un(a))))):(E=o&~d,E!==0?h=Un(E):v!==0?h=Un(v):a||(a=o&~t,a!==0&&(h=Un(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Zi(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function ea(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yo(){var t=$n;return $n<<=1,($n&4194048)===0&&($n=256),t}function Wi(){var t=$i;return $i<<=1,($i&62914560)===0&&($i=4194304),t}function ta(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function ct(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function uu(t,i,a,o,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,N=t.expirationTimes,j=t.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-Wt(a),Z=1<<Q;E[Q]=0,N[Q]=-1;var q=j[Q];if(q!==null)for(j[Q]=null,Q=0;Q<q.length;Q++){var B=q[Q];B!==null&&(B.lane&=-536870913)}a&=~Z}o!==0&&Ji(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Ji(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-Wt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function es(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-Wt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function _o(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function vo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function vi(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:N_(t.type))}function Mh(t,i){var a=ne.p;try{return ne.p=t,i()}finally{ne.p=a}}var Zn=Math.random().toString(36).slice(2),ht="__reactFiber$"+Zn,Ut="__reactProps$"+Zn,Ei="__reactContainer$"+Zn,tr="__reactEvents$"+Zn,nr="__reactListeners$"+Zn,Ph="__reactHandles$"+Zn,Ln="__reactResources$"+Zn,ts="__reactMarker$"+Zn;function na(t){delete t[ht],delete t[Ut],delete t[tr],delete t[nr],delete t[Ph]}function Wn(t){var i=t[ht];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Ei]||a[ht]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=m_(t);t!==null;){if(a=t[ht])return a;t=m_(t)}return i}t=a,a=t.parentNode}return null}function Jn(t){if(t=t[ht]||t[Ei]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function ns(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function is(t){var i=t[Ln];return i||(i=t[Ln]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ft(t){t[ts]=!0}var cu=new Set,ir={};function ei(t,i){ti(t,i),ti(t+"Capture",i)}function ti(t,i){for(ir[t]=i,t=0;t<i.length;t++)cu.add(i[t])}var sr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ni={},ia={};function kh(t){return Wr.call(ia,t)?!0:Wr.call(ni,t)?!1:sr.test(t)?ia[t]=!0:(ni[t]=!0,!1)}function rr(t,i,a){if(kh(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ar(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Sn(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}var or,sa;function Ti(t){if(or===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);or=i&&i[1]||"",sa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+or+t+sa}var ra=!1;function aa(t,i){if(!t||ra)return"";ra=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(B){var q=B}Reflect.construct(t,[],Z)}else{try{Z.call()}catch(B){q=B}t.call(Z.prototype)}}else{try{throw Error()}catch(B){q=B}(Z=t())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(B){if(B&&q&&typeof B.stack=="string")return[B.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var N=v.split(`
`),j=E.split(`
`);for(h=o=0;o<N.length&&!N[o].includes("DetermineComponentFrameRoot");)o++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(o===N.length||h===j.length)for(o=N.length-1,h=j.length-1;1<=o&&0<=h&&N[o]!==j[h];)h--;for(;1<=o&&0<=h;o--,h--)if(N[o]!==j[h]){if(o!==1||h!==1)do if(o--,h--,0>h||N[o]!==j[h]){var Q=`
`+N[o].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=o&&0<=h);break}}}finally{ra=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ti(a):""}function Uh(t){switch(t.tag){case 26:case 27:case 5:return Ti(t.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return aa(t.type,!1);case 11:return aa(t.type.render,!1);case 1:return aa(t.type,!0);case 31:return Ti("Activity");default:return""}}function jn(t){try{var i="";do i+=Uh(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function rt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ss(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function lr(t){var i=ss(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),o=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function rs(t){t._valueTracker||(t._valueTracker=lr(t))}function Ye(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=ss(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function bi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ur=/[\n"\\]/g;function Dt(t){return t.replace(ur,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Eo(t,i,a,o,h,d,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+rt(i)):t.value!==""+rt(i)&&(t.value=""+rt(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?bo(t,v,rt(i)):a!=null?bo(t,v,rt(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+rt(E):t.removeAttribute("name")}function To(t,i,a,o,h,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+rt(a):"",i=i!=null?""+rt(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function bo(t,i,a){i==="number"&&bi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function as(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+rt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function hu(t,i,a){if(i!=null&&(i=""+rt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+rt(a):""}function fu(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(r(92));if(Me(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=rt(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function wn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Ai=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ao(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||Ai.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function So(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&Ao(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&Ao(t,d,i[d])}function oa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var du=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zn(t){return mu.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var wo=null;function Ro(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var os=null,Jt=null;function pu(t){var i=Jn(t);if(i&&(t=i.stateNode)){var a=t[Ut]||null;e:switch(t=i.stateNode,i.type){case"input":if(Eo(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Dt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[Ut]||null;if(!h)throw Error(r(90));Eo(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&Ye(o)}break e;case"textarea":hu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&as(t,!!a.multiple,i,!1)}}}var cr=!1;function hr(t,i,a){if(cr)return t(i,a);cr=!0;try{var o=t(i);return o}finally{if(cr=!1,(os!==null||Jt!==null)&&(sc(),os&&(i=os,t=Jt,Jt=os=null,pu(i),t)))for(i=0;i<t.length;i++)pu(t[i])}}function ls(t,i){var a=t.stateNode;if(a===null)return null;var o=a[Ut]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Si=!1;if(en)try{var us={};Object.defineProperty(us,"passive",{get:function(){Si=!0}}),window.addEventListener("test",us,us),window.removeEventListener("test",us,us)}catch{Si=!1}var Rn=null,Je=null,la=null;function gu(){if(la)return la;var t,i=Je,a=i.length,o,h="value"in Rn?Rn.value:Rn.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&i[a-o]===h[d-o];o++);return la=h.slice(t,1<o?1-o:void 0)}function fr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function dr(){return!0}function Io(){return!1}function wt(t){function i(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?dr:Io,this.isPropagationStopped=Io,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),i}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mr=wt(Gt),pr=T({},Gt,{view:0,detail:0}),gr=wt(pr),ua,yr,ii,_r=T({},pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ii&&(ii&&t.type==="mousemove"?(ua=t.screenX-ii.screenX,yr=t.screenY-ii.screenY):yr=ua=0,ii=t),ua)},movementY:function(t){return"movementY"in t?t.movementY:yr}}),vr=wt(_r),Lh=T({},_r,{dataTransfer:0}),yu=wt(Lh),Er=T({},pr,{relatedTarget:0}),ca=wt(Er),_u=T({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),Co=wt(_u),No=T({},Gt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vu=wt(No),ha=T({},Gt,{data:0}),Do=wt(ha),Eu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Tu[t])?!!i[t]:!1}function fa(){return bu}var Au=T({},pr,{key:function(t){if(t.key){var i=Eu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=fr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fa,charCode:function(t){return t.type==="keypress"?fr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),da=wt(Au),tn=T({},_r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oo=wt(tn),Su=T({},pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fa}),cs=wt(Su),u=T({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),m=wt(u),_=T({},_r,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),b=wt(_),L=T({},Gt,{newState:0,oldState:0}),H=wt(L),ae=[9,13,27,32],we=en&&"CompositionEvent"in window,nt=null;en&&"documentMode"in document&&(nt=document.documentMode);var Fe=en&&"TextEvent"in window&&!nt,dt=en&&(!we||nt&&8<nt&&11>=nt),hn=" ",si=!1;function qn(t,i){switch(t){case"keyup":return ae.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hn=!1;function xo(t,i){switch(t){case"compositionend":return Bn(i);case"keypress":return i.which!==32?null:(si=!0,hn);case"textInput":return t=i.data,t===hn&&si?null:t;default:return null}}function J0(t,i){if(Hn)return t==="compositionend"||!we&&qn(t,i)?(t=gu(),la=Je=Rn=null,Hn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return dt&&i.locale!=="ko"?null:i.data;default:return null}}var eb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ap(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!eb[t.type]:i==="textarea"}function Sp(t,i,a,o){os?Jt?Jt.push(o):Jt=[o]:os=o,i=cc(i,"onChange"),0<i.length&&(a=new mr("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var Vo=null,Mo=null;function tb(t){s_(t,0)}function wu(t){var i=ns(t);if(Ye(i))return t}function wp(t,i){if(t==="change")return i}var Rp=!1;if(en){var jh;if(en){var zh="oninput"in document;if(!zh){var Ip=document.createElement("div");Ip.setAttribute("oninput","return;"),zh=typeof Ip.oninput=="function"}jh=zh}else jh=!1;Rp=jh&&(!document.documentMode||9<document.documentMode)}function Cp(){Vo&&(Vo.detachEvent("onpropertychange",Np),Mo=Vo=null)}function Np(t){if(t.propertyName==="value"&&wu(Mo)){var i=[];Sp(i,Mo,t,Ro(t)),hr(tb,i)}}function nb(t,i,a){t==="focusin"?(Cp(),Vo=i,Mo=a,Vo.attachEvent("onpropertychange",Np)):t==="focusout"&&Cp()}function ib(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wu(Mo)}function sb(t,i){if(t==="click")return wu(i)}function rb(t,i){if(t==="input"||t==="change")return wu(i)}function ab(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var fn=typeof Object.is=="function"?Object.is:ab;function Po(t,i){if(fn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Wr.call(i,h)||!fn(t[h],i[h]))return!1}return!0}function Dp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Op(t,i){var a=Dp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Dp(a)}}function xp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?xp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Vp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=bi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=bi(t.document)}return i}function qh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var ob=en&&"documentMode"in document&&11>=document.documentMode,ma=null,Bh=null,ko=null,Hh=!1;function Mp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hh||ma==null||ma!==bi(o)||(o=ma,"selectionStart"in o&&qh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ko&&Po(ko,o)||(ko=o,o=cc(Bh,"onSelect"),0<o.length&&(i=new mr("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=ma)))}function Tr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var pa={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionrun:Tr("Transition","TransitionRun"),transitionstart:Tr("Transition","TransitionStart"),transitioncancel:Tr("Transition","TransitionCancel"),transitionend:Tr("Transition","TransitionEnd")},Fh={},Pp={};en&&(Pp=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function br(t){if(Fh[t])return Fh[t];if(!pa[t])return t;var i=pa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Pp)return Fh[t]=i[a];return t}var kp=br("animationend"),Up=br("animationiteration"),Lp=br("animationstart"),lb=br("transitionrun"),ub=br("transitionstart"),cb=br("transitioncancel"),jp=br("transitionend"),zp=new Map,Gh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gh.push("scrollEnd");function Fn(t,i){zp.set(t,i),ei(i,[t])}var qp=new WeakMap;function In(t,i){if(typeof t=="object"&&t!==null){var a=qp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:jn(i)},qp.set(t,i),i)}return{value:t,source:i,stack:jn(i)}}var Cn=[],ga=0,Qh=0;function Ru(){for(var t=ga,i=Qh=ga=0;i<t;){var a=Cn[i];Cn[i++]=null;var o=Cn[i];Cn[i++]=null;var h=Cn[i];Cn[i++]=null;var d=Cn[i];if(Cn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&Bp(a,h,d)}}function Iu(t,i,a,o){Cn[ga++]=t,Cn[ga++]=i,Cn[ga++]=a,Cn[ga++]=o,Qh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Kh(t,i,a,o){return Iu(t,i,a,o),Cu(t)}function ya(t,i){return Iu(t,null,null,i),Cu(t)}function Bp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Wt(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function Cu(t){if(50<ol)throw ol=0,ed=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var _a={};function hb(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,i,a,o){return new hb(t,i,a,o)}function Yh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ri(t,i){var a=t.alternate;return a===null?(a=dn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Hp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Nu(t,i,a,o,h,d){var v=0;if(o=t,typeof t=="function")Yh(t)&&(v=1);else if(typeof t=="string")v=dA(t,a,he.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=dn(31,a,i,h),t.elementType=C,t.lanes=d,t;case J:return Ar(a.children,h,d,i);case re:v=8,h|=24;break;case Y:return t=dn(12,a,i,h|2),t.elementType=Y,t.lanes=d,t;case se:return t=dn(13,a,i,h),t.elementType=se,t.lanes=d,t;case be:return t=dn(19,a,i,h),t.elementType=be,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case le:case K:v=10;break e;case de:v=9;break e;case Ae:v=11;break e;case V:v=14;break e;case A:v=16,o=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return i=dn(v,a,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function Ar(t,i,a,o){return t=dn(7,t,o,i),t.lanes=a,t}function Xh(t,i,a){return t=dn(6,t,null,i),t.lanes=a,t}function $h(t,i,a){return i=dn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var va=[],Ea=0,Du=null,Ou=0,Nn=[],Dn=0,Sr=null,Ii=1,Ci="";function wr(t,i){va[Ea++]=Ou,va[Ea++]=Du,Du=t,Ou=i}function Fp(t,i,a){Nn[Dn++]=Ii,Nn[Dn++]=Ci,Nn[Dn++]=Sr,Sr=t;var o=Ii;t=Ci;var h=32-Wt(o)-1;o&=~(1<<h),a+=1;var d=32-Wt(i)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Ii=1<<32-Wt(i)+h|a<<h|o,Ci=d+t}else Ii=1<<d|a<<h|o,Ci=t}function Zh(t){t.return!==null&&(wr(t,1),Fp(t,1,0))}function Wh(t){for(;t===Du;)Du=va[--Ea],va[Ea]=null,Ou=va[--Ea],va[Ea]=null;for(;t===Sr;)Sr=Nn[--Dn],Nn[Dn]=null,Ci=Nn[--Dn],Nn[Dn]=null,Ii=Nn[--Dn],Nn[Dn]=null}var nn=null,lt=null,Be=!1,Rr=null,ri=!1,Jh=Error(r(519));function Ir(t){var i=Error(r(418,""));throw jo(In(i,t)),Jh}function Gp(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[ht]=t,i[Ut]=o,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<ul.length;a++)Ve(ul[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),To(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),rs(i);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),fu(i,o.value,o.defaultValue,o.children),rs(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||l_(i.textContent,a)?(o.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),o.onScroll!=null&&Ve("scroll",i),o.onScrollEnd!=null&&Ve("scrollend",i),o.onClick!=null&&(i.onclick=hc),i=!0):i=!1,i||Ir(t)}function Qp(t){for(nn=t.return;nn;)switch(nn.tag){case 5:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:nn=nn.return}}function Uo(t){if(t!==nn)return!1;if(!Be)return Qp(t),Be=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||gd(t.type,t.memoizedProps)),a=!a),a&&lt&&Ir(t),Qp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){lt=Qn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}lt=null}}else i===27?(i=lt,Rs(t.type)?(t=Ed,Ed=null,lt=t):lt=i):lt=nn?Qn(t.stateNode.nextSibling):null;return!0}function Lo(){lt=nn=null,Be=!1}function Kp(){var t=Rr;return t!==null&&(on===null?on=t:on.push.apply(on,t),Rr=null),t}function jo(t){Rr===null?Rr=[t]:Rr.push(t)}var ef=z(null),Cr=null,Ni=null;function hs(t,i,a){ee(ef,i._currentValue),i._currentValue=a}function Di(t){t._currentValue=ef.current,te(ef)}function tf(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function nf(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var E=d;d=h;for(var N=0;N<i.length;N++)if(E.context===i[N]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),tf(d.return,a,t),o||(v=null);break e}d=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),tf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function zo(t,i,a,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var E=h.type;fn(h.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(h===kt.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(pl):t=[pl])}h=h.return}t!==null&&nf(i,t,a,o),i.flags|=262144}function xu(t){for(t=t.firstContext;t!==null;){if(!fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Nr(t){Cr=t,Ni=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qt(t){return Yp(Cr,t)}function Vu(t,i){return Cr===null&&Nr(t),Yp(t,i)}function Yp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ni===null){if(t===null)throw Error(r(308));Ni=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Ni=Ni.next=i;return a}var fb=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},db=s.unstable_scheduleCallback,mb=s.unstable_NormalPriority,Rt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sf(){return{controller:new fb,data:new Map,refCount:0}}function qo(t){t.refCount--,t.refCount===0&&db(mb,function(){t.controller.abort()})}var Bo=null,rf=0,Ta=0,ba=null;function pb(t,i){if(Bo===null){var a=Bo=[];rf=0,Ta=od(),ba={status:"pending",value:void 0,then:function(o){a.push(o)}}}return rf++,i.then(Xp,Xp),i}function Xp(){if(--rf===0&&Bo!==null){ba!==null&&(ba.status="fulfilled");var t=Bo;Bo=null,Ta=0,ba=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function gb(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var $p=F.S;F.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&pb(t,i),$p!==null&&$p(t,i)};var Dr=z(null);function af(){var t=Dr.current;return t!==null?t:et.pooledCache}function Mu(t,i){i===null?ee(Dr,Dr.current):ee(Dr,i.pool)}function Zp(){var t=af();return t===null?null:{parent:Rt._currentValue,pool:t}}var Ho=Error(r(460)),Wp=Error(r(474)),Pu=Error(r(542)),of={then:function(){}};function Jp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ku(){}function eg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(ku,ku),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ng(t),t;default:if(typeof i.status=="string")i.then(ku,ku);else{if(t=et,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ng(t),t}throw Fo=i,Ho}}var Fo=null;function tg(){if(Fo===null)throw Error(r(459));var t=Fo;return Fo=null,t}function ng(t){if(t===Ho||t===Pu)throw Error(r(483))}var fs=!1;function lf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ds(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ms(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Ge&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Cu(t),Bp(t,null,a),i}return Iu(t,o,i,a),Cu(t)}function Go(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,es(t,a)}}function cf(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var hf=!1;function Qo(){if(hf){var t=ba;if(t!==null)throw t}}function Ko(t,i,a,o){hf=!1;var h=t.updateQueue;fs=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var N=E,j=N.next;N.next=null,v===null?d=j:v.next=j,v=N;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==v&&(E===null?Q.firstBaseUpdate=j:E.next=j,Q.lastBaseUpdate=N))}if(d!==null){var Z=h.baseState;v=0,Q=j=N=null,E=d;do{var q=E.lane&-536870913,B=q!==E.lane;if(B?(je&q)===q:(o&q)===q){q!==0&&q===Ta&&(hf=!0),Q!==null&&(Q=Q.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Te=t,ge=E;q=i;var Ze=a;switch(ge.tag){case 1:if(Te=ge.payload,typeof Te=="function"){Z=Te.call(Ze,Z,q);break e}Z=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=ge.payload,q=typeof Te=="function"?Te.call(Ze,Z,q):Te,q==null)break e;Z=T({},Z,q);break e;case 2:fs=!0}}q=E.callback,q!==null&&(t.flags|=64,B&&(t.flags|=8192),B=h.callbacks,B===null?h.callbacks=[q]:B.push(q))}else B={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(j=Q=B,N=Z):Q=Q.next=B,v|=q;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);Q===null&&(N=Z),h.baseState=N,h.firstBaseUpdate=j,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),bs|=v,t.lanes=v,t.memoizedState=Z}}function ig(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function sg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ig(a[t],i)}var Aa=z(null),Uu=z(0);function rg(t,i){t=Ui,ee(Uu,t),ee(Aa,i),Ui=t|i.baseLanes}function ff(){ee(Uu,Ui),ee(Aa,Aa.current)}function df(){Ui=Uu.current,te(Aa),te(Uu)}var ps=0,De=null,Xe=null,_t=null,Lu=!1,Sa=!1,Or=!1,ju=0,Yo=0,wa=null,yb=0;function mt(){throw Error(r(321))}function mf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!fn(t[a],i[a]))return!1;return!0}function pf(t,i,a,o,h,d){return ps=d,De=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=t===null||t.memoizedState===null?Bg:Hg,Or=!1,d=a(o,h),Or=!1,Sa&&(d=og(i,a,o,h)),ag(t),d}function ag(t){F.H=Gu;var i=Xe!==null&&Xe.next!==null;if(ps=0,_t=Xe=De=null,Lu=!1,Yo=0,wa=null,i)throw Error(r(300));t===null||Ot||(t=t.dependencies,t!==null&&xu(t)&&(Ot=!0))}function og(t,i,a,o){De=t;var h=0;do{if(Sa&&(wa=null),Yo=0,Sa=!1,25<=h)throw Error(r(301));if(h+=1,_t=Xe=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}F.H=Sb,d=i(a,o)}while(Sa);return d}function _b(){var t=F.H,i=t.useState()[0];return i=typeof i.then=="function"?Xo(i):i,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(De.flags|=1024),i}function gf(){var t=ju!==0;return ju=0,t}function yf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function _f(t){if(Lu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Lu=!1}ps=0,_t=Xe=De=null,Sa=!1,Yo=ju=0,wa=null}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?De.memoizedState=_t=t:_t=_t.next=t,_t}function vt(){if(Xe===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var i=_t===null?De.memoizedState:_t.next;if(i!==null)_t=i,Xe=t;else{if(t===null)throw De.alternate===null?Error(r(467)):Error(r(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},_t===null?De.memoizedState=_t=t:_t=_t.next=t}return _t}function vf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xo(t){var i=Yo;return Yo+=1,wa===null&&(wa=[]),t=eg(wa,t,i),i=De,(_t===null?i.memoizedState:_t.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?Bg:Hg),t}function zu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Xo(t);if(t.$$typeof===K)return Qt(t)}throw Error(r(438,String(t)))}function Ef(t){var i=null,a=De.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=De.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=vf(),De.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=P;return i.index++,a}function Oi(t,i){return typeof i=="function"?i(t):i}function qu(t){var i=vt();return Tf(i,Xe,t)}function Tf(t,i,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var E=v=null,N=null,j=i,Q=!1;do{var Z=j.lane&-536870913;if(Z!==j.lane?(je&Z)===Z:(ps&Z)===Z){var q=j.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),Z===Ta&&(Q=!0);else if((ps&q)===q){j=j.next,q===Ta&&(Q=!0);continue}else Z={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},N===null?(E=N=Z,v=d):N=N.next=Z,De.lanes|=q,bs|=q;Z=j.action,Or&&a(d,Z),d=j.hasEagerState?j.eagerState:a(d,Z)}else q={lane:Z,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},N===null?(E=N=q,v=d):N=N.next=q,De.lanes|=Z,bs|=Z;j=j.next}while(j!==null&&j!==i);if(N===null?v=d:N.next=E,!fn(d,t.memoizedState)&&(Ot=!0,Q&&(a=ba,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=N,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function bf(t){var i=vt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);fn(d,i.memoizedState)||(Ot=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function lg(t,i,a){var o=De,h=vt(),d=Be;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!fn((Xe||h).memoizedState,a);v&&(h.memoizedState=a,Ot=!0),h=h.queue;var E=hg.bind(null,o,h,t);if($o(2048,8,E,[t]),h.getSnapshot!==i||v||_t!==null&&_t.memoizedState.tag&1){if(o.flags|=2048,Ra(9,Bu(),cg.bind(null,o,h,a,i),null),et===null)throw Error(r(349));d||(ps&124)!==0||ug(o,i,a)}return a}function ug(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=De.updateQueue,i===null?(i=vf(),De.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function cg(t,i,a,o){i.value=a,i.getSnapshot=o,fg(i)&&dg(t)}function hg(t,i,a){return a(function(){fg(i)&&dg(t)})}function fg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!fn(t,a)}catch{return!0}}function dg(t){var i=ya(t,2);i!==null&&_n(i,t,2)}function Af(t){var i=rn();if(typeof t=="function"){var a=t;if(t=a(),Or){bn(!0);try{a()}finally{bn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:t},i}function mg(t,i,a,o){return t.baseState=a,Tf(t,Xe,typeof o=="function"?o:Oi)}function vb(t,i,a,o,h){if(Fu(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};F.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,pg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function pg(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=F.T,v={};F.T=v;try{var E=a(h,o),N=F.S;N!==null&&N(v,E),gg(t,i,E)}catch(j){Sf(t,i,j)}finally{F.T=d}}else try{d=a(h,o),gg(t,i,d)}catch(j){Sf(t,i,j)}}function gg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){yg(t,i,o)},function(o){return Sf(t,i,o)}):yg(t,i,a)}function yg(t,i,a){i.status="fulfilled",i.value=a,_g(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,pg(t,a)))}function Sf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,_g(i),i=i.next;while(i!==o)}t.action=null}function _g(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function vg(t,i){return i}function Eg(t,i){if(Be){var a=et.formState;if(a!==null){e:{var o=De;if(Be){if(lt){t:{for(var h=lt,d=ri;h.nodeType!==8;){if(!d){h=null;break t}if(h=Qn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){lt=Qn(h.nextSibling),o=h.data==="F!";break e}}Ir(o)}o=!1}o&&(i=a[0])}}return a=rn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vg,lastRenderedState:i},a.queue=o,a=jg.bind(null,De,o),o.dispatch=a,o=Af(!1),d=Nf.bind(null,De,!1,o.queue),o=rn(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=vb.bind(null,De,h,d,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function Tg(t){var i=vt();return bg(i,Xe,t)}function bg(t,i,a){if(i=Tf(t,i,vg)[0],t=qu(Oi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Xo(i)}catch(v){throw v===Ho?Pu:v}else o=i;i=vt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(De.flags|=2048,Ra(9,Bu(),Eb.bind(null,h,a),null)),[o,d,t]}function Eb(t,i){t.action=i}function Ag(t){var i=vt(),a=Xe;if(a!==null)return bg(i,a,t);vt(),i=i.memoizedState,a=vt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Ra(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=De.updateQueue,i===null&&(i=vf(),De.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Bu(){return{destroy:void 0,resource:void 0}}function Sg(){return vt().memoizedState}function Hu(t,i,a,o){var h=rn();o=o===void 0?null:o,De.flags|=t,h.memoizedState=Ra(1|i,Bu(),a,o)}function $o(t,i,a,o){var h=vt();o=o===void 0?null:o;var d=h.memoizedState.inst;Xe!==null&&o!==null&&mf(o,Xe.memoizedState.deps)?h.memoizedState=Ra(i,d,a,o):(De.flags|=t,h.memoizedState=Ra(1|i,d,a,o))}function wg(t,i){Hu(8390656,8,t,i)}function Rg(t,i){$o(2048,8,t,i)}function Ig(t,i){return $o(4,2,t,i)}function Cg(t,i){return $o(4,4,t,i)}function Ng(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Dg(t,i,a){a=a!=null?a.concat([t]):null,$o(4,4,Ng.bind(null,i,t),a)}function wf(){}function Og(t,i){var a=vt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&mf(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function xg(t,i){var a=vt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&mf(i,o[1]))return o[0];if(o=t(),Or){bn(!0);try{t()}finally{bn(!1)}}return a.memoizedState=[o,i],o}function Rf(t,i,a){return a===void 0||(ps&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Py(),De.lanes|=t,bs|=t,a)}function Vg(t,i,a,o){return fn(a,i)?a:Aa.current!==null?(t=Rf(t,a,o),fn(t,i)||(Ot=!0),t):(ps&42)===0?(Ot=!0,t.memoizedState=a):(t=Py(),De.lanes|=t,bs|=t,i)}function Mg(t,i,a,o,h){var d=ne.p;ne.p=d!==0&&8>d?d:8;var v=F.T,E={};F.T=E,Nf(t,!1,i,a);try{var N=h(),j=F.S;if(j!==null&&j(E,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=gb(N,o);Zo(t,i,Q,yn(t))}else Zo(t,i,o,yn(t))}catch(Z){Zo(t,i,{then:function(){},status:"rejected",reason:Z},yn())}finally{ne.p=d,F.T=v}}function Tb(){}function If(t,i,a,o){if(t.tag!==5)throw Error(r(476));var h=Pg(t).queue;Mg(t,h,i,ce,a===null?Tb:function(){return kg(t),a(o)})}function Pg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:ce},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function kg(t){var i=Pg(t).next.queue;Zo(t,i,{},yn())}function Cf(){return Qt(pl)}function Ug(){return vt().memoizedState}function Lg(){return vt().memoizedState}function bb(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=yn();t=ds(a);var o=ms(i,t,a);o!==null&&(_n(o,i,a),Go(o,i,a)),i={cache:sf()},t.payload=i;return}i=i.return}}function Ab(t,i,a){var o=yn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Fu(t)?zg(i,a):(a=Kh(t,i,a,o),a!==null&&(_n(a,t,o),qg(a,i,o)))}function jg(t,i,a){var o=yn();Zo(t,i,a,o)}function Zo(t,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fu(t))zg(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(h.hasEagerState=!0,h.eagerState=E,fn(E,v))return Iu(t,i,h,0),et===null&&Ru(),!1}catch{}finally{}if(a=Kh(t,i,h,o),a!==null)return _n(a,t,o),qg(a,i,o),!0}return!1}function Nf(t,i,a,o){if(o={lane:2,revertLane:od(),action:o,hasEagerState:!1,eagerState:null,next:null},Fu(t)){if(i)throw Error(r(479))}else i=Kh(t,a,o,2),i!==null&&_n(i,t,2)}function Fu(t){var i=t.alternate;return t===De||i!==null&&i===De}function zg(t,i){Sa=Lu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function qg(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,es(t,a)}}var Gu={readContext:Qt,use:zu,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt},Bg={readContext:Qt,use:zu,useCallback:function(t,i){return rn().memoizedState=[t,i===void 0?null:i],t},useContext:Qt,useEffect:wg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Hu(4194308,4,Ng.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Hu(4194308,4,t,i)},useInsertionEffect:function(t,i){Hu(4,2,t,i)},useMemo:function(t,i){var a=rn();i=i===void 0?null:i;var o=t();if(Or){bn(!0);try{t()}finally{bn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=rn();if(a!==void 0){var h=a(i);if(Or){bn(!0);try{a(i)}finally{bn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=Ab.bind(null,De,t),[o.memoizedState,t]},useRef:function(t){var i=rn();return t={current:t},i.memoizedState=t},useState:function(t){t=Af(t);var i=t.queue,a=jg.bind(null,De,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:wf,useDeferredValue:function(t,i){var a=rn();return Rf(a,t,i)},useTransition:function(){var t=Af(!1);return t=Mg.bind(null,De,t.queue,!0,!1),rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=De,h=rn();if(Be){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),et===null)throw Error(r(349));(je&124)!==0||ug(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,wg(hg.bind(null,o,d,t),[t]),o.flags|=2048,Ra(9,Bu(),cg.bind(null,o,d,a,i),null),a},useId:function(){var t=rn(),i=et.identifierPrefix;if(Be){var a=Ci,o=Ii;a=(o&~(1<<32-Wt(o)-1)).toString(32)+a,i=""+i+"R"+a,a=ju++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=yb++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:Cf,useFormState:Eg,useActionState:Eg,useOptimistic:function(t){var i=rn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Nf.bind(null,De,!0,a),a.dispatch=i,[t,i]},useMemoCache:Ef,useCacheRefresh:function(){return rn().memoizedState=bb.bind(null,De)}},Hg={readContext:Qt,use:zu,useCallback:Og,useContext:Qt,useEffect:Rg,useImperativeHandle:Dg,useInsertionEffect:Ig,useLayoutEffect:Cg,useMemo:xg,useReducer:qu,useRef:Sg,useState:function(){return qu(Oi)},useDebugValue:wf,useDeferredValue:function(t,i){var a=vt();return Vg(a,Xe.memoizedState,t,i)},useTransition:function(){var t=qu(Oi)[0],i=vt().memoizedState;return[typeof t=="boolean"?t:Xo(t),i]},useSyncExternalStore:lg,useId:Ug,useHostTransitionStatus:Cf,useFormState:Tg,useActionState:Tg,useOptimistic:function(t,i){var a=vt();return mg(a,Xe,t,i)},useMemoCache:Ef,useCacheRefresh:Lg},Sb={readContext:Qt,use:zu,useCallback:Og,useContext:Qt,useEffect:Rg,useImperativeHandle:Dg,useInsertionEffect:Ig,useLayoutEffect:Cg,useMemo:xg,useReducer:bf,useRef:Sg,useState:function(){return bf(Oi)},useDebugValue:wf,useDeferredValue:function(t,i){var a=vt();return Xe===null?Rf(a,t,i):Vg(a,Xe.memoizedState,t,i)},useTransition:function(){var t=bf(Oi)[0],i=vt().memoizedState;return[typeof t=="boolean"?t:Xo(t),i]},useSyncExternalStore:lg,useId:Ug,useHostTransitionStatus:Cf,useFormState:Ag,useActionState:Ag,useOptimistic:function(t,i){var a=vt();return Xe!==null?mg(a,Xe,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Ef,useCacheRefresh:Lg},Ia=null,Wo=0;function Qu(t){var i=Wo;return Wo+=1,Ia===null&&(Ia=[]),eg(Ia,t,i)}function Jo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Ku(t,i){throw i.$$typeof===R?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Fg(t){var i=t._init;return i(t._payload)}function Gg(t){function i(k,M){if(t){var U=k.deletions;U===null?(k.deletions=[M],k.flags|=16):U.push(M)}}function a(k,M){if(!t)return null;for(;M!==null;)i(k,M),M=M.sibling;return null}function o(k){for(var M=new Map;k!==null;)k.key!==null?M.set(k.key,k):M.set(k.index,k),k=k.sibling;return M}function h(k,M){return k=Ri(k,M),k.index=0,k.sibling=null,k}function d(k,M,U){return k.index=U,t?(U=k.alternate,U!==null?(U=U.index,U<M?(k.flags|=67108866,M):U):(k.flags|=67108866,M)):(k.flags|=1048576,M)}function v(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function E(k,M,U,X){return M===null||M.tag!==6?(M=Xh(U,k.mode,X),M.return=k,M):(M=h(M,U),M.return=k,M)}function N(k,M,U,X){var fe=U.type;return fe===J?Q(k,M,U.props.children,X,U.key):M!==null&&(M.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===A&&Fg(fe)===M.type)?(M=h(M,U.props),Jo(M,U),M.return=k,M):(M=Nu(U.type,U.key,U.props,null,k.mode,X),Jo(M,U),M.return=k,M)}function j(k,M,U,X){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=$h(U,k.mode,X),M.return=k,M):(M=h(M,U.children||[]),M.return=k,M)}function Q(k,M,U,X,fe){return M===null||M.tag!==7?(M=Ar(U,k.mode,X,fe),M.return=k,M):(M=h(M,U),M.return=k,M)}function Z(k,M,U){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Xh(""+M,k.mode,U),M.return=k,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case D:return U=Nu(M.type,M.key,M.props,null,k.mode,U),Jo(U,M),U.return=k,U;case G:return M=$h(M,k.mode,U),M.return=k,M;case A:var X=M._init;return M=X(M._payload),Z(k,M,U)}if(Me(M)||x(M))return M=Ar(M,k.mode,U,null),M.return=k,M;if(typeof M.then=="function")return Z(k,Qu(M),U);if(M.$$typeof===K)return Z(k,Vu(k,M),U);Ku(k,M)}return null}function q(k,M,U,X){var fe=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return fe!==null?null:E(k,M,""+U,X);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return U.key===fe?N(k,M,U,X):null;case G:return U.key===fe?j(k,M,U,X):null;case A:return fe=U._init,U=fe(U._payload),q(k,M,U,X)}if(Me(U)||x(U))return fe!==null?null:Q(k,M,U,X,null);if(typeof U.then=="function")return q(k,M,Qu(U),X);if(U.$$typeof===K)return q(k,M,Vu(k,U),X);Ku(k,U)}return null}function B(k,M,U,X,fe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return k=k.get(U)||null,E(M,k,""+X,fe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case D:return k=k.get(X.key===null?U:X.key)||null,N(M,k,X,fe);case G:return k=k.get(X.key===null?U:X.key)||null,j(M,k,X,fe);case A:var Oe=X._init;return X=Oe(X._payload),B(k,M,U,X,fe)}if(Me(X)||x(X))return k=k.get(U)||null,Q(M,k,X,fe,null);if(typeof X.then=="function")return B(k,M,U,Qu(X),fe);if(X.$$typeof===K)return B(k,M,U,Vu(M,X),fe);Ku(M,X)}return null}function Te(k,M,U,X){for(var fe=null,Oe=null,me=M,ye=M=0,Vt=null;me!==null&&ye<U.length;ye++){me.index>ye?(Vt=me,me=null):Vt=me.sibling;var qe=q(k,me,U[ye],X);if(qe===null){me===null&&(me=Vt);break}t&&me&&qe.alternate===null&&i(k,me),M=d(qe,M,ye),Oe===null?fe=qe:Oe.sibling=qe,Oe=qe,me=Vt}if(ye===U.length)return a(k,me),Be&&wr(k,ye),fe;if(me===null){for(;ye<U.length;ye++)me=Z(k,U[ye],X),me!==null&&(M=d(me,M,ye),Oe===null?fe=me:Oe.sibling=me,Oe=me);return Be&&wr(k,ye),fe}for(me=o(me);ye<U.length;ye++)Vt=B(me,k,ye,U[ye],X),Vt!==null&&(t&&Vt.alternate!==null&&me.delete(Vt.key===null?ye:Vt.key),M=d(Vt,M,ye),Oe===null?fe=Vt:Oe.sibling=Vt,Oe=Vt);return t&&me.forEach(function(Os){return i(k,Os)}),Be&&wr(k,ye),fe}function ge(k,M,U,X){if(U==null)throw Error(r(151));for(var fe=null,Oe=null,me=M,ye=M=0,Vt=null,qe=U.next();me!==null&&!qe.done;ye++,qe=U.next()){me.index>ye?(Vt=me,me=null):Vt=me.sibling;var Os=q(k,me,qe.value,X);if(Os===null){me===null&&(me=Vt);break}t&&me&&Os.alternate===null&&i(k,me),M=d(Os,M,ye),Oe===null?fe=Os:Oe.sibling=Os,Oe=Os,me=Vt}if(qe.done)return a(k,me),Be&&wr(k,ye),fe;if(me===null){for(;!qe.done;ye++,qe=U.next())qe=Z(k,qe.value,X),qe!==null&&(M=d(qe,M,ye),Oe===null?fe=qe:Oe.sibling=qe,Oe=qe);return Be&&wr(k,ye),fe}for(me=o(me);!qe.done;ye++,qe=U.next())qe=B(me,k,ye,qe.value,X),qe!==null&&(t&&qe.alternate!==null&&me.delete(qe.key===null?ye:qe.key),M=d(qe,M,ye),Oe===null?fe=qe:Oe.sibling=qe,Oe=qe);return t&&me.forEach(function(wA){return i(k,wA)}),Be&&wr(k,ye),fe}function Ze(k,M,U,X){if(typeof U=="object"&&U!==null&&U.type===J&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case D:e:{for(var fe=U.key;M!==null;){if(M.key===fe){if(fe=U.type,fe===J){if(M.tag===7){a(k,M.sibling),X=h(M,U.props.children),X.return=k,k=X;break e}}else if(M.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===A&&Fg(fe)===M.type){a(k,M.sibling),X=h(M,U.props),Jo(X,U),X.return=k,k=X;break e}a(k,M);break}else i(k,M);M=M.sibling}U.type===J?(X=Ar(U.props.children,k.mode,X,U.key),X.return=k,k=X):(X=Nu(U.type,U.key,U.props,null,k.mode,X),Jo(X,U),X.return=k,k=X)}return v(k);case G:e:{for(fe=U.key;M!==null;){if(M.key===fe)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){a(k,M.sibling),X=h(M,U.children||[]),X.return=k,k=X;break e}else{a(k,M);break}else i(k,M);M=M.sibling}X=$h(U,k.mode,X),X.return=k,k=X}return v(k);case A:return fe=U._init,U=fe(U._payload),Ze(k,M,U,X)}if(Me(U))return Te(k,M,U,X);if(x(U)){if(fe=x(U),typeof fe!="function")throw Error(r(150));return U=fe.call(U),ge(k,M,U,X)}if(typeof U.then=="function")return Ze(k,M,Qu(U),X);if(U.$$typeof===K)return Ze(k,M,Vu(k,U),X);Ku(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,M!==null&&M.tag===6?(a(k,M.sibling),X=h(M,U),X.return=k,k=X):(a(k,M),X=Xh(U,k.mode,X),X.return=k,k=X),v(k)):a(k,M)}return function(k,M,U,X){try{Wo=0;var fe=Ze(k,M,U,X);return Ia=null,fe}catch(me){if(me===Ho||me===Pu)throw me;var Oe=dn(29,me,null,k.mode);return Oe.lanes=X,Oe.return=k,Oe}finally{}}}var Ca=Gg(!0),Qg=Gg(!1),On=z(null),ai=null;function gs(t){var i=t.alternate;ee(It,It.current&1),ee(On,t),ai===null&&(i===null||Aa.current!==null||i.memoizedState!==null)&&(ai=t)}function Kg(t){if(t.tag===22){if(ee(It,It.current),ee(On,t),ai===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(ai=t)}}else ys()}function ys(){ee(It,It.current),ee(On,On.current)}function xi(t){te(On),ai===t&&(ai=null),te(It)}var It=z(0);function Yu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||vd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Df(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Of={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=yn(),h=ds(o);h.payload=i,a!=null&&(h.callback=a),i=ms(t,h,o),i!==null&&(_n(i,t,o),Go(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=yn(),h=ds(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=ms(t,h,o),i!==null&&(_n(i,t,o),Go(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=yn(),o=ds(a);o.tag=2,i!=null&&(o.callback=i),i=ms(t,o,a),i!==null&&(_n(i,t,a),Go(i,t,a))}};function Yg(t,i,a,o,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,v):i.prototype&&i.prototype.isPureReactComponent?!Po(a,o)||!Po(h,d):!0}function Xg(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Of.enqueueReplaceState(i,i.state,null)}function xr(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Xu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function $g(t){Xu(t)}function Zg(t){console.error(t)}function Wg(t){Xu(t)}function $u(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Jg(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function xf(t,i,a){return a=ds(a),a.tag=3,a.payload={element:null},a.callback=function(){$u(t,i)},a}function ey(t){return t=ds(t),t.tag=3,t}function ty(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){Jg(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Jg(i,a,o),typeof h!="function"&&(As===null?As=new Set([this]):As.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function wb(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&zo(i,a,h,!0),a=On.current,a!==null){switch(a.tag){case 13:return ai===null?nd():a.alternate===null&&ut===0&&(ut=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===of?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),sd(t,o,h)),!1;case 22:return a.flags|=65536,o===of?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),sd(t,o,h)),!1}throw Error(r(435,a.tag))}return sd(t,o,h),nd(),!1}if(Be)return i=On.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Jh&&(t=Error(r(422),{cause:o}),jo(In(t,a)))):(o!==Jh&&(i=Error(r(423),{cause:o}),jo(In(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=In(o,a),h=xf(t.stateNode,o,h),cf(t,h),ut!==4&&(ut=2)),!1;var d=Error(r(520),{cause:o});if(d=In(d,a),al===null?al=[d]:al.push(d),ut!==4&&(ut=2),i===null)return!0;o=In(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=xf(a.stateNode,o,t),cf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(As===null||!As.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=ey(h),ty(h,t,a,o),cf(a,h),!1}a=a.return}while(a!==null);return!1}var ny=Error(r(461)),Ot=!1;function Lt(t,i,a,o){i.child=t===null?Qg(i,null,a,o):Ca(i,t.child,a,o)}function iy(t,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Nr(i),o=pf(t,i,a,v,d,h),E=gf(),t!==null&&!Ot?(yf(t,i,h),Vi(t,i,h)):(Be&&E&&Zh(i),i.flags|=1,Lt(t,i,o,h),i.child)}function sy(t,i,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!Yh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,ry(t,i,d,o,h)):(t=Nu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!zf(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Po,a(v,o)&&t.ref===i.ref)return Vi(t,i,h)}return i.flags|=1,t=Ri(d,o),t.ref=i.ref,t.return=i,i.child=t}function ry(t,i,a,o,h){if(t!==null){var d=t.memoizedProps;if(Po(d,o)&&t.ref===i.ref)if(Ot=!1,i.pendingProps=o=d,zf(t,h))(t.flags&131072)!==0&&(Ot=!0);else return i.lanes=t.lanes,Vi(t,i,h)}return Vf(t,i,a,o,h)}function ay(t,i,a){var o=i.pendingProps,h=o.children,d=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~o}else i.childLanes=0,i.child=null;return oy(t,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Mu(i,d!==null?d.cachePool:null),d!==null?rg(i,d):ff(),Kg(i);else return i.lanes=i.childLanes=536870912,oy(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Mu(i,d.cachePool),rg(i,d),ys(),i.memoizedState=null):(t!==null&&Mu(i,null),ff(),ys());return Lt(t,i,h,a),i.child}function oy(t,i,a,o){var h=af();return h=h===null?null:{parent:Rt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Mu(i,null),ff(),Kg(i),t!==null&&zo(t,i,o,!0),null}function Zu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Vf(t,i,a,o,h){return Nr(i),a=pf(t,i,a,o,void 0,h),o=gf(),t!==null&&!Ot?(yf(t,i,h),Vi(t,i,h)):(Be&&o&&Zh(i),i.flags|=1,Lt(t,i,a,h),i.child)}function ly(t,i,a,o,h,d){return Nr(i),i.updateQueue=null,a=og(i,o,a,h),ag(t),o=gf(),t!==null&&!Ot?(yf(t,i,d),Vi(t,i,d)):(Be&&o&&Zh(i),i.flags|=1,Lt(t,i,a,d),i.child)}function uy(t,i,a,o,h){if(Nr(i),i.stateNode===null){var d=_a,v=a.contextType;typeof v=="object"&&v!==null&&(d=Qt(v)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Of,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},lf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Qt(v):_a,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Df(i,a,v,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Of.enqueueReplaceState(d,d.state,null),Ko(i,o,d,h),Qo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var E=i.memoizedProps,N=xr(a,E);d.props=N;var j=d.context,Q=a.contextType;v=_a,typeof Q=="object"&&Q!==null&&(v=Qt(Q));var Z=a.getDerivedStateFromProps;Q=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||j!==v)&&Xg(i,d,o,v),fs=!1;var q=i.memoizedState;d.state=q,Ko(i,o,d,h),Qo(),j=i.memoizedState,E||q!==j||fs?(typeof Z=="function"&&(Df(i,a,Z,o),j=i.memoizedState),(N=fs||Yg(i,a,N,o,q,j,v))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=j),d.props=o,d.state=j,d.context=v,o=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,uf(t,i),v=i.memoizedProps,Q=xr(a,v),d.props=Q,Z=i.pendingProps,q=d.context,j=a.contextType,N=_a,typeof j=="object"&&j!==null&&(N=Qt(j)),E=a.getDerivedStateFromProps,(j=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==Z||q!==N)&&Xg(i,d,o,N),fs=!1,q=i.memoizedState,d.state=q,Ko(i,o,d,h),Qo();var B=i.memoizedState;v!==Z||q!==B||fs||t!==null&&t.dependencies!==null&&xu(t.dependencies)?(typeof E=="function"&&(Df(i,a,E,o),B=i.memoizedState),(Q=fs||Yg(i,a,Q,o,q,B,N)||t!==null&&t.dependencies!==null&&xu(t.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,B,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,B,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=B),d.props=o,d.state=B,d.context=N,o=Q):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,Zu(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=Ca(i,t.child,null,h),i.child=Ca(i,null,a,h)):Lt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Vi(t,i,h),t}function cy(t,i,a,o){return Lo(),i.flags|=256,Lt(t,i,a,o),i.child}var Mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pf(t){return{baseLanes:t,cachePool:Zp()}}function kf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=xn),t}function hy(t,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(It.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Be){if(h?gs(i):ys(),Be){var E=lt,N;if(N=E){e:{for(N=E,E=ri;N.nodeType!==8;){if(!E){E=null;break e}if(N=Qn(N.nextSibling),N===null){E=null;break e}}E=N}E!==null?(i.memoizedState={dehydrated:E,treeContext:Sr!==null?{id:Ii,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},N=dn(18,null,null,0),N.stateNode=E,N.return=i,i.child=N,nn=i,lt=null,N=!0):N=!1}N||Ir(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return vd(E)?i.lanes=32:i.lanes=536870912,null;xi(i)}return E=o.children,o=o.fallback,h?(ys(),h=i.mode,E=Wu({mode:"hidden",children:E},h),o=Ar(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=Pf(a),h.childLanes=kf(t,v,a),i.memoizedState=Mf,o):(gs(i),Uf(i,E))}if(N=t.memoizedState,N!==null&&(E=N.dehydrated,E!==null)){if(d)i.flags&256?(gs(i),i.flags&=-257,i=Lf(t,i,a)):i.memoizedState!==null?(ys(),i.child=t.child,i.flags|=128,i=null):(ys(),h=o.fallback,E=i.mode,o=Wu({mode:"visible",children:o.children},E),h=Ar(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ca(i,t.child,null,a),o=i.child,o.memoizedState=Pf(a),o.childLanes=kf(t,v,a),i.memoizedState=Mf,i=h);else if(gs(i),vd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var j=v.dgst;v=j,o=Error(r(419)),o.stack="",o.digest=v,jo({value:o,source:null,stack:null}),i=Lf(t,i,a)}else if(Ot||zo(t,i,a,!1),v=(a&t.childLanes)!==0,Ot||v){if(v=et,v!==null&&(o=a&-a,o=(o&42)!==0?1:_o(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==N.retryLane))throw N.retryLane=o,ya(t,o),_n(v,t,o),ny;E.data==="$?"||nd(),i=Lf(t,i,a)}else E.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,lt=Qn(E.nextSibling),nn=i,Be=!0,Rr=null,ri=!1,t!==null&&(Nn[Dn++]=Ii,Nn[Dn++]=Ci,Nn[Dn++]=Sr,Ii=t.id,Ci=t.overflow,Sr=i),i=Uf(i,o.children),i.flags|=4096);return i}return h?(ys(),h=o.fallback,E=i.mode,N=t.child,j=N.sibling,o=Ri(N,{mode:"hidden",children:o.children}),o.subtreeFlags=N.subtreeFlags&65011712,j!==null?h=Ri(j,h):(h=Ar(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=t.child.memoizedState,E===null?E=Pf(a):(N=E.cachePool,N!==null?(j=Rt._currentValue,N=N.parent!==j?{parent:j,pool:j}:N):N=Zp(),E={baseLanes:E.baseLanes|a,cachePool:N}),h.memoizedState=E,h.childLanes=kf(t,v,a),i.memoizedState=Mf,o):(gs(i),a=t.child,t=a.sibling,a=Ri(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function Uf(t,i){return i=Wu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Wu(t,i){return t=dn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Lf(t,i,a){return Ca(i,t.child,null,a),t=Uf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function fy(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),tf(t.return,i,a)}function jf(t,i,a,o,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=h)}function dy(t,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;if(Lt(t,i,o.children,a),o=It.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fy(t,a,i);else if(t.tag===19)fy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(ee(It,o),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Yu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),jf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Yu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}jf(i,!0,a,null,d);break;case"together":jf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Vi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),bs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(zo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Ri(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ri(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function zf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&xu(t)))}function Rb(t,i,a){switch(i.tag){case 3:Ke(i,i.stateNode.containerInfo),hs(i,Rt,t.memoizedState.cache),Lo();break;case 27:case 5:mo(i);break;case 4:Ke(i,i.stateNode.containerInfo);break;case 10:hs(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(gs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?hy(t,i,a):(gs(i),t=Vi(t,i,a),t!==null?t.sibling:null);gs(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(zo(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return dy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ee(It,It.current),o)break;return null;case 22:case 23:return i.lanes=0,ay(t,i,a);case 24:hs(i,Rt,t.memoizedState.cache)}return Vi(t,i,a)}function my(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Ot=!0;else{if(!zf(t,a)&&(i.flags&128)===0)return Ot=!1,Rb(t,i,a);Ot=(t.flags&131072)!==0}else Ot=!1,Be&&(i.flags&1048576)!==0&&Fp(i,Ou,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Yh(o)?(t=xr(o,t),i.tag=1,i=uy(null,i,o,t,a)):(i.tag=0,i=Vf(null,i,o,t,a));else{if(o!=null){if(h=o.$$typeof,h===Ae){i.tag=11,i=iy(null,i,o,t,a);break e}else if(h===V){i.tag=14,i=sy(null,i,o,t,a);break e}}throw i=Ne(o)||o,Error(r(306,i,""))}}return i;case 0:return Vf(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=xr(o,i.pendingProps),uy(t,i,o,h,a);case 3:e:{if(Ke(i,i.stateNode.containerInfo),t===null)throw Error(r(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,uf(t,i),Ko(i,o,null,a);var v=i.memoizedState;if(o=v.cache,hs(i,Rt,o),o!==d.cache&&nf(i,[Rt],a,!0),Qo(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=cy(t,i,o,a);break e}else if(o!==h){h=In(Error(r(424)),i),jo(h),i=cy(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(lt=Qn(t.firstChild),nn=i,Be=!0,Rr=null,ri=!0,a=Qg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Lo(),o===h){i=Vi(t,i,a);break e}Lt(t,i,o,a)}i=i.child}return i;case 26:return Zu(t,i),t===null?(a=__(i.type,null,i.pendingProps,null))?i.memoizedState=a:Be||(a=i.type,t=i.pendingProps,o=fc(Ee.current).createElement(a),o[ht]=i,o[Ut]=t,zt(o,a,t),ft(o),i.stateNode=o):i.memoizedState=__(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return mo(i),t===null&&Be&&(o=i.stateNode=p_(i.type,i.pendingProps,Ee.current),nn=i,ri=!0,h=lt,Rs(i.type)?(Ed=h,lt=Qn(o.firstChild)):lt=h),Lt(t,i,i.pendingProps.children,a),Zu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Be&&((h=o=lt)&&(o=eA(o,i.type,i.pendingProps,ri),o!==null?(i.stateNode=o,nn=i,lt=Qn(o.firstChild),ri=!1,h=!0):h=!1),h||Ir(i)),mo(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,o=d.children,gd(h,d)?o=null:v!==null&&gd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=pf(t,i,_b,null,null,a),pl._currentValue=h),Zu(t,i),Lt(t,i,o,a),i.child;case 6:return t===null&&Be&&((t=a=lt)&&(a=tA(a,i.pendingProps,ri),a!==null?(i.stateNode=a,nn=i,lt=null,t=!0):t=!1),t||Ir(i)),null;case 13:return hy(t,i,a);case 4:return Ke(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Ca(i,null,o,a):Lt(t,i,o,a),i.child;case 11:return iy(t,i,i.type,i.pendingProps,a);case 7:return Lt(t,i,i.pendingProps,a),i.child;case 8:return Lt(t,i,i.pendingProps.children,a),i.child;case 12:return Lt(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,hs(i,i.type,o.value),Lt(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Nr(i),h=Qt(h),o=o(h),i.flags|=1,Lt(t,i,o,a),i.child;case 14:return sy(t,i,i.type,i.pendingProps,a);case 15:return ry(t,i,i.type,i.pendingProps,a);case 19:return dy(t,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},t===null?(a=Wu(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ri(t.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return ay(t,i,a);case 24:return Nr(i),o=Qt(Rt),t===null?(h=af(),h===null&&(h=et,d=sf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},lf(i),hs(i,Rt,h)):((t.lanes&a)!==0&&(uf(t,i),Ko(i,null,null,a),Qo()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),hs(i,Rt,o)):(o=d.cache,hs(i,Rt,o),o!==h.cache&&nf(i,[Rt],a,!0))),Lt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Mi(t){t.flags|=4}function py(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!A_(i)){if(i=On.current,i!==null&&((je&4194048)===je?ai!==null:(je&62914560)!==je&&(je&536870912)===0||i!==ai))throw Fo=of,Wp;t.flags|=8192}}function Ju(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Wi():536870912,t.lanes|=i,xa|=i)}function el(t,i){if(!Be)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function at(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function Ib(t,i,a){var o=i.pendingProps;switch(Wh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(i),null;case 1:return at(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Di(Rt),kn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Uo(i)?Mi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Kp())),at(i),null;case 26:return a=i.memoizedState,t===null?(Mi(i),a!==null?(at(i),py(i,a)):(at(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Mi(i),at(i),py(i,a)):(at(i),i.flags&=-16777217):(t.memoizedProps!==o&&Mi(i),at(i),i.flags&=-16777217),null;case 27:Zr(i),a=Ee.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Mi(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return at(i),null}t=he.current,Uo(i)?Gp(i):(t=p_(h,o,a),i.stateNode=t,Mi(i))}return at(i),null;case 5:if(Zr(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Mi(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return at(i),null}if(t=he.current,Uo(i))Gp(i);else{switch(h=fc(Ee.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}t[ht]=i,t[Ut]=o;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(zt(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Mi(i)}}return at(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&Mi(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(t=Ee.current,Uo(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=nn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[ht]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||l_(t.nodeValue,a)),t||Ir(i)}else t=fc(t).createTextNode(o),t[ht]=i,i.stateNode=t}return at(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Uo(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[ht]=i}else Lo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;at(i),h=!1}else h=Kp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(xi(i),i):(xi(i),null)}if(xi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Ju(i,i.updateQueue),at(i),null;case 4:return kn(),t===null&&hd(i.stateNode.containerInfo),at(i),null;case 10:return Di(i.type),at(i),null;case 19:if(te(It),h=i.memoizedState,h===null)return at(i),null;if(o=(i.flags&128)!==0,d=h.rendering,d===null)if(o)el(h,!1);else{if(ut!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Yu(t),d!==null){for(i.flags|=128,el(h,!1),t=d.updateQueue,i.updateQueue=t,Ju(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Hp(a,t),a=a.sibling;return ee(It,It.current&1|2),i.child}t=t.sibling}h.tail!==null&&sn()>nc&&(i.flags|=128,o=!0,el(h,!1),i.lanes=4194304)}else{if(!o)if(t=Yu(d),t!==null){if(i.flags|=128,o=!0,t=t.updateQueue,i.updateQueue=t,Ju(i,t),el(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Be)return at(i),null}else 2*sn()-h.renderingStartTime>nc&&a!==536870912&&(i.flags|=128,o=!0,el(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=sn(),i.sibling=null,t=It.current,ee(It,o?t&1|2:t&1),i):(at(i),null);case 22:case 23:return xi(i),df(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(at(i),i.subtreeFlags&6&&(i.flags|=8192)):at(i),a=i.updateQueue,a!==null&&Ju(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&te(Dr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Di(Rt),at(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Cb(t,i){switch(Wh(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Di(Rt),kn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Zr(i),null;case 13:if(xi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Lo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return te(It),null;case 4:return kn(),null;case 10:return Di(i.type),null;case 22:case 23:return xi(i),df(),t!==null&&te(Dr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Di(Rt),null;case 25:return null;default:return null}}function gy(t,i){switch(Wh(i),i.tag){case 3:Di(Rt),kn();break;case 26:case 27:case 5:Zr(i);break;case 4:kn();break;case 13:xi(i);break;case 19:te(It);break;case 10:Di(i.type);break;case 22:case 23:xi(i),df(),t!==null&&te(Dr);break;case 24:Di(Rt)}}function tl(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){We(i,i.return,E)}}function _s(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var N=a,j=E;try{j()}catch(Q){We(h,N,Q)}}}o=o.next}while(o!==d)}}catch(Q){We(i,i.return,Q)}}function yy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{sg(i,a)}catch(o){We(t,t.return,o)}}}function _y(t,i,a){a.props=xr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){We(t,i,o)}}function nl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){We(t,i,h)}}function oi(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){We(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){We(t,i,h)}else a.current=null}function vy(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){We(t,t.return,h)}}function qf(t,i,a){try{var o=t.stateNode;Xb(o,t.type,a,i),o[Ut]=i}catch(h){We(t,t.return,h)}}function Ey(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Rs(t.type)||t.tag===4}function Bf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ey(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Rs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hf(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=hc));else if(o!==4&&(o===27&&Rs(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Hf(t,i,a),t=t.sibling;t!==null;)Hf(t,i,a),t=t.sibling}function ec(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&Rs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ec(t,i,a),t=t.sibling;t!==null;)ec(t,i,a),t=t.sibling}function Ty(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);zt(i,o,a),i[ht]=t,i[Ut]=a}catch(d){We(t,t.return,d)}}var Pi=!1,pt=!1,Ff=!1,by=typeof WeakSet=="function"?WeakSet:Set,xt=null;function Nb(t,i){if(t=t.containerInfo,md=_c,t=Vp(t),qh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,E=-1,N=-1,j=0,Q=0,Z=t,q=null;t:for(;;){for(var B;Z!==a||h!==0&&Z.nodeType!==3||(E=v+h),Z!==d||o!==0&&Z.nodeType!==3||(N=v+o),Z.nodeType===3&&(v+=Z.nodeValue.length),(B=Z.firstChild)!==null;)q=Z,Z=B;for(;;){if(Z===t)break t;if(q===a&&++j===h&&(E=v),q===d&&++Q===o&&(N=v),(B=Z.nextSibling)!==null)break;Z=q,q=Z.parentNode}Z=B}a=E===-1||N===-1?null:{start:E,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(pd={focusedElem:t,selectionRange:a},_c=!1,xt=i;xt!==null;)if(i=xt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,xt=t;else for(;xt!==null;){switch(i=xt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var Te=xr(a.type,h,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(Te,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(ge){We(a,a.return,ge)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)_d(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":_d(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,xt=t;break}xt=i.return}}function Ay(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:vs(t,a),o&4&&tl(5,a);break;case 1:if(vs(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){We(a,a.return,v)}else{var h=xr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){We(a,a.return,v)}}o&64&&yy(a),o&512&&nl(a,a.return);break;case 3:if(vs(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{sg(t,i)}catch(v){We(a,a.return,v)}}break;case 27:i===null&&o&4&&Ty(a);case 26:case 5:vs(t,a),i===null&&o&4&&vy(a),o&512&&nl(a,a.return);break;case 12:vs(t,a);break;case 13:vs(t,a),o&4&&Ry(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Lb.bind(null,a),nA(t,a))));break;case 22:if(o=a.memoizedState!==null||Pi,!o){i=i!==null&&i.memoizedState!==null||pt,h=Pi;var d=pt;Pi=o,(pt=i)&&!d?Es(t,a,(a.subtreeFlags&8772)!==0):vs(t,a),Pi=h,pt=d}break;case 30:break;default:vs(t,a)}}function Sy(t){var i=t.alternate;i!==null&&(t.alternate=null,Sy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&na(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var st=null,an=!1;function ki(t,i,a){for(a=a.child;a!==null;)wy(t,i,a),a=a.sibling}function wy(t,i,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Xi,a)}catch{}switch(a.tag){case 26:pt||oi(a,i),ki(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:pt||oi(a,i);var o=st,h=an;Rs(a.type)&&(st=a.stateNode,an=!1),ki(t,i,a),hl(a.stateNode),st=o,an=h;break;case 5:pt||oi(a,i);case 6:if(o=st,h=an,st=null,ki(t,i,a),st=o,an=h,st!==null)if(an)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(a.stateNode)}catch(d){We(a,i,d)}else try{st.removeChild(a.stateNode)}catch(d){We(a,i,d)}break;case 18:st!==null&&(an?(t=st,d_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),vl(t)):d_(st,a.stateNode));break;case 4:o=st,h=an,st=a.stateNode.containerInfo,an=!0,ki(t,i,a),st=o,an=h;break;case 0:case 11:case 14:case 15:pt||_s(2,a,i),pt||_s(4,a,i),ki(t,i,a);break;case 1:pt||(oi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&_y(a,i,o)),ki(t,i,a);break;case 21:ki(t,i,a);break;case 22:pt=(o=pt)||a.memoizedState!==null,ki(t,i,a),pt=o;break;default:ki(t,i,a)}}function Ry(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{vl(t)}catch(a){We(i,i.return,a)}}function Db(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new by),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new by),i;default:throw Error(r(435,t.tag))}}function Gf(t,i){var a=Db(t);i.forEach(function(o){var h=jb.bind(null,t,o);a.has(o)||(a.add(o),o.then(h,h))})}function mn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,v=i,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(Rs(E.type)){st=E.stateNode,an=!1;break e}break;case 5:st=E.stateNode,an=!1;break e;case 3:case 4:st=E.stateNode.containerInfo,an=!0;break e}E=E.return}if(st===null)throw Error(r(160));wy(d,v,h),st=null,an=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Iy(i,t),i=i.sibling}var Gn=null;function Iy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:mn(i,t),pn(t),o&4&&(_s(3,t,t.return),tl(3,t),_s(5,t,t.return));break;case 1:mn(i,t),pn(t),o&512&&(pt||a===null||oi(a,a.return)),o&64&&Pi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Gn;if(mn(i,t),pn(t),o&512&&(pt||a===null||oi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ts]||d[ht]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),zt(d,o,a),d[ht]=t,ft(d),o=d;break e;case"link":var v=T_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break t}}d=h.createElement(o),zt(d,o,a),h.head.appendChild(d);break;case"meta":if(v=T_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break t}}d=h.createElement(o),zt(d,o,a),h.head.appendChild(d);break;default:throw Error(r(468,o))}d[ht]=t,ft(d),o=d}t.stateNode=o}else b_(h,t.type,t.stateNode);else t.stateNode=E_(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?b_(h,t.type,t.stateNode):E_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&qf(t,t.memoizedProps,a.memoizedProps)}break;case 27:mn(i,t),pn(t),o&512&&(pt||a===null||oi(a,a.return)),a!==null&&o&4&&qf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(mn(i,t),pn(t),o&512&&(pt||a===null||oi(a,a.return)),t.flags&32){h=t.stateNode;try{wn(h,"")}catch(B){We(t,t.return,B)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,qf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(Ff=!0);break;case 6:if(mn(i,t),pn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(B){We(t,t.return,B)}}break;case 3:if(pc=null,h=Gn,Gn=dc(i.containerInfo),mn(i,t),Gn=h,pn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{vl(i.containerInfo)}catch(B){We(t,t.return,B)}Ff&&(Ff=!1,Cy(t));break;case 4:o=Gn,Gn=dc(t.stateNode.containerInfo),mn(i,t),pn(t),Gn=o;break;case 12:mn(i,t),pn(t);break;case 13:mn(i,t),pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Zf=sn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Gf(t,o)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,j=Pi,Q=pt;if(Pi=j||h,pt=Q||N,mn(i,t),pt=Q,Pi=j,pn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||N||Pi||pt||Vr(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=N.stateNode;var Z=N.memoizedProps.style,q=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(B){We(N,N.return,B)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(B){We(N,N.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Gf(t,a))));break;case 19:mn(i,t),pn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Gf(t,o)));break;case 30:break;case 21:break;default:mn(i,t),pn(t)}}function pn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Ey(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=Bf(t);ec(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(wn(v,""),a.flags&=-33);var E=Bf(t);ec(t,E,v);break;case 3:case 4:var N=a.stateNode.containerInfo,j=Bf(t);Hf(t,j,N);break;default:throw Error(r(161))}}catch(Q){We(t,t.return,Q)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Cy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Cy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function vs(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ay(t,i.alternate,i),i=i.sibling}function Vr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:_s(4,i,i.return),Vr(i);break;case 1:oi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&_y(i,i.return,a),Vr(i);break;case 27:hl(i.stateNode);case 26:case 5:oi(i,i.return),Vr(i);break;case 22:i.memoizedState===null&&Vr(i);break;case 30:Vr(i);break;default:Vr(i)}t=t.sibling}}function Es(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Es(h,d,a),tl(4,d);break;case 1:if(Es(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){We(o,o.return,j)}if(o=d,h=o.updateQueue,h!==null){var E=o.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)ig(N[h],E)}catch(j){We(o,o.return,j)}}a&&v&64&&yy(d),nl(d,d.return);break;case 27:Ty(d);case 26:case 5:Es(h,d,a),a&&o===null&&v&4&&vy(d),nl(d,d.return);break;case 12:Es(h,d,a);break;case 13:Es(h,d,a),a&&v&4&&Ry(h,d);break;case 22:d.memoizedState===null&&Es(h,d,a),nl(d,d.return);break;case 30:break;default:Es(h,d,a)}i=i.sibling}}function Qf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&qo(a))}function Kf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&qo(t))}function li(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ny(t,i,a,o),i=i.sibling}function Ny(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:li(t,i,a,o),h&2048&&tl(9,i);break;case 1:li(t,i,a,o);break;case 3:li(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&qo(t)));break;case 12:if(h&2048){li(t,i,a,o),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){We(i,i.return,N)}}else li(t,i,a,o);break;case 13:li(t,i,a,o);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?li(t,i,a,o):il(t,i):d._visibility&2?li(t,i,a,o):(d._visibility|=2,Na(t,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Qf(v,i);break;case 24:li(t,i,a,o),h&2048&&Kf(i.alternate,i);break;default:li(t,i,a,o)}}function Na(t,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,v=i,E=a,N=o,j=v.flags;switch(v.tag){case 0:case 11:case 15:Na(d,v,E,N,h),tl(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?Na(d,v,E,N,h):il(d,v):(Q._visibility|=2,Na(d,v,E,N,h)),h&&j&2048&&Qf(v.alternate,v);break;case 24:Na(d,v,E,N,h),h&&j&2048&&Kf(v.alternate,v);break;default:Na(d,v,E,N,h)}i=i.sibling}}function il(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:il(a,o),h&2048&&Qf(o.alternate,o);break;case 24:il(a,o),h&2048&&Kf(o.alternate,o);break;default:il(a,o)}i=i.sibling}}var sl=8192;function Da(t){if(t.subtreeFlags&sl)for(t=t.child;t!==null;)Dy(t),t=t.sibling}function Dy(t){switch(t.tag){case 26:Da(t),t.flags&sl&&t.memoizedState!==null&&pA(Gn,t.memoizedState,t.memoizedProps);break;case 5:Da(t);break;case 3:case 4:var i=Gn;Gn=dc(t.stateNode.containerInfo),Da(t),Gn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=sl,sl=16777216,Da(t),sl=i):Da(t));break;default:Da(t)}}function Oy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function rl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];xt=o,Vy(o,t)}Oy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xy(t),t=t.sibling}function xy(t){switch(t.tag){case 0:case 11:case 15:rl(t),t.flags&2048&&_s(9,t,t.return);break;case 3:rl(t);break;case 12:rl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,tc(t)):rl(t);break;default:rl(t)}}function tc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];xt=o,Vy(o,t)}Oy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:_s(8,i,i.return),tc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,tc(i));break;default:tc(i)}t=t.sibling}}function Vy(t,i){for(;xt!==null;){var a=xt;switch(a.tag){case 0:case 11:case 15:_s(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:qo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,xt=o;else e:for(a=t;xt!==null;){o=xt;var h=o.sibling,d=o.return;if(Sy(o),o===a){xt=null;break e}if(h!==null){h.return=d,xt=h;break e}xt=d}}}var Ob={getCacheForType:function(t){var i=Qt(Rt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},xb=typeof WeakMap=="function"?WeakMap:Map,Ge=0,et=null,xe=null,je=0,Qe=0,gn=null,Ts=!1,Oa=!1,Yf=!1,Ui=0,ut=0,bs=0,Mr=0,Xf=0,xn=0,xa=0,al=null,on=null,$f=!1,Zf=0,nc=1/0,ic=null,As=null,jt=0,Ss=null,Va=null,Ma=0,Wf=0,Jf=null,My=null,ol=0,ed=null;function yn(){if((Ge&2)!==0&&je!==0)return je&-je;if(F.T!==null){var t=Ta;return t!==0?t:od()}return vi()}function Py(){xn===0&&(xn=(je&536870912)===0||Be?yo():536870912);var t=On.current;return t!==null&&(t.flags|=32),xn}function _n(t,i,a){(t===et&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)&&(Pa(t,0),ws(t,je,xn,!1)),ct(t,a),((Ge&2)===0||t!==et)&&(t===et&&((Ge&2)===0&&(Mr|=a),ut===4&&ws(t,je,xn,!1)),ui(t))}function ky(t,i,a){if((Ge&6)!==0)throw Error(r(327));var o=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Zi(t,i),h=o?Pb(t,i):id(t,i,!0),d=o;do{if(h===0){Oa&&!o&&ws(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!Vb(a)){h=id(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var E=t;h=al;var N=E.current.memoizedState.isDehydrated;if(N&&(Pa(E,v).flags|=256),v=id(E,v,!1),v!==2){if(Yf&&!N){E.errorRecoveryDisabledLanes|=d,Mr|=d,h=4;break e}d=on,on=h,d!==null&&(on===null?on=d:on.push.apply(on,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Pa(t,0),ws(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:ws(o,i,xn,!Ts);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=Zf+300-sn(),10<h)){if(ws(o,i,xn,!Ts),An(o,0,!0)!==0)break e;o.timeoutHandle=h_(Uy.bind(null,o,a,on,ic,$f,i,xn,Mr,xa,Ts,d,2,-0,0),h);break e}Uy(o,a,on,ic,$f,i,xn,Mr,xa,Ts,d,0,-0,0)}}break}while(!0);ui(t)}function Uy(t,i,a,o,h,d,v,E,N,j,Q,Z,q,B){if(t.timeoutHandle=-1,Z=i.subtreeFlags,(Z&8192||(Z&16785408)===16785408)&&(ml={stylesheets:null,count:0,unsuspend:mA},Dy(i),Z=gA(),Z!==null)){t.cancelPendingCommit=Z(Fy.bind(null,t,i,d,a,o,h,v,E,N,Q,1,q,B)),ws(t,d,v,!j);return}Fy(t,i,d,a,o,h,v,E,N)}function Vb(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!fn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ws(t,i,a,o){i&=~Xf,i&=~Mr,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-Wt(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&Ji(t,a,i)}function sc(){return(Ge&6)===0?(ll(0),!1):!0}function td(){if(xe!==null){if(Qe===0)var t=xe.return;else t=xe,Ni=Cr=null,_f(t),Ia=null,Wo=0,t=xe;for(;t!==null;)gy(t.alternate,t),t=t.return;xe=null}}function Pa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Zb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),td(),et=t,xe=a=Ri(t.current,null),je=i,Qe=0,gn=null,Ts=!1,Oa=Zi(t,i),Yf=!1,xa=xn=Xf=Mr=bs=ut=0,on=al=null,$f=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-Wt(o),d=1<<h;i|=t[h],o&=~d}return Ui=i,Ru(),a}function Ly(t,i){De=null,F.H=Gu,i===Ho||i===Pu?(i=tg(),Qe=3):i===Wp?(i=tg(),Qe=4):Qe=i===ny?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,gn=i,xe===null&&(ut=1,$u(t,In(i,t.current)))}function jy(){var t=F.H;return F.H=Gu,t===null?Gu:t}function zy(){var t=F.A;return F.A=Ob,t}function nd(){ut=4,Ts||(je&4194048)!==je&&On.current!==null||(Oa=!0),(bs&134217727)===0&&(Mr&134217727)===0||et===null||ws(et,je,xn,!1)}function id(t,i,a){var o=Ge;Ge|=2;var h=jy(),d=zy();(et!==t||je!==i)&&(ic=null,Pa(t,i)),i=!1;var v=ut;e:do try{if(Qe!==0&&xe!==null){var E=xe,N=gn;switch(Qe){case 8:td(),v=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(i=!0);var j=Qe;if(Qe=0,gn=null,ka(t,E,N,j),a&&Oa){v=0;break e}break;default:j=Qe,Qe=0,gn=null,ka(t,E,N,j)}}Mb(),v=ut;break}catch(Q){Ly(t,Q)}while(!0);return i&&t.shellSuspendCounter++,Ni=Cr=null,Ge=o,F.H=h,F.A=d,xe===null&&(et=null,je=0,Ru()),v}function Mb(){for(;xe!==null;)qy(xe)}function Pb(t,i){var a=Ge;Ge|=2;var o=jy(),h=zy();et!==t||je!==i?(ic=null,nc=sn()+500,Pa(t,i)):Oa=Zi(t,i);e:do try{if(Qe!==0&&xe!==null){i=xe;var d=gn;t:switch(Qe){case 1:Qe=0,gn=null,ka(t,i,d,1);break;case 2:case 9:if(Jp(d)){Qe=0,gn=null,By(i);break}i=function(){Qe!==2&&Qe!==9||et!==t||(Qe=7),ui(t)},d.then(i,i);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:Jp(d)?(Qe=0,gn=null,By(i)):(Qe=0,gn=null,ka(t,i,d,7));break;case 5:var v=null;switch(xe.tag){case 26:v=xe.memoizedState;case 5:case 27:var E=xe;if(!v||A_(v)){Qe=0,gn=null;var N=E.sibling;if(N!==null)xe=N;else{var j=E.return;j!==null?(xe=j,rc(j)):xe=null}break t}}Qe=0,gn=null,ka(t,i,d,5);break;case 6:Qe=0,gn=null,ka(t,i,d,6);break;case 8:td(),ut=6;break e;default:throw Error(r(462))}}kb();break}catch(Q){Ly(t,Q)}while(!0);return Ni=Cr=null,F.H=o,F.A=h,Ge=a,xe!==null?0:(et=null,je=0,Ru(),ut)}function kb(){for(;xe!==null&&!Dh();)qy(xe)}function qy(t){var i=my(t.alternate,t,Ui);t.memoizedProps=t.pendingProps,i===null?rc(t):xe=i}function By(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=ly(a,i,i.pendingProps,i.type,void 0,je);break;case 11:i=ly(a,i,i.pendingProps,i.type.render,i.ref,je);break;case 5:_f(i);default:gy(a,i),i=xe=Hp(i,Ui),i=my(a,i,Ui)}t.memoizedProps=t.pendingProps,i===null?rc(t):xe=i}function ka(t,i,a,o){Ni=Cr=null,_f(i),Ia=null,Wo=0;var h=i.return;try{if(wb(t,h,i,a,je)){ut=1,$u(t,In(a,t.current)),xe=null;return}}catch(d){if(h!==null)throw xe=h,d;ut=1,$u(t,In(a,t.current)),xe=null;return}i.flags&32768?(Be||o===1?t=!0:Oa||(je&536870912)!==0?t=!1:(Ts=t=!0,(o===2||o===9||o===3||o===6)&&(o=On.current,o!==null&&o.tag===13&&(o.flags|=16384))),Hy(i,t)):rc(i)}function rc(t){var i=t;do{if((i.flags&32768)!==0){Hy(i,Ts);return}t=i.return;var a=Ib(i.alternate,i,Ui);if(a!==null){xe=a;return}if(i=i.sibling,i!==null){xe=i;return}xe=i=t}while(i!==null);ut===0&&(ut=5)}function Hy(t,i){do{var a=Cb(t.alternate,t);if(a!==null){a.flags&=32767,xe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){xe=t;return}xe=t=a}while(t!==null);ut=6,xe=null}function Fy(t,i,a,o,h,d,v,E,N){t.cancelPendingCommit=null;do ac();while(jt!==0);if((Ge&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Qh,uu(t,a,d,v,E,N),t===et&&(xe=et=null,je=0),Va=i,Ss=t,Ma=a,Wf=d,Jf=h,My=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,zb(_i,function(){return Xy(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=F.T,F.T=null,h=ne.p,ne.p=2,v=Ge,Ge|=4;try{Nb(t,i,a)}finally{Ge=v,ne.p=h,F.T=o}}jt=1,Gy(),Qy(),Ky()}}function Gy(){if(jt===1){jt=0;var t=Ss,i=Va,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var o=ne.p;ne.p=2;var h=Ge;Ge|=4;try{Iy(i,t);var d=pd,v=Vp(t.containerInfo),E=d.focusedElem,N=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&xp(E.ownerDocument.documentElement,E)){if(N!==null&&qh(E)){var j=N.start,Q=N.end;if(Q===void 0&&(Q=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(Q,E.value.length);else{var Z=E.ownerDocument||document,q=Z&&Z.defaultView||window;if(q.getSelection){var B=q.getSelection(),Te=E.textContent.length,ge=Math.min(N.start,Te),Ze=N.end===void 0?ge:Math.min(N.end,Te);!B.extend&&ge>Ze&&(v=Ze,Ze=ge,ge=v);var k=Op(E,ge),M=Op(E,Ze);if(k&&M&&(B.rangeCount!==1||B.anchorNode!==k.node||B.anchorOffset!==k.offset||B.focusNode!==M.node||B.focusOffset!==M.offset)){var U=Z.createRange();U.setStart(k.node,k.offset),B.removeAllRanges(),ge>Ze?(B.addRange(U),B.extend(M.node,M.offset)):(U.setEnd(M.node,M.offset),B.addRange(U))}}}}for(Z=[],B=E;B=B.parentNode;)B.nodeType===1&&Z.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Z.length;E++){var X=Z[E];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}_c=!!md,pd=md=null}finally{Ge=h,ne.p=o,F.T=a}}t.current=i,jt=2}}function Qy(){if(jt===2){jt=0;var t=Ss,i=Va,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var o=ne.p;ne.p=2;var h=Ge;Ge|=4;try{Ay(t,i.alternate,i)}finally{Ge=h,ne.p=o,F.T=a}}jt=3}}function Ky(){if(jt===4||jt===3){jt=0,po();var t=Ss,i=Va,a=Ma,o=My;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?jt=5:(jt=0,Va=Ss=null,Yy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(As=null),vo(a),i=i.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Xi,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=F.T,h=ne.p,ne.p=2,F.T=null;try{for(var d=t.onRecoverableError,v=0;v<o.length;v++){var E=o[v];d(E.value,{componentStack:E.stack})}}finally{F.T=i,ne.p=h}}(Ma&3)!==0&&ac(),ui(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===ed?ol++:(ol=0,ed=t):ol=0,ll(0)}}function Yy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,qo(i)))}function ac(t){return Gy(),Qy(),Ky(),Xy()}function Xy(){if(jt!==5)return!1;var t=Ss,i=Wf;Wf=0;var a=vo(Ma),o=F.T,h=ne.p;try{ne.p=32>a?32:a,F.T=null,a=Jf,Jf=null;var d=Ss,v=Ma;if(jt=0,Va=Ss=null,Ma=0,(Ge&6)!==0)throw Error(r(331));var E=Ge;if(Ge|=4,xy(d.current),Ny(d,d.current,v,a),Ge=E,ll(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Xi,d)}catch{}return!0}finally{ne.p=h,F.T=o,Yy(t,i)}}function $y(t,i,a){i=In(a,i),i=xf(t.stateNode,i,2),t=ms(t,i,2),t!==null&&(ct(t,2),ui(t))}function We(t,i,a){if(t.tag===3)$y(t,t,a);else for(;i!==null;){if(i.tag===3){$y(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(As===null||!As.has(o))){t=In(a,t),a=ey(2),o=ms(i,a,2),o!==null&&(ty(a,o,i,t),ct(o,2),ui(o));break}}i=i.return}}function sd(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new xb;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Yf=!0,h.add(a),t=Ub.bind(null,t,i,a),i.then(t,t))}function Ub(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,et===t&&(je&a)===a&&(ut===4||ut===3&&(je&62914560)===je&&300>sn()-Zf?(Ge&2)===0&&Pa(t,0):Xf|=a,xa===je&&(xa=0)),ui(t)}function Zy(t,i){i===0&&(i=Wi()),t=ya(t,i),t!==null&&(ct(t,i),ui(t))}function Lb(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Zy(t,a)}function jb(t,i){var a=0;switch(t.tag){case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),Zy(t,a)}function zb(t,i){return Js(t,i)}var oc=null,Ua=null,rd=!1,lc=!1,ad=!1,Pr=0;function ui(t){t!==Ua&&t.next===null&&(Ua===null?oc=Ua=t:Ua=Ua.next=t),lc=!0,rd||(rd=!0,Bb())}function ll(t,i){if(!ad&&lc){ad=!0;do for(var a=!1,o=oc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,E=o.pingedLanes;d=(1<<31-Wt(42|t)+1)-1,d&=h&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,t_(o,d))}else d=je,d=An(o,o===et?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Zi(o,d)||(a=!0,t_(o,d));o=o.next}while(a);ad=!1}}function qb(){Wy()}function Wy(){lc=rd=!1;var t=0;Pr!==0&&($b()&&(t=Pr),Pr=0);for(var i=sn(),a=null,o=oc;o!==null;){var h=o.next,d=Jy(o,i);d===0?(o.next=null,a===null?oc=h:a.next=h,h===null&&(Ua=a)):(a=o,(t!==0||(d&3)!==0)&&(lc=!0)),o=h}ll(t)}function Jy(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Wt(d),E=1<<v,N=h[v];N===-1?((E&a)===0||(E&o)!==0)&&(h[v]=ea(E,i)):N<=i&&(t.expiredLanes|=E),d&=~E}if(i=et,a=je,a=An(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Jr(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Zi(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&Jr(o),vo(a)){case 2:case 8:a=Nt;break;case 32:a=_i;break;case 268435456:a=go;break;default:a=_i}return o=e_.bind(null,t),a=Js(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&Jr(o),t.callbackPriority=2,t.callbackNode=null,2}function e_(t,i){if(jt!==0&&jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ac()&&t.callbackNode!==a)return null;var o=je;return o=An(t,t===et?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(ky(t,o,i),Jy(t,sn()),t.callbackNode!=null&&t.callbackNode===a?e_.bind(null,t):null)}function t_(t,i){if(ac())return null;ky(t,i,!0)}function Bb(){Wb(function(){(Ge&6)!==0?Js(St,qb):Wy()})}function od(){return Pr===0&&(Pr=yo()),Pr}function n_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:zn(""+t)}function i_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function Hb(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=n_((h[Ut]||null).action),v=o.submitter;v&&(i=(i=v[Ut]||null)?n_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new mr("action","action",null,o,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Pr!==0){var N=v?i_(h,v):new FormData(h);If(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(E.preventDefault(),N=v?i_(h,v):new FormData(h),If(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var ld=0;ld<Gh.length;ld++){var ud=Gh[ld],Fb=ud.toLowerCase(),Gb=ud[0].toUpperCase()+ud.slice(1);Fn(Fb,"on"+Gb)}Fn(kp,"onAnimationEnd"),Fn(Up,"onAnimationIteration"),Fn(Lp,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(lb,"onTransitionRun"),Fn(ub,"onTransitionStart"),Fn(cb,"onTransitionCancel"),Fn(jp,"onTransitionEnd"),ti("onMouseEnter",["mouseout","mouseover"]),ti("onMouseLeave",["mouseout","mouseover"]),ti("onPointerEnter",["pointerout","pointerover"]),ti("onPointerLeave",["pointerout","pointerover"]),ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ul));function s_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],N=E.instance,j=E.currentTarget;if(E=E.listener,N!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=j;try{d(h)}catch(Q){Xu(Q)}h.currentTarget=null,d=N}else for(v=0;v<o.length;v++){if(E=o[v],N=E.instance,j=E.currentTarget,E=E.listener,N!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=j;try{d(h)}catch(Q){Xu(Q)}h.currentTarget=null,d=N}}}}function Ve(t,i){var a=i[tr];a===void 0&&(a=i[tr]=new Set);var o=t+"__bubble";a.has(o)||(r_(i,t,2,!1),a.add(o))}function cd(t,i,a){var o=0;i&&(o|=4),r_(a,t,o,i)}var uc="_reactListening"+Math.random().toString(36).slice(2);function hd(t){if(!t[uc]){t[uc]=!0,cu.forEach(function(a){a!=="selectionchange"&&(Qb.has(a)||cd(a,!1,t),cd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[uc]||(i[uc]=!0,cd("selectionchange",!1,i))}}function r_(t,i,a,o){switch(N_(i)){case 2:var h=vA;break;case 8:h=EA;break;default:h=wd}a=h.bind(null,i,a,t),h=void 0,!Si||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function fd(t,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Wn(E),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){o=d=v;continue e}E=E.parentNode}}o=o.return}hr(function(){var j=d,Q=Ro(a),Z=[];e:{var q=zp.get(t);if(q!==void 0){var B=mr,Te=t;switch(t){case"keypress":if(fr(a)===0)break e;case"keydown":case"keyup":B=da;break;case"focusin":Te="focus",B=ca;break;case"focusout":Te="blur",B=ca;break;case"beforeblur":case"afterblur":B=ca;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=vr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=cs;break;case kp:case Up:case Lp:B=Co;break;case jp:B=m;break;case"scroll":case"scrollend":B=gr;break;case"wheel":B=b;break;case"copy":case"cut":case"paste":B=vu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Oo;break;case"toggle":case"beforetoggle":B=H}var ge=(i&4)!==0,Ze=!ge&&(t==="scroll"||t==="scrollend"),k=ge?q!==null?q+"Capture":null:q;ge=[];for(var M=j,U;M!==null;){var X=M;if(U=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||U===null||k===null||(X=ls(M,k),X!=null&&ge.push(cl(M,X,U))),Ze)break;M=M.return}0<ge.length&&(q=new B(q,Te,null,a,Q),Z.push({event:q,listeners:ge}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",B=t==="mouseout"||t==="pointerout",q&&a!==wo&&(Te=a.relatedTarget||a.fromElement)&&(Wn(Te)||Te[Ei]))break e;if((B||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,B?(Te=a.relatedTarget||a.toElement,B=j,Te=Te?Wn(Te):null,Te!==null&&(Ze=c(Te),ge=Te.tag,Te!==Ze||ge!==5&&ge!==27&&ge!==6)&&(Te=null)):(B=null,Te=j),B!==Te)){if(ge=vr,X="onMouseLeave",k="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(ge=Oo,X="onPointerLeave",k="onPointerEnter",M="pointer"),Ze=B==null?q:ns(B),U=Te==null?q:ns(Te),q=new ge(X,M+"leave",B,a,Q),q.target=Ze,q.relatedTarget=U,X=null,Wn(Q)===j&&(ge=new ge(k,M+"enter",Te,a,Q),ge.target=U,ge.relatedTarget=Ze,X=ge),Ze=X,B&&Te)t:{for(ge=B,k=Te,M=0,U=ge;U;U=La(U))M++;for(U=0,X=k;X;X=La(X))U++;for(;0<M-U;)ge=La(ge),M--;for(;0<U-M;)k=La(k),U--;for(;M--;){if(ge===k||k!==null&&ge===k.alternate)break t;ge=La(ge),k=La(k)}ge=null}else ge=null;B!==null&&a_(Z,q,B,ge,!1),Te!==null&&Ze!==null&&a_(Z,Ze,Te,ge,!0)}}e:{if(q=j?ns(j):window,B=q.nodeName&&q.nodeName.toLowerCase(),B==="select"||B==="input"&&q.type==="file")var fe=wp;else if(Ap(q))if(Rp)fe=rb;else{fe=ib;var Oe=nb}else B=q.nodeName,!B||B.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?j&&oa(j.elementType)&&(fe=wp):fe=sb;if(fe&&(fe=fe(t,j))){Sp(Z,fe,a,Q);break e}Oe&&Oe(t,q,j),t==="focusout"&&j&&q.type==="number"&&j.memoizedProps.value!=null&&bo(q,"number",q.value)}switch(Oe=j?ns(j):window,t){case"focusin":(Ap(Oe)||Oe.contentEditable==="true")&&(ma=Oe,Bh=j,ko=null);break;case"focusout":ko=Bh=ma=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,Mp(Z,a,Q);break;case"selectionchange":if(ob)break;case"keydown":case"keyup":Mp(Z,a,Q)}var me;if(we)e:{switch(t){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Hn?qn(t,a)&&(ye="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ye="onCompositionStart");ye&&(dt&&a.locale!=="ko"&&(Hn||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Hn&&(me=gu()):(Rn=Q,Je="value"in Rn?Rn.value:Rn.textContent,Hn=!0)),Oe=cc(j,ye),0<Oe.length&&(ye=new Do(ye,t,null,a,Q),Z.push({event:ye,listeners:Oe}),me?ye.data=me:(me=Bn(a),me!==null&&(ye.data=me)))),(me=Fe?xo(t,a):J0(t,a))&&(ye=cc(j,"onBeforeInput"),0<ye.length&&(Oe=new Do("onBeforeInput","beforeinput",null,a,Q),Z.push({event:Oe,listeners:ye}),Oe.data=me)),Hb(Z,t,j,a,Q)}s_(Z,i)})}function cl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function cc(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ls(t,a),h!=null&&o.unshift(cl(t,h,d)),h=ls(t,i),h!=null&&o.push(cl(t,h,d))),t.tag===3)return o;t=t.return}return[]}function La(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function a_(t,i,a,o,h){for(var d=i._reactName,v=[];a!==null&&a!==o;){var E=a,N=E.alternate,j=E.stateNode;if(E=E.tag,N!==null&&N===o)break;E!==5&&E!==26&&E!==27||j===null||(N=j,h?(j=ls(a,d),j!=null&&v.unshift(cl(a,j,N))):h||(j=ls(a,d),j!=null&&v.push(cl(a,j,N)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var Kb=/\r\n?/g,Yb=/\u0000|\uFFFD/g;function o_(t){return(typeof t=="string"?t:""+t).replace(Kb,`
`).replace(Yb,"")}function l_(t,i){return i=o_(i),o_(t)===i}function hc(){}function $e(t,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||wn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&wn(t,""+o);break;case"className":ar(t,"class",o);break;case"tabIndex":ar(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ar(t,a,o);break;case"style":So(t,o,d);break;case"data":if(i!=="object"){ar(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=zn(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&$e(t,i,"name",h.name,h,null),$e(t,i,"formEncType",h.formEncType,h,null),$e(t,i,"formMethod",h.formMethod,h,null),$e(t,i,"formTarget",h.formTarget,h,null)):($e(t,i,"encType",h.encType,h,null),$e(t,i,"method",h.method,h,null),$e(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=zn(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=hc);break;case"onScroll":o!=null&&Ve("scroll",t);break;case"onScrollEnd":o!=null&&Ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=zn(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Ve("beforetoggle",t),Ve("toggle",t),rr(t,"popover",o);break;case"xlinkActuate":Sn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Sn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Sn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Sn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Sn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Sn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":rr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=du.get(a)||a,rr(t,a,o))}}function dd(t,i,a,o,h,d){switch(a){case"style":So(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?wn(t,o):(typeof o=="number"||typeof o=="bigint")&&wn(t,""+o);break;case"onScroll":o!=null&&Ve("scroll",t);break;case"onScrollEnd":o!=null&&Ve("scrollend",t);break;case"onClick":o!=null&&(t.onclick=hc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ir.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Ut]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):rr(t,a,o)}}}function zt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",t),Ve("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:$e(t,i,d,v,a,null)}}h&&$e(t,i,"srcSet",a.srcSet,a,null),o&&$e(t,i,"src",a.src,a,null);return;case"input":Ve("invalid",t);var E=d=v=h=null,N=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var Q=a[o];if(Q!=null)switch(o){case"name":h=Q;break;case"type":v=Q;break;case"checked":N=Q;break;case"defaultChecked":j=Q;break;case"value":d=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:$e(t,i,o,Q,a,null)}}To(t,d,E,N,j,v,h,!1),rs(t);return;case"select":Ve("invalid",t),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:$e(t,i,h,E,a,null)}i=d,a=v,t.multiple=!!o,i!=null?as(t,!!o,i,!1):a!=null&&as(t,!!o,a,!0);return;case"textarea":Ve("invalid",t),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:$e(t,i,v,E,a,null)}fu(t,o,h,d),rs(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(o=a[N],o!=null))switch(N){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$e(t,i,N,o,a,null)}return;case"dialog":Ve("beforetoggle",t),Ve("toggle",t),Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":Ve("load",t);break;case"video":case"audio":for(o=0;o<ul.length;o++)Ve(ul[o],t);break;case"image":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"embed":case"source":case"link":Ve("error",t),Ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:$e(t,i,j,o,a,null)}return;default:if(oa(i)){for(Q in a)a.hasOwnProperty(Q)&&(o=a[Q],o!==void 0&&dd(t,i,Q,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&$e(t,i,E,o,a,null))}function Xb(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,E=null,N=null,j=null,Q=null;for(B in a){var Z=a[B];if(a.hasOwnProperty(B)&&Z!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":N=Z;default:o.hasOwnProperty(B)||$e(t,i,B,null,o,Z)}}for(var q in o){var B=o[q];if(Z=a[q],o.hasOwnProperty(q)&&(B!=null||Z!=null))switch(q){case"type":d=B;break;case"name":h=B;break;case"checked":j=B;break;case"defaultChecked":Q=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,i));break;default:B!==Z&&$e(t,i,q,B,o,Z)}}Eo(t,v,E,N,j,Q,d,h);return;case"select":B=v=E=q=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":B=N;default:o.hasOwnProperty(d)||$e(t,i,d,null,o,N)}for(h in o)if(d=o[h],N=a[h],o.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":q=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==N&&$e(t,i,h,d,o,N)}i=E,a=v,o=B,q!=null?as(t,!!a,q,!1):!!o!=!!a&&(i!=null?as(t,!!a,i,!0):as(t,!!a,a?[]:"",!1));return;case"textarea":B=q=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:$e(t,i,E,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":q=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&$e(t,i,v,h,o,d)}hu(t,q,B);return;case"option":for(var Te in a)if(q=a[Te],a.hasOwnProperty(Te)&&q!=null&&!o.hasOwnProperty(Te))switch(Te){case"selected":t.selected=!1;break;default:$e(t,i,Te,null,o,q)}for(N in o)if(q=o[N],B=a[N],o.hasOwnProperty(N)&&q!==B&&(q!=null||B!=null))switch(N){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:$e(t,i,N,q,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in a)q=a[ge],a.hasOwnProperty(ge)&&q!=null&&!o.hasOwnProperty(ge)&&$e(t,i,ge,null,o,q);for(j in o)if(q=o[j],B=a[j],o.hasOwnProperty(j)&&q!==B&&(q!=null||B!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:$e(t,i,j,q,o,B)}return;default:if(oa(i)){for(var Ze in a)q=a[Ze],a.hasOwnProperty(Ze)&&q!==void 0&&!o.hasOwnProperty(Ze)&&dd(t,i,Ze,void 0,o,q);for(Q in o)q=o[Q],B=a[Q],!o.hasOwnProperty(Q)||q===B||q===void 0&&B===void 0||dd(t,i,Q,q,o,B);return}}for(var k in a)q=a[k],a.hasOwnProperty(k)&&q!=null&&!o.hasOwnProperty(k)&&$e(t,i,k,null,o,q);for(Z in o)q=o[Z],B=a[Z],!o.hasOwnProperty(Z)||q===B||q==null&&B==null||$e(t,i,Z,q,o,B)}var md=null,pd=null;function fc(t){return t.nodeType===9?t:t.ownerDocument}function u_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function gd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var yd=null;function $b(){var t=window.event;return t&&t.type==="popstate"?t===yd?!1:(yd=t,!0):(yd=null,!1)}var h_=typeof setTimeout=="function"?setTimeout:void 0,Zb=typeof clearTimeout=="function"?clearTimeout:void 0,f_=typeof Promise=="function"?Promise:void 0,Wb=typeof queueMicrotask=="function"?queueMicrotask:typeof f_<"u"?function(t){return f_.resolve(null).then(t).catch(Jb)}:h_;function Jb(t){setTimeout(function(){throw t})}function Rs(t){return t==="head"}function d_(t,i){var a=i,o=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<o&&8>o){a=o;var v=t.ownerDocument;if(a&1&&hl(v.documentElement),a&2&&hl(v.body),a&4)for(a=v.head,hl(a),v=a.firstChild;v;){var E=v.nextSibling,N=v.nodeName;v[ts]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){t.removeChild(d),vl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=d}while(a);vl(i)}function _d(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":_d(a),na(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function eA(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[ts])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Qn(t.nextSibling),t===null)break}return null}function tA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Qn(t.nextSibling),t===null))return null;return t}function vd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function nA(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Qn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Ed=null;function m_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function p_(t,i,a){switch(i=fc(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function hl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);na(t)}var Vn=new Map,g_=new Set;function dc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Li=ne.d;ne.d={f:iA,r:sA,D:rA,C:aA,L:oA,m:lA,X:cA,S:uA,M:hA};function iA(){var t=Li.f(),i=sc();return t||i}function sA(t){var i=Jn(t);i!==null&&i.tag===5&&i.type==="form"?kg(i):Li.r(t)}var ja=typeof document>"u"?null:document;function y_(t,i,a){var o=ja;if(o&&typeof i=="string"&&i){var h=Dt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),g_.has(h)||(g_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),zt(i,"link",t),ft(i),o.head.appendChild(i)))}}function rA(t){Li.D(t),y_("dns-prefetch",t,null)}function aA(t,i){Li.C(t,i),y_("preconnect",t,i)}function oA(t,i,a){Li.L(t,i,a);var o=ja;if(o&&t&&i){var h='link[rel="preload"][as="'+Dt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Dt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Dt(a.imageSizes)+'"]')):h+='[href="'+Dt(t)+'"]';var d=h;switch(i){case"style":d=za(t);break;case"script":d=qa(t)}Vn.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Vn.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(fl(d))||i==="script"&&o.querySelector(dl(d))||(i=o.createElement("link"),zt(i,"link",t),ft(i),o.head.appendChild(i)))}}function lA(t,i){Li.m(t,i);var a=ja;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Dt(o)+'"][href="'+Dt(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=qa(t)}if(!Vn.has(d)&&(t=T({rel:"modulepreload",href:t},i),Vn.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(dl(d)))return}o=a.createElement("link"),zt(o,"link",t),ft(o),a.head.appendChild(o)}}}function uA(t,i,a){Li.S(t,i,a);var o=ja;if(o&&t){var h=is(o).hoistableStyles,d=za(t);i=i||"default";var v=h.get(d);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(fl(d)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Vn.get(d))&&Td(t,a);var N=v=o.createElement("link");ft(N),zt(N,"link",t),N._p=new Promise(function(j,Q){N.onload=j,N.onerror=Q}),N.addEventListener("load",function(){E.loading|=1}),N.addEventListener("error",function(){E.loading|=2}),E.loading|=4,mc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(d,v)}}}function cA(t,i){Li.X(t,i);var a=ja;if(a&&t){var o=is(a).hoistableScripts,h=qa(t),d=o.get(h);d||(d=a.querySelector(dl(h)),d||(t=T({src:t,async:!0},i),(i=Vn.get(h))&&bd(t,i),d=a.createElement("script"),ft(d),zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function hA(t,i){Li.M(t,i);var a=ja;if(a&&t){var o=is(a).hoistableScripts,h=qa(t),d=o.get(h);d||(d=a.querySelector(dl(h)),d||(t=T({src:t,async:!0,type:"module"},i),(i=Vn.get(h))&&bd(t,i),d=a.createElement("script"),ft(d),zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function __(t,i,a,o){var h=(h=Ee.current)?dc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=za(a.href),a=is(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=za(a.href);var d=is(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(fl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Vn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Vn.set(t,a),d||fA(h,t,a,v.state))),i&&o===null)throw Error(r(528,""));return v}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=qa(a),a=is(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function za(t){return'href="'+Dt(t)+'"'}function fl(t){return'link[rel="stylesheet"]['+t+"]"}function v_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function fA(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),zt(i,"link",a),ft(i),t.head.appendChild(i))}function qa(t){return'[src="'+Dt(t)+'"]'}function dl(t){return"script[async]"+t}function E_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+Dt(a.href)+'"]');if(o)return i.instance=o,ft(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),ft(o),zt(o,"style",h),mc(o,a.precedence,t),i.instance=o;case"stylesheet":h=za(a.href);var d=t.querySelector(fl(h));if(d)return i.state.loading|=4,i.instance=d,ft(d),d;o=v_(a),(h=Vn.get(h))&&Td(o,h),d=(t.ownerDocument||t).createElement("link"),ft(d);var v=d;return v._p=new Promise(function(E,N){v.onload=E,v.onerror=N}),zt(d,"link",o),i.state.loading|=4,mc(d,a.precedence,t),i.instance=d;case"script":return d=qa(a.src),(h=t.querySelector(dl(d)))?(i.instance=h,ft(h),h):(o=a,(h=Vn.get(d))&&(o=T({},a),bd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),ft(h),zt(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,mc(o,a.precedence,t));return i.instance}function mc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Td(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function bd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var pc=null;function T_(t,i,a){if(pc===null){var o=new Map,h=pc=new Map;h.set(a,o)}else h=pc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ts]||d[ht]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var E=o.get(v);E?E.push(d):o.set(v,[d])}}return o}function b_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function dA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function A_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ml=null;function mA(){}function pA(t,i,a){if(ml===null)throw Error(r(475));var o=ml;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=za(a.href),d=t.querySelector(fl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=gc.bind(o),t.then(o,o)),i.state.loading|=4,i.instance=d,ft(d);return}d=t.ownerDocument||t,a=v_(a),(h=Vn.get(h))&&Td(a,h),d=d.createElement("link"),ft(d);var v=d;v._p=new Promise(function(E,N){v.onload=E,v.onerror=N}),zt(d,"link",a),i.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=gc.bind(o),t.addEventListener("load",i),t.addEventListener("error",i))}}function gA(){if(ml===null)throw Error(r(475));var t=ml;return t.stylesheets&&t.count===0&&Ad(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Ad(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function gc(){if(this.count--,this.count===0){if(this.stylesheets)Ad(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var yc=null;function Ad(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,yc=new Map,i.forEach(yA,t),yc=null,gc.call(t))}function yA(t,i){if(!(i.state.loading&4)){var a=yc.get(t);if(a)var o=a.get(null);else{a=new Map,yc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=gc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var pl={$$typeof:K,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function _A(t,i,a,o,h,d,v,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ta(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ta(0),this.hiddenUpdates=ta(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function S_(t,i,a,o,h,d,v,E,N,j,Q,Z){return t=new _A(t,i,a,v,E,N,j,Z),i=1,d===!0&&(i|=24),d=dn(3,null,null,i),t.current=d,d.stateNode=t,i=sf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},lf(d),t}function w_(t){return t?(t=_a,t):_a}function R_(t,i,a,o,h,d){h=w_(h),o.context===null?o.context=h:o.pendingContext=h,o=ds(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=ms(t,o,i),a!==null&&(_n(a,t,i),Go(a,t,i))}function I_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Sd(t,i){I_(t,i),(t=t.alternate)&&I_(t,i)}function C_(t){if(t.tag===13){var i=ya(t,67108864);i!==null&&_n(i,t,67108864),Sd(t,67108864)}}var _c=!0;function vA(t,i,a,o){var h=F.T;F.T=null;var d=ne.p;try{ne.p=2,wd(t,i,a,o)}finally{ne.p=d,F.T=h}}function EA(t,i,a,o){var h=F.T;F.T=null;var d=ne.p;try{ne.p=8,wd(t,i,a,o)}finally{ne.p=d,F.T=h}}function wd(t,i,a,o){if(_c){var h=Rd(o);if(h===null)fd(t,i,o,vc,a),D_(t,o);else if(bA(h,t,i,a,o))o.stopPropagation();else if(D_(t,o),i&4&&-1<TA.indexOf(t)){for(;h!==null;){var d=Jn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Un(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var N=1<<31-Wt(v);E.entanglements[1]|=N,v&=~N}ui(d),(Ge&6)===0&&(nc=sn()+500,ll(0))}}break;case 13:E=ya(d,2),E!==null&&_n(E,d,2),sc(),Sd(d,2)}if(d=Rd(o),d===null&&fd(t,i,o,vc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else fd(t,i,o,null,a)}}function Rd(t){return t=Ro(t),Id(t)}var vc=null;function Id(t){if(vc=null,t=Wn(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return vc=t,null}function N_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(au()){case St:return 2;case Nt:return 8;case _i:case Oh:return 32;case go:return 268435456;default:return 32}default:return 32}}var Cd=!1,Is=null,Cs=null,Ns=null,gl=new Map,yl=new Map,Ds=[],TA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D_(t,i){switch(t){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":gl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(i.pointerId)}}function _l(t,i,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Jn(i),i!==null&&C_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function bA(t,i,a,o,h){switch(i){case"focusin":return Is=_l(Is,t,i,a,o,h),!0;case"dragenter":return Cs=_l(Cs,t,i,a,o,h),!0;case"mouseover":return Ns=_l(Ns,t,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return gl.set(d,_l(gl.get(d)||null,t,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,yl.set(d,_l(yl.get(d)||null,t,i,a,o,h)),!0}return!1}function O_(t){var i=Wn(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Mh(t.priority,function(){if(a.tag===13){var o=yn();o=_o(o);var h=ya(a,o);h!==null&&_n(h,a,o),Sd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ec(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Rd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);wo=o,a.target.dispatchEvent(o),wo=null}else return i=Jn(a),i!==null&&C_(i),t.blockedOn=a,!1;i.shift()}return!0}function x_(t,i,a){Ec(t)&&a.delete(i)}function AA(){Cd=!1,Is!==null&&Ec(Is)&&(Is=null),Cs!==null&&Ec(Cs)&&(Cs=null),Ns!==null&&Ec(Ns)&&(Ns=null),gl.forEach(x_),yl.forEach(x_)}function Tc(t,i){t.blockedOn===i&&(t.blockedOn=null,Cd||(Cd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,AA)))}var bc=null;function V_(t){bc!==t&&(bc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){bc===t&&(bc=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Id(o||a)===null)continue;break}var d=Jn(a);d!==null&&(t.splice(i,3),i-=3,If(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function vl(t){function i(N){return Tc(N,t)}Is!==null&&Tc(Is,t),Cs!==null&&Tc(Cs,t),Ns!==null&&Tc(Ns,t),gl.forEach(i),yl.forEach(i);for(var a=0;a<Ds.length;a++){var o=Ds[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Ds.length&&(a=Ds[0],a.blockedOn===null);)O_(a),a.blockedOn===null&&Ds.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[Ut]||null;if(typeof d=="function")v||V_(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ut]||null)E=v.formAction;else if(Id(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),V_(a)}}}function Nd(t){this._internalRoot=t}Ac.prototype.render=Nd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,o=yn();R_(a,o,t,i,null,null)},Ac.prototype.unmount=Nd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;R_(t.current,2,null,t,null,null),sc(),i[Ei]=null}};function Ac(t){this._internalRoot=t}Ac.prototype.unstable_scheduleHydration=function(t){if(t){var i=vi();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Ds.length&&i!==0&&i<Ds[a].priority;a++);Ds.splice(a,0,t),a===0&&O_(t)}};var M_=e.version;if(M_!=="19.1.1")throw Error(r(527,M_,"19.1.1"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var SA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sc.isDisabled&&Sc.supportsFiber)try{Xi=Sc.inject(SA),Ft=Sc}catch{}}return Tl.createRoot=function(t,i){if(!l(t))throw Error(r(299));var a=!1,o="",h=$g,d=Zg,v=Wg,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=S_(t,1,!1,null,null,a,o,h,d,v,E,null),t[Ei]=i.current,hd(t),new Nd(i)},Tl.hydrateRoot=function(t,i,a){if(!l(t))throw Error(r(299));var o=!1,h="",d=$g,v=Zg,E=Wg,N=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=S_(t,1,!0,i,a??null,o,h,d,v,E,N,j),i.context=w_(null),a=i.current,o=yn(),o=_o(o),h=ds(o),h.callback=null,ms(a,h,o),a=o,i.current.lanes=a,ct(i,a),ui(i),t[Ei]=i.current,hd(t),new Ac(i)},Tl.version="19.1.1",Tl}var F_;function MA(){if(F_)return xd.exports;F_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),xd.exports=VA(),xd.exports}var PA=MA();const kA=()=>{};var G_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},UA=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const l=s[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[n++];e[r++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[n++],f=s[n++],p=s[n++],y=((l&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=s[n++],f=s[n++];e[r++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},IE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const c=s[l],f=l+1<s.length,p=f?s[l+1]:0,y=l+2<s.length,g=y?s[l+2]:0,T=c>>2,R=(c&3)<<4|p>>4;let D=(p&15)<<2|g>>6,G=g&63;y||(G=64,f||(D=64)),r.push(n[T],n[R],n[D],n[G])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(RE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):UA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const c=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const g=l<s.length?n[s.charAt(l)]:64;++l;const R=l<s.length?n[s.charAt(l)]:64;if(++l,c==null||p==null||g==null||R==null)throw new LA;const D=c<<2|p>>4;if(r.push(D),g!==64){const G=p<<4&240|g>>2;if(r.push(G),R!==64){const J=g<<6&192|R;r.push(J)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class LA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jA=function(s){const e=RE(s);return IE.encodeByteArray(e,!0)},Bc=function(s){return jA(s).replace(/\./g,"")},CE=function(s){try{return IE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=()=>zA().__FIREBASE_DEFAULTS__,BA=()=>{if(typeof process>"u"||typeof G_>"u")return;const s=G_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},HA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&CE(s[1]);return e&&JSON.parse(e)},oh=()=>{try{return kA()||qA()||BA()||HA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},NE=s=>oh()?.emulatorHosts?.[s],FA=s=>{const e=NE(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},DE=()=>oh()?.config,OE=s=>oh()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Bc(JSON.stringify(n)),Bc(JSON.stringify(f)),""].join(".")}const Cl={};function KA(){const s={prod:[],emulator:[]};for(const e of Object.keys(Cl))Cl[e]?s.emulator.push(e):s.prod.push(e);return s}function YA(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Q_=!1;function VE(s,e){if(typeof window>"u"||typeof document>"u"||!ao(window.location.host)||Cl[s]===e||Cl[s]||Q_)return;Cl[s]=e;function n(D){return`__firebase__banner__${D}`}const r="__firebase__banner",c=KA().prod.length>0;function f(){const D=document.getElementById(r);D&&D.remove()}function p(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function y(D,G){D.setAttribute("width","24"),D.setAttribute("id",G),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function g(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{Q_=!0,f()},D}function T(D,G){D.setAttribute("id",G),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function R(){const D=YA(r),G=n("text"),J=document.getElementById(G)||document.createElement("span"),re=n("learnmore"),Y=document.getElementById(re)||document.createElement("a"),le=n("preprendIcon"),de=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const K=D.element;p(K),T(Y,re);const Ae=g();y(de,le),K.append(de,J,Y,Ae),document.body.appendChild(K)}c?(J.innerText="Preview backend disconnected.",de.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(de.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,J.innerText="Preview backend running in this workspace."),J.setAttribute("id",G)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function $A(){const s=oh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function JA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eS(){const s=Zt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function tS(){return!$A()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nS(){try{return typeof indexedDB=="object"}catch{return!1}}function iS(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="FirebaseError";class Yi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sS,Object.setPrototypeOf(this,Yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gl.prototype.create)}}class Gl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?rS(c,r):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new Yi(l,p,r)}}function rS(s,e){return s.replace(aS,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const aS=/\{\$([^}]+)}/g;function oS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function zr(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const c=s[l],f=e[l];if(K_(c)&&K_(f)){if(!zr(c,f))return!1}else if(c!==f)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function K_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,c]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Al(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function lS(s,e){const n=new uS(s,e);return n.subscribe.bind(n)}class uS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=kd),l.error===void 0&&(l.error=kd),l.complete===void 0&&(l.complete=kd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function kd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(s){return s&&s._delegate?s._delegate:s}class qr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new GA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dS(e))try{this.getOrInitializeService({instanceIdentifier:kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});r.resolve(c)}catch{}}}}clearInstance(e=kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kr){return this.instances.has(e)}getOptions(e=kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&f.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&e(c,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=kr){return this.component?this.component.multipleInstances?e:kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fS(s){return s===kr?void 0:s}function dS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ke||(ke={}));const pS={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},gS=ke.INFO,yS={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},_S=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=yS[e];if(l)console[l](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rm{constructor(e){this.name=e,this._logLevel=gS,this._logHandler=_S,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const vS=(s,e)=>e.some(n=>s instanceof n);let Y_,X_;function ES(){return Y_||(Y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TS(){return X_||(X_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ME=new WeakMap,Zd=new WeakMap,PE=new WeakMap,Ud=new WeakMap,Im=new WeakMap;function bS(s){const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{n(Ls(s.result)),l()},f=()=>{r(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&ME.set(n,s)}).catch(()=>{}),Im.set(e,s),e}function AS(s){if(Zd.has(s))return;const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});Zd.set(s,e)}let Wd={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Zd.get(s);if(e==="objectStoreNames")return s.objectStoreNames||PE.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ls(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function SS(s){Wd=s(Wd)}function wS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(Ld(this),e,...n);return PE.set(r,e.sort?e.sort():[e]),Ls(r)}:TS().includes(s)?function(...e){return s.apply(Ld(this),e),Ls(ME.get(this))}:function(...e){return Ls(s.apply(Ld(this),e))}}function RS(s){return typeof s=="function"?wS(s):(s instanceof IDBTransaction&&AS(s),vS(s,ES())?new Proxy(s,Wd):s)}function Ls(s){if(s instanceof IDBRequest)return bS(s);if(Ud.has(s))return Ud.get(s);const e=RS(s);return e!==s&&(Ud.set(s,e),Im.set(e,s)),e}const Ld=s=>Im.get(s);function IS(s,e,{blocked:n,upgrade:r,blocking:l,terminated:c}={}){const f=indexedDB.open(s,e),p=Ls(f);return r&&f.addEventListener("upgradeneeded",y=>{r(Ls(f.result),y.oldVersion,y.newVersion,Ls(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const CS=["get","getKey","getAll","getAllKeys","count"],NS=["put","add","delete","clear"],jd=new Map;function $_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(jd.get(e))return jd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=NS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||CS.includes(n)))return;const c=async function(f,...p){const y=this.transaction(f,l?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),l&&y.done]))[0]};return jd.set(e,c),c}SS(s=>({...s,get:(e,n,r)=>$_(e,n)||s.get(e,n,r),has:(e,n)=>!!$_(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OS(s){return s.getComponent()?.type==="VERSION"}const Jd="@firebase/app",Z_="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new Rm("@firebase/app"),xS="@firebase/app-compat",VS="@firebase/analytics-compat",MS="@firebase/analytics",PS="@firebase/app-check-compat",kS="@firebase/app-check",US="@firebase/auth",LS="@firebase/auth-compat",jS="@firebase/database",zS="@firebase/data-connect",qS="@firebase/database-compat",BS="@firebase/functions",HS="@firebase/functions-compat",FS="@firebase/installations",GS="@firebase/installations-compat",QS="@firebase/messaging",KS="@firebase/messaging-compat",YS="@firebase/performance",XS="@firebase/performance-compat",$S="@firebase/remote-config",ZS="@firebase/remote-config-compat",WS="@firebase/storage",JS="@firebase/storage-compat",ew="@firebase/firestore",tw="@firebase/ai",nw="@firebase/firestore-compat",iw="firebase",sw="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="[DEFAULT]",rw={[Jd]:"fire-core",[xS]:"fire-core-compat",[MS]:"fire-analytics",[VS]:"fire-analytics-compat",[kS]:"fire-app-check",[PS]:"fire-app-check-compat",[US]:"fire-auth",[LS]:"fire-auth-compat",[jS]:"fire-rtdb",[zS]:"fire-data-connect",[qS]:"fire-rtdb-compat",[BS]:"fire-fn",[HS]:"fire-fn-compat",[FS]:"fire-iid",[GS]:"fire-iid-compat",[QS]:"fire-fcm",[KS]:"fire-fcm-compat",[YS]:"fire-perf",[XS]:"fire-perf-compat",[$S]:"fire-rc",[ZS]:"fire-rc-compat",[WS]:"fire-gcs",[JS]:"fire-gcs-compat",[ew]:"fire-fst",[nw]:"fire-fst-compat",[tw]:"fire-vertex","fire-js":"fire-js",[iw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Map,aw=new Map,tm=new Map;function W_(s,e){try{s.container.addComponent(e)}catch(n){Hi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Ja(s){const e=s.name;if(tm.has(e))return Hi.debug(`There were multiple attempts to register component ${e}.`),!1;tm.set(e,s);for(const n of Hc.values())W_(n,s);for(const n of aw.values())W_(n,s);return!0}function Cm(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Mn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},js=new Gl("app","Firebase",ow);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw js.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=sw;function kE(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:em,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw js.create("bad-app-name",{appName:String(l)});if(n||(n=DE()),!n)throw js.create("no-options");const c=Hc.get(l);if(c){if(zr(n,c.options)&&zr(r,c.config))return c;throw js.create("duplicate-app",{appName:l})}const f=new mS(l);for(const y of tm.values())f.addComponent(y);const p=new lw(n,r,f);return Hc.set(l,p),p}function UE(s=em){const e=Hc.get(s);if(!e&&s===em&&DE())return kE();if(!e)throw js.create("no-app",{appName:s});return e}function zs(s,e,n){let r=rw[s]??s;n&&(r+=`-${n}`);const l=r.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hi.warn(f.join(" "));return}Ja(new qr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="firebase-heartbeat-database",cw=1,Ml="firebase-heartbeat-store";let zd=null;function LE(){return zd||(zd=IS(uw,cw,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ml)}catch(n){console.warn(n)}}}}).catch(s=>{throw js.create("idb-open",{originalErrorMessage:s.message})})),zd}async function hw(s){try{const n=(await LE()).transaction(Ml),r=await n.objectStore(Ml).get(jE(s));return await n.done,r}catch(e){if(e instanceof Yi)Hi.warn(e.message);else{const n=js.create("idb-get",{originalErrorMessage:e?.message});Hi.warn(n.message)}}}async function J_(s,e){try{const r=(await LE()).transaction(Ml,"readwrite");await r.objectStore(Ml).put(e,jE(s)),await r.done}catch(n){if(n instanceof Yi)Hi.warn(n.message);else{const r=js.create("idb-set",{originalErrorMessage:n?.message});Hi.warn(r.message)}}}function jE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=1024,dw=30;class mw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ev();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>dw){const l=yw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Hi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ev(),{heartbeatsToSend:n,unsentEntries:r}=pw(this._heartbeatsCache.heartbeats),l=Bc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Hi.warn(e),""}}}function ev(){return new Date().toISOString().substring(0,10)}function pw(s,e=fw){const n=[];let r=s.slice();for(const l of s){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),tv(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),tv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nS()?iS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return J_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return J_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tv(s){return Bc(JSON.stringify({version:2,heartbeats:s})).length}function yw(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(s){Ja(new qr("platform-logger",e=>new DS(e),"PRIVATE")),Ja(new qr("heartbeat",e=>new mw(e),"PRIVATE")),zs(Jd,Z_,s),zs(Jd,Z_,"esm2020"),zs("fire-js","")}_w("");var vw="firebase",Ew="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zs(vw,Ew,"app");function zE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tw=zE,qE=new Gl("auth","Firebase",zE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new Rm("@firebase/auth");function bw(s,...e){Fc.logLevel<=ke.WARN&&Fc.warn(`Auth (${oo}): ${s}`,...e)}function Oc(s,...e){Fc.logLevel<=ke.ERROR&&Fc.error(`Auth (${oo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(s,...e){throw Nm(s,...e)}function hi(s,...e){return Nm(s,...e)}function BE(s,e,n){const r={...Tw(),[e]:n};return new Gl("auth","Firebase",r).create(e,{appName:s.name})}function qi(s){return BE(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return qE.create(s,...e)}function _e(s,e,...n){if(!s)throw Nm(e,...n)}function ji(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Oc(e),new Error(e)}function Fi(s,e){s||ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(){return typeof self<"u"&&self.location?.href||""}function Aw(){return nv()==="http:"||nv()==="https:"}function nv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Aw()||WA()||"connection"in navigator)?navigator.onLine:!0}function ww(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fi(n>e,"Short delay should be less than long delay!"),this.isMobile=XA()||JA()}get(){return Sw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(s,e){Fi(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Cw=new Kl(3e4,6e4);function Xs(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function $s(s,e,n,r,l={}){return FE(s,l,async()=>{let c={},f={};r&&(e==="GET"?f=r:c={body:JSON.stringify(r)});const p=Ql({key:s.config.apiKey,...f}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:y,...c};return ZA()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&ao(s.emulatorConfig.host)&&(g.credentials="include"),HE.fetch()(await GE(s,s.config.apiHost,n,p),g)})}async function FE(s,e,n){s._canInitEmulator=!1;const r={...Rw,...e};try{const l=new Dw(s),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw wc(s,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[y,g]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw wc(s,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw wc(s,"email-already-in-use",f);if(y==="USER_DISABLED")throw wc(s,"user-disabled",f);const T=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw BE(s,T,g);Yn(s,T)}}catch(l){if(l instanceof Yi)throw l;Yn(s,"network-request-failed",{message:String(l)})}}async function Yl(s,e,n,r,l={}){const c=await $s(s,e,n,r,l);return"mfaPendingCredential"in c&&Yn(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function GE(s,e,n,r){const l=`${e}${n}?${r}`,c=s,f=c.config.emulator?Dm(s.config,l):`${s.config.apiScheme}://${l}`;return Iw.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function Nw(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hi(this.auth,"network-request-failed")),Cw.get())})}}function wc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=hi(s,e,r);return l.customData._tokenResponse=n,l}function iv(s){return s!==void 0&&s.enterprise!==void 0}class Ow{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Nw(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xw(s,e){return $s(s,"GET","/v2/recaptchaConfig",Xs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vw(s,e){return $s(s,"POST","/v1/accounts:delete",e)}async function Gc(s,e){return $s(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Mw(s,e=!1){const n=At(s),r=await n.getIdToken(e),l=Om(r);_e(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c?.sign_in_provider;return{claims:l,token:r,authTime:Nl(qd(l.auth_time)),issuedAtTime:Nl(qd(l.iat)),expirationTime:Nl(qd(l.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function qd(s){return Number(s)*1e3}function Om(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Oc("JWT malformed, contained fewer than 3 sections"),null;try{const l=CE(n);return l?JSON.parse(l):(Oc("Failed to decode base64 JWT payload"),null)}catch(l){return Oc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function sv(s){const e=Om(s);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yi&&Pw(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function Pw({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nl(this.lastLoginAt),this.creationTime=Nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(s){const e=s.auth,n=await s.getIdToken(),r=await Pl(s,Gc(e,{idToken:n}));_e(r?.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?QE(l.providerUserInfo):[],f=Lw(s.providerData,c),p=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!f?.length,g=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new im(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(s,T)}async function Uw(s){const e=At(s);await Qc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Lw(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function QE(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(s,e){const n=await FE(s,{},async()=>{const r=Ql({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,f=await GE(s,l,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&ao(s.emulatorConfig.host)&&(y.credentials="include"),HE.fetch()(f,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zw(s,e){return $s(s,"POST","/v2/accounts:revokeToken",Xs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const n=sv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:c}=await jw(e,n);this.updateTokensAndExpiration(r,l,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:c}=n,f=new Xa;return r&&(_e(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),l&&(_e(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),c&&(_e(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(s,e){_e(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Kn{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new kw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new im(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Pl(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Mw(this,e)}reload(){return Uw(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Kn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(qi(this.auth));const e=await this.getIdToken();return await Pl(this,Vw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,g=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:R,emailVerified:D,isAnonymous:G,providerData:J,stsTokenManager:re}=n;_e(R&&re,e,"internal-error");const Y=Xa.fromJSON(this.name,re);_e(typeof R=="string",e,"internal-error"),xs(r,e.name),xs(l,e.name),_e(typeof D=="boolean",e,"internal-error"),_e(typeof G=="boolean",e,"internal-error"),xs(c,e.name),xs(f,e.name),xs(p,e.name),xs(y,e.name),xs(g,e.name),xs(T,e.name);const le=new Kn({uid:R,auth:e,email:l,emailVerified:D,displayName:r,isAnonymous:G,photoURL:f,phoneNumber:c,tenantId:p,stsTokenManager:Y,createdAt:g,lastLoginAt:T});return J&&Array.isArray(J)&&(le.providerData=J.map(de=>({...de}))),y&&(le._redirectEventId=y),le}static async _fromIdTokenResponse(e,n,r=!1){const l=new Xa;l.updateFromServerResponse(n);const c=new Kn({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await Qc(c),c}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];_e(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?QE(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!c?.length,p=new Xa;p.updateFromIdToken(r);const y=new Kn({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new im(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=new Map;function zi(s){Fi(s instanceof Function,"Expected a class definition");let e=rv.get(s);return e?(Fi(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,rv.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}KE.type="NONE";const av=KE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(s,e,n){return`firebase:${s}:${e}:${n}`}class $a{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:c}=this.auth;this.fullUserKey=xc(this.userKey,l.apiKey,c),this.fullPersistenceKey=xc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gc(this.auth,{idToken:e}).catch(()=>{});return n?Kn._fromGetAccountInfoResponse(this.auth,n,e):null}return Kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $a(zi(av),e,r);const l=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=l[0]||zi(av);const f=xc(r,e.config.apiKey,e.name);let p=null;for(const g of n)try{const T=await g._get(f);if(T){let R;if(typeof T=="string"){const D=await Gc(e,{idToken:T}).catch(()=>{});if(!D)break;R=await Kn._fromGetAccountInfoResponse(e,D,T)}else R=Kn._fromJSON(e,T);g!==c&&(p=R),c=g;break}}catch{}const y=l.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new $a(c,e,r):(c=y[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==c)try{await g._remove(f)}catch{}})),new $a(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JE(e))return"Blackberry";if(eT(e))return"Webos";if(XE(e))return"Safari";if((e.includes("chrome/")||$E(e))&&!e.includes("edge/"))return"Chrome";if(WE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function YE(s=Zt()){return/firefox\//i.test(s)}function XE(s=Zt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $E(s=Zt()){return/crios\//i.test(s)}function ZE(s=Zt()){return/iemobile/i.test(s)}function WE(s=Zt()){return/android/i.test(s)}function JE(s=Zt()){return/blackberry/i.test(s)}function eT(s=Zt()){return/webos/i.test(s)}function xm(s=Zt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function qw(s=Zt()){return xm(s)&&!!window.navigator?.standalone}function Bw(){return eS()&&document.documentMode===10}function tT(s=Zt()){return xm(s)||WE(s)||eT(s)||JE(s)||/windows phone/i.test(s)||ZE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(s,e=[]){let n;switch(s){case"Browser":n=ov(Zt());break;case"Worker":n=`${ov(Zt())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((f,p)=>{try{const y=e(c);f(y)}catch(y){p(y)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fw(s,e={}){return $s(s,"GET","/v2/passwordPolicy",Xs(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=6;class Qw{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Gw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lv(this),this.idTokenSubscription=new lv(this),this.beforeStateQueue=new Hw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await $a.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gc(this,{idToken:e}),r=await Kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Mn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ww()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(qi(this));const n=e?At(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Fw(this),n=new Qw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zw(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zi(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await $a.create(this,[zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,l);return()=>{f=!0,y()}}else{const y=e.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&bw(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Qr(s){return At(s)}class lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=lS(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yw(s){lh=s}function iT(s){return lh.loadJS(s)}function Xw(){return lh.recaptchaEnterpriseScript}function $w(){return lh.gapiScript}function Zw(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class Ww{constructor(){this.enterprise=new Jw}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Jw{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const e1="recaptcha-enterprise",sT="NO_RECAPTCHA";class t1{constructor(e){this.type=e1,this.auth=Qr(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,p)=>{xw(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new Ow(y);return c.tenantId==null?c._agentRecaptchaConfig=g:c._tenantRecaptchaConfigs[c.tenantId]=g,f(g.siteKey)}}).catch(y=>{p(y)})})}function l(c,f,p){const y=window.grecaptcha;iv(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(g=>{f(g)}).catch(()=>{f(sT)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ww().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{r(this.auth).then(p=>{if(!n&&iv(window.grecaptcha))l(p,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=Xw();y.length!==0&&(y+=p),iT(y).then(()=>{l(p,c,f)}).catch(g=>{f(g)})}}).catch(p=>{f(p)})})}}async function uv(s,e,n,r=!1,l=!1){const c=new t1(s);let f;if(l)f=sT;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function sm(s,e,n,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await uv(s,e,n,n==="getOobCode");return r(s,c)}else return r(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await uv(s,e,n,n==="getOobCode");return r(s,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(s,e){const n=Cm(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(zr(c,e??{}))return l;Yn(l,"already-initialized")}return n.initialize({options:e})}function i1(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(zi);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function s1(s,e,n){const r=Qr(s);_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,c=rT(e),{host:f,port:p}=r1(e),y=p===null?"":`:${p}`,g={url:`${c}//${f}${y}/`},T=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){_e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_e(zr(g,r.config.emulator)&&zr(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,ao(f)?(xE(`${c}//${f}${y}`),VE("Auth",!0)):a1()}function rT(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function r1(s){const e=rT(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const c=l[1];return{host:c,port:cv(r.substr(c.length+1))}}else{const[c,f]=r.split(":");return{host:c,port:cv(f)}}}function cv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function a1(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ji("not implemented")}_getIdTokenResponse(e){return ji("not implemented")}_linkToIdToken(e,n){return ji("not implemented")}_getReauthenticationResolver(e){return ji("not implemented")}}async function o1(s,e){return $s(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l1(s,e){return Yl(s,"POST","/v1/accounts:signInWithPassword",Xs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(s,e){return Yl(s,"POST","/v1/accounts:signInWithEmailLink",Xs(s,e))}async function c1(s,e){return Yl(s,"POST","/v1/accounts:signInWithEmailLink",Xs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends Vm{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new kl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new kl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(e,n,"signInWithPassword",l1);case"emailLink":return u1(e,{email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(e,r,"signUpPassword",o1);case"emailLink":return c1(e,{idToken:n,email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(s,e){return Yl(s,"POST","/v1/accounts:signInWithIdp",Xs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="http://localhost";class Br extends Vm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Br(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...c}=n;if(!r||!l)return null;const f=new Br(r,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Za(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Za(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Za(e,n)}buildRequest(){const e={requestUri:h1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ql(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function d1(s){const e=bl(Al(s)).link,n=e?bl(Al(e)).deep_link_id:null,r=bl(Al(s)).deep_link_id;return(r?bl(Al(r)).link:null)||r||n||e||s}class Mm{constructor(e){const n=bl(Al(e)),r=n.apiKey??null,l=n.oobCode??null,c=f1(n.mode??null);_e(r&&l&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=d1(e);try{return new Mm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.providerId=lo.PROVIDER_ID}static credential(e,n){return kl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Mm.parseLink(n);return _e(r,"argument-error"),kl._fromEmailAndCode(e,r.code,r.tenantId)}}lo.PROVIDER_ID="password";lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends aT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Xl{constructor(){super("facebook.com")}static credential(e){return Br._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Br._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ms.credential(n,r)}catch{return null}}}Ms.GOOGLE_SIGN_IN_METHOD="google.com";Ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Xl{constructor(){super("github.com")}static credential(e){return Br._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Xl{constructor(){super("twitter.com")}static credential(e,n){return Br._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ks.credential(n,r)}catch{return null}}}ks.TWITTER_SIGN_IN_METHOD="twitter.com";ks.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(s,e){return Yl(s,"POST","/v1/accounts:signUp",Xs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const c=await Kn._fromIdTokenResponse(e,r,l),f=hv(r);return new Hr({user:c,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=hv(r);return new Hr({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function hv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends Yi{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new Kc(e,n,r,l)}}function oT(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Kc._fromErrorAndOperation(s,c,e,r):c})}async function p1(s,e,n=!1){const r=await Pl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Hr._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(s,e,n=!1){const{auth:r}=s;if(Mn(r.app))return Promise.reject(qi(r));const l="reauthenticate";try{const c=await Pl(s,oT(r,l,e,s),n);_e(c.idToken,r,"internal-error");const f=Om(c.idToken);_e(f,r,"internal-error");const{sub:p}=f;return _e(s.uid===p,r,"user-mismatch"),Hr._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Yn(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lT(s,e,n=!1){if(Mn(s.app))return Promise.reject(qi(s));const r="signIn",l=await oT(s,r,e),c=await Hr._fromIdTokenResponse(s,r,l);return n||await s._updateCurrentUser(c.user),c}async function y1(s,e){return lT(Qr(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(s){const e=Qr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _1(s,e,n){if(Mn(s.app))return Promise.reject(qi(s));const r=Qr(s),f=await sm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",m1).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&uT(s),y}),p=await Hr._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function v1(s,e,n){return Mn(s.app)?Promise.reject(qi(s)):y1(At(s),lo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&uT(s),r})}function E1(s,e,n,r){return At(s).onIdTokenChanged(e,n,r)}function T1(s,e,n){return At(s).beforeAuthStateChanged(e,n)}function b1(s,e,n,r){return At(s).onAuthStateChanged(e,n,r)}function Bd(s){return At(s).signOut()}const Yc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yc,"1"),this.storage.removeItem(Yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=1e3,S1=10;class hT extends cT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,y)=>{this.notifyListeners(f,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},c=this.storage.getItem(r);Bw()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,S1):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},A1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hT.type="LOCAL";const w1=hT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT extends cT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fT.type="SESSION";const dT=fT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new uh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(f).map(async g=>g(n.origin,c)),y=await R1(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((p,y)=>{const g=Pm("",20);l.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(R){const D=R;if(D.data.eventId===g)switch(D.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(D.data.response);break;default:clearTimeout(T),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return window}function C1(s){fi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function N1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function D1(){return navigator?.serviceWorker?.controller||null}function O1(){return mT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="firebaseLocalStorageDb",x1=1,Xc="firebaseLocalStorage",gT="fbase_key";class $l{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ch(s,e){return s.transaction([Xc],e?"readwrite":"readonly").objectStore(Xc)}function V1(){const s=indexedDB.deleteDatabase(pT);return new $l(s).toPromise()}function rm(){const s=indexedDB.open(pT,x1);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Xc,{keyPath:gT})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Xc)?e(r):(r.close(),await V1(),e(await rm()))})})}async function fv(s,e,n){const r=ch(s,!0).put({[gT]:e,value:n});return new $l(r).toPromise()}async function M1(s,e){const n=ch(s,!1).get(e),r=await new $l(n).toPromise();return r===void 0?null:r.value}function dv(s,e){const n=ch(s,!0).delete(e);return new $l(n).toPromise()}const P1=800,k1=3;class yT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>k1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uh._getInstance(O1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await N1(),!this.activeServiceWorker)return;this.sender=new I1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||D1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rm();return await fv(e,Yc,"1"),await dv(e,Yc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>fv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>M1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=ch(l,!1).getAll();return new $l(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),P1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yT.type="LOCAL";const U1=yT;new Kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(s,e){return e?zi(e):(_e(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends Vm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Za(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Za(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Za(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function j1(s){return lT(s.auth,new km(s),s.bypassAuthState)}function z1(s){const{auth:e,user:n}=s;return _e(n,e,"internal-error"),g1(n,new km(s),s.bypassAuthState)}async function q1(s){const{auth:e,user:n}=s;return _e(n,e,"internal-error"),p1(n,new km(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n,r,l,c=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return j1;case"linkViaPopup":case"linkViaRedirect":return q1;case"reauthViaPopup":case"reauthViaRedirect":return z1;default:Yn(this.auth,"internal-error")}}resolve(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new Kl(2e3,1e4);class Ya extends _T{constructor(e,n,r,l,c){super(e,n,l,c),this.provider=r,this.authWindow=null,this.pollId=null,Ya.currentPopupAction&&Ya.currentPopupAction.cancel(),Ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){Fi(this.filter.length===1,"Popup operations only handle one event");const e=Pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,B1.get())};e()}}Ya.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="pendingRedirect",Vc=new Map;class F1 extends _T{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vc.get(this.auth._key());if(!e){try{const r=await G1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vc.set(this.auth._key(),e)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function G1(s,e){const n=Y1(e),r=K1(s);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function Q1(s,e){Vc.set(s._key(),e)}function K1(s){return zi(s._redirectPersistence)}function Y1(s){return xc(H1,s.config.apiKey,s.name)}async function X1(s,e,n=!1){if(Mn(s.app))return Promise.reject(qi(s));const r=Qr(s),l=L1(r,e),f=await new F1(r,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=600*1e3;class Z1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!W1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!vT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(hi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$1&&this.cachedEventUids.clear(),this.cachedEventUids.has(mv(e))}saveEventToCache(e){this.cachedEventUids.add(mv(e)),this.lastProcessedEventTime=Date.now()}}function mv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function vT({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function W1(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vT(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(s,e={}){return $s(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tR=/^https?/;async function nR(s){if(s.config.emulator)return;const{authorizedDomains:e}=await J1(s);for(const n of e)try{if(iR(n))return}catch{}Yn(s,"unauthorized-domain")}function iR(s){const e=nm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!tR.test(n))return!1;if(eR.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=new Kl(3e4,6e4);function pv(){const s=fi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function rR(s){return new Promise((e,n)=>{function r(){pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pv(),n(hi(s,"network-request-failed"))},timeout:sR.get()})}if(fi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fi().gapi?.load)r();else{const l=Zw("iframefcb");return fi()[l]=()=>{gapi.load?r():n(hi(s,"network-request-failed"))},iT(`${$w()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Mc=null,e})}let Mc=null;function aR(s){return Mc=Mc||rR(s),Mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new Kl(5e3,15e3),lR="__/auth/iframe",uR="emulator/auth/iframe",cR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fR(s){const e=s.config;_e(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Dm(e,uR):`https://${s.config.authDomain}/${lR}`,r={apiKey:e.apiKey,appName:s.name,v:oo},l=hR.get(s.config.apiHost);l&&(r.eid=l);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Ql(r).slice(1)}`}async function dR(s){const e=await aR(s),n=fi().gapi;return _e(n,s,"internal-error"),e.open({where:document.body,url:fR(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cR,dontclear:!0},r=>new Promise(async(l,c)=>{await r.restyle({setHideOnLeave:!1});const f=hi(s,"network-request-failed"),p=fi().setTimeout(()=>{c(f)},oR.get());function y(){fi().clearTimeout(p),l(r)}r.ping(y).then(y,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pR=500,gR=600,yR="_blank",_R="http://localhost";class gv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vR(s,e,n,r=pR,l=gR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...mR,width:r.toString(),height:l.toString(),top:c,left:f},g=Zt().toLowerCase();n&&(p=$E(g)?yR:n),YE(g)&&(e=e||_R,y.scrollbars="yes");const T=Object.entries(y).reduce((D,[G,J])=>`${D}${G}=${J},`,"");if(qw(g)&&p!=="_self")return ER(e||"",p),new gv(null);const R=window.open(e||"",p,T);_e(R,s,"popup-blocked");try{R.focus()}catch{}return new gv(R)}function ER(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="__/auth/handler",bR="emulator/auth/handler",AR=encodeURIComponent("fac");async function yv(s,e,n,r,l,c){_e(s.config.authDomain,s,"auth-domain-config-required"),_e(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:oo,eventId:l};if(e instanceof aT){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",oS(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,R]of Object.entries({}))f[T]=R}if(e instanceof Xl){const T=e.getScopes().filter(R=>R!=="");T.length>0&&(f.scopes=T.join(","))}s.tenantId&&(f.tid=s.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const y=await s._getAppCheckToken(),g=y?`#${AR}=${encodeURIComponent(y)}`:"";return`${SR(s)}?${Ql(p).slice(1)}${g}`}function SR({config:s}){return s.emulator?Dm(s,bR):`https://${s.authDomain}/${TR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="webStorageSupport";class wR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dT,this._completeRedirectFn=X1,this._overrideRedirectResult=Q1}async _openPopup(e,n,r,l){Fi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await yv(e,n,r,nm(),l);return vR(e,c,Pm())}async _openRedirect(e,n,r,l){await this._originValidation(e);const c=await yv(e,n,r,nm(),l);return C1(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Fi(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dR(e),r=new Z1(e);return n.register("authEvent",l=>(_e(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hd,{type:Hd},l=>{const c=l?.[0]?.[Hd];c!==void 0&&n(!!c),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tT()||XE()||xm()}}const RR=wR;var _v="@firebase/auth",vv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NR(s){Ja(new qr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;_e(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nT(s)},g=new Kw(r,l,c,y);return i1(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ja(new qr("auth-internal",e=>{const n=Qr(e.getProvider("auth").getImmediate());return(r=>new IR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(_v,vv,CR(s)),zs(_v,vv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=300,OR=OE("authIdTokenMaxAge")||DR;let Ev=null;const xR=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>OR)return;const l=n?.token;Ev!==l&&(Ev=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function VR(s=UE()){const e=Cm(s,"auth");if(e.isInitialized())return e.getImmediate();const n=n1(s,{popupRedirectResolver:RR,persistence:[U1,w1,dT]}),r=OE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const f=xR(c.toString());T1(n,f,()=>f(n.currentUser)),E1(n,p=>f(p))}}const l=NE("auth");return l&&s1(n,`http://${l}`),n}function MR(){return document.getElementsByTagName("head")?.[0]??document}Yw({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const c=hi("internal-error");c.customData=l,n(c)},r.type="text/javascript",r.charset="UTF-8",MR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NR("Browser");var Tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qs,ET;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,A){function C(){}C.prototype=A.prototype,V.F=A.prototype,V.prototype=new C,V.prototype.constructor=V,V.D=function(P,O,x){for(var I=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)I[Ne-2]=arguments[Ne];return A.prototype[O].apply(P,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(V,A,C){C||(C=0);const P=Array(16);if(typeof A=="string")for(var O=0;O<16;++O)P[O]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(O=0;O<16;++O)P[O]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=V.g[0],C=V.g[1],O=V.g[2];let x=V.g[3],I;I=A+(x^C&(O^x))+P[0]+3614090360&4294967295,A=C+(I<<7&4294967295|I>>>25),I=x+(O^A&(C^O))+P[1]+3905402710&4294967295,x=A+(I<<12&4294967295|I>>>20),I=O+(C^x&(A^C))+P[2]+606105819&4294967295,O=x+(I<<17&4294967295|I>>>15),I=C+(A^O&(x^A))+P[3]+3250441966&4294967295,C=O+(I<<22&4294967295|I>>>10),I=A+(x^C&(O^x))+P[4]+4118548399&4294967295,A=C+(I<<7&4294967295|I>>>25),I=x+(O^A&(C^O))+P[5]+1200080426&4294967295,x=A+(I<<12&4294967295|I>>>20),I=O+(C^x&(A^C))+P[6]+2821735955&4294967295,O=x+(I<<17&4294967295|I>>>15),I=C+(A^O&(x^A))+P[7]+4249261313&4294967295,C=O+(I<<22&4294967295|I>>>10),I=A+(x^C&(O^x))+P[8]+1770035416&4294967295,A=C+(I<<7&4294967295|I>>>25),I=x+(O^A&(C^O))+P[9]+2336552879&4294967295,x=A+(I<<12&4294967295|I>>>20),I=O+(C^x&(A^C))+P[10]+4294925233&4294967295,O=x+(I<<17&4294967295|I>>>15),I=C+(A^O&(x^A))+P[11]+2304563134&4294967295,C=O+(I<<22&4294967295|I>>>10),I=A+(x^C&(O^x))+P[12]+1804603682&4294967295,A=C+(I<<7&4294967295|I>>>25),I=x+(O^A&(C^O))+P[13]+4254626195&4294967295,x=A+(I<<12&4294967295|I>>>20),I=O+(C^x&(A^C))+P[14]+2792965006&4294967295,O=x+(I<<17&4294967295|I>>>15),I=C+(A^O&(x^A))+P[15]+1236535329&4294967295,C=O+(I<<22&4294967295|I>>>10),I=A+(O^x&(C^O))+P[1]+4129170786&4294967295,A=C+(I<<5&4294967295|I>>>27),I=x+(C^O&(A^C))+P[6]+3225465664&4294967295,x=A+(I<<9&4294967295|I>>>23),I=O+(A^C&(x^A))+P[11]+643717713&4294967295,O=x+(I<<14&4294967295|I>>>18),I=C+(x^A&(O^x))+P[0]+3921069994&4294967295,C=O+(I<<20&4294967295|I>>>12),I=A+(O^x&(C^O))+P[5]+3593408605&4294967295,A=C+(I<<5&4294967295|I>>>27),I=x+(C^O&(A^C))+P[10]+38016083&4294967295,x=A+(I<<9&4294967295|I>>>23),I=O+(A^C&(x^A))+P[15]+3634488961&4294967295,O=x+(I<<14&4294967295|I>>>18),I=C+(x^A&(O^x))+P[4]+3889429448&4294967295,C=O+(I<<20&4294967295|I>>>12),I=A+(O^x&(C^O))+P[9]+568446438&4294967295,A=C+(I<<5&4294967295|I>>>27),I=x+(C^O&(A^C))+P[14]+3275163606&4294967295,x=A+(I<<9&4294967295|I>>>23),I=O+(A^C&(x^A))+P[3]+4107603335&4294967295,O=x+(I<<14&4294967295|I>>>18),I=C+(x^A&(O^x))+P[8]+1163531501&4294967295,C=O+(I<<20&4294967295|I>>>12),I=A+(O^x&(C^O))+P[13]+2850285829&4294967295,A=C+(I<<5&4294967295|I>>>27),I=x+(C^O&(A^C))+P[2]+4243563512&4294967295,x=A+(I<<9&4294967295|I>>>23),I=O+(A^C&(x^A))+P[7]+1735328473&4294967295,O=x+(I<<14&4294967295|I>>>18),I=C+(x^A&(O^x))+P[12]+2368359562&4294967295,C=O+(I<<20&4294967295|I>>>12),I=A+(C^O^x)+P[5]+4294588738&4294967295,A=C+(I<<4&4294967295|I>>>28),I=x+(A^C^O)+P[8]+2272392833&4294967295,x=A+(I<<11&4294967295|I>>>21),I=O+(x^A^C)+P[11]+1839030562&4294967295,O=x+(I<<16&4294967295|I>>>16),I=C+(O^x^A)+P[14]+4259657740&4294967295,C=O+(I<<23&4294967295|I>>>9),I=A+(C^O^x)+P[1]+2763975236&4294967295,A=C+(I<<4&4294967295|I>>>28),I=x+(A^C^O)+P[4]+1272893353&4294967295,x=A+(I<<11&4294967295|I>>>21),I=O+(x^A^C)+P[7]+4139469664&4294967295,O=x+(I<<16&4294967295|I>>>16),I=C+(O^x^A)+P[10]+3200236656&4294967295,C=O+(I<<23&4294967295|I>>>9),I=A+(C^O^x)+P[13]+681279174&4294967295,A=C+(I<<4&4294967295|I>>>28),I=x+(A^C^O)+P[0]+3936430074&4294967295,x=A+(I<<11&4294967295|I>>>21),I=O+(x^A^C)+P[3]+3572445317&4294967295,O=x+(I<<16&4294967295|I>>>16),I=C+(O^x^A)+P[6]+76029189&4294967295,C=O+(I<<23&4294967295|I>>>9),I=A+(C^O^x)+P[9]+3654602809&4294967295,A=C+(I<<4&4294967295|I>>>28),I=x+(A^C^O)+P[12]+3873151461&4294967295,x=A+(I<<11&4294967295|I>>>21),I=O+(x^A^C)+P[15]+530742520&4294967295,O=x+(I<<16&4294967295|I>>>16),I=C+(O^x^A)+P[2]+3299628645&4294967295,C=O+(I<<23&4294967295|I>>>9),I=A+(O^(C|~x))+P[0]+4096336452&4294967295,A=C+(I<<6&4294967295|I>>>26),I=x+(C^(A|~O))+P[7]+1126891415&4294967295,x=A+(I<<10&4294967295|I>>>22),I=O+(A^(x|~C))+P[14]+2878612391&4294967295,O=x+(I<<15&4294967295|I>>>17),I=C+(x^(O|~A))+P[5]+4237533241&4294967295,C=O+(I<<21&4294967295|I>>>11),I=A+(O^(C|~x))+P[12]+1700485571&4294967295,A=C+(I<<6&4294967295|I>>>26),I=x+(C^(A|~O))+P[3]+2399980690&4294967295,x=A+(I<<10&4294967295|I>>>22),I=O+(A^(x|~C))+P[10]+4293915773&4294967295,O=x+(I<<15&4294967295|I>>>17),I=C+(x^(O|~A))+P[1]+2240044497&4294967295,C=O+(I<<21&4294967295|I>>>11),I=A+(O^(C|~x))+P[8]+1873313359&4294967295,A=C+(I<<6&4294967295|I>>>26),I=x+(C^(A|~O))+P[15]+4264355552&4294967295,x=A+(I<<10&4294967295|I>>>22),I=O+(A^(x|~C))+P[6]+2734768916&4294967295,O=x+(I<<15&4294967295|I>>>17),I=C+(x^(O|~A))+P[13]+1309151649&4294967295,C=O+(I<<21&4294967295|I>>>11),I=A+(O^(C|~x))+P[4]+4149444226&4294967295,A=C+(I<<6&4294967295|I>>>26),I=x+(C^(A|~O))+P[11]+3174756917&4294967295,x=A+(I<<10&4294967295|I>>>22),I=O+(A^(x|~C))+P[2]+718787259&4294967295,O=x+(I<<15&4294967295|I>>>17),I=C+(x^(O|~A))+P[9]+3951481745&4294967295,V.g[0]=V.g[0]+A&4294967295,V.g[1]=V.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,V.g[2]=V.g[2]+O&4294967295,V.g[3]=V.g[3]+x&4294967295}r.prototype.v=function(V,A){A===void 0&&(A=V.length);const C=A-this.blockSize,P=this.C;let O=this.h,x=0;for(;x<A;){if(O==0)for(;x<=C;)l(this,V,x),x+=this.blockSize;if(typeof V=="string"){for(;x<A;)if(P[O++]=V.charCodeAt(x++),O==this.blockSize){l(this,P),O=0;break}}else for(;x<A;)if(P[O++]=V[x++],O==this.blockSize){l(this,P),O=0;break}}this.h=O,this.o+=A},r.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var A=1;A<V.length-8;++A)V[A]=0;A=this.o*8;for(var C=V.length-8;C<V.length;++C)V[C]=A&255,A/=256;for(this.v(V),V=Array(16),A=0,C=0;C<4;++C)for(let P=0;P<32;P+=8)V[A++]=this.g[C]>>>P&255;return V};function c(V,A){var C=p;return Object.prototype.hasOwnProperty.call(C,V)?C[V]:C[V]=A(V)}function f(V,A){this.h=A;const C=[];let P=!0;for(let O=V.length-1;O>=0;O--){const x=V[O]|0;P&&x==A||(C[O]=x,P=!1)}this.g=C}var p={};function y(V){return-128<=V&&V<128?c(V,function(A){return new f([A|0],A<0?-1:0)}):new f([V|0],V<0?-1:0)}function g(V){if(isNaN(V)||!isFinite(V))return R;if(V<0)return Y(g(-V));const A=[];let C=1;for(let P=0;V>=C;P++)A[P]=V/C|0,C*=4294967296;return new f(A,0)}function T(V,A){if(V.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(V.charAt(0)=="-")return Y(T(V.substring(1),A));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(A,8));let P=R;for(let x=0;x<V.length;x+=8){var O=Math.min(8,V.length-x);const I=parseInt(V.substring(x,x+O),A);O<8?(O=g(Math.pow(A,O)),P=P.j(O).add(g(I))):(P=P.j(C),P=P.add(g(I)))}return P}var R=y(0),D=y(1),G=y(16777216);s=f.prototype,s.m=function(){if(re(this))return-Y(this).m();let V=0,A=1;for(let C=0;C<this.g.length;C++){const P=this.i(C);V+=(P>=0?P:4294967296+P)*A,A*=4294967296}return V},s.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(J(this))return"0";if(re(this))return"-"+Y(this).toString(V);const A=g(Math.pow(V,6));var C=this;let P="";for(;;){const O=Ae(C,A).g;C=le(C,O.j(A));let x=((C.g.length>0?C.g[0]:C.h)>>>0).toString(V);if(C=O,J(C))return x+P;for(;x.length<6;)x="0"+x;P=x+P}},s.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function J(V){if(V.h!=0)return!1;for(let A=0;A<V.g.length;A++)if(V.g[A]!=0)return!1;return!0}function re(V){return V.h==-1}s.l=function(V){return V=le(this,V),re(V)?-1:J(V)?0:1};function Y(V){const A=V.g.length,C=[];for(let P=0;P<A;P++)C[P]=~V.g[P];return new f(C,~V.h).add(D)}s.abs=function(){return re(this)?Y(this):this},s.add=function(V){const A=Math.max(this.g.length,V.g.length),C=[];let P=0;for(let O=0;O<=A;O++){let x=P+(this.i(O)&65535)+(V.i(O)&65535),I=(x>>>16)+(this.i(O)>>>16)+(V.i(O)>>>16);P=I>>>16,x&=65535,I&=65535,C[O]=I<<16|x}return new f(C,C[C.length-1]&-2147483648?-1:0)};function le(V,A){return V.add(Y(A))}s.j=function(V){if(J(this)||J(V))return R;if(re(this))return re(V)?Y(this).j(Y(V)):Y(Y(this).j(V));if(re(V))return Y(this.j(Y(V)));if(this.l(G)<0&&V.l(G)<0)return g(this.m()*V.m());const A=this.g.length+V.g.length,C=[];for(var P=0;P<2*A;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(let O=0;O<V.g.length;O++){const x=this.i(P)>>>16,I=this.i(P)&65535,Ne=V.i(O)>>>16,Me=V.i(O)&65535;C[2*P+2*O]+=I*Me,de(C,2*P+2*O),C[2*P+2*O+1]+=x*Me,de(C,2*P+2*O+1),C[2*P+2*O+1]+=I*Ne,de(C,2*P+2*O+1),C[2*P+2*O+2]+=x*Ne,de(C,2*P+2*O+2)}for(V=0;V<A;V++)C[V]=C[2*V+1]<<16|C[2*V];for(V=A;V<2*A;V++)C[V]=0;return new f(C,0)};function de(V,A){for(;(V[A]&65535)!=V[A];)V[A+1]+=V[A]>>>16,V[A]&=65535,A++}function K(V,A){this.g=V,this.h=A}function Ae(V,A){if(J(A))throw Error("division by zero");if(J(V))return new K(R,R);if(re(V))return A=Ae(Y(V),A),new K(Y(A.g),Y(A.h));if(re(A))return A=Ae(V,Y(A)),new K(Y(A.g),A.h);if(V.g.length>30){if(re(V)||re(A))throw Error("slowDivide_ only works with positive integers.");for(var C=D,P=A;P.l(V)<=0;)C=se(C),P=se(P);var O=be(C,1),x=be(P,1);for(P=be(P,2),C=be(C,2);!J(P);){var I=x.add(P);I.l(V)<=0&&(O=O.add(C),x=I),P=be(P,1),C=be(C,1)}return A=le(V,O.j(A)),new K(O,A)}for(O=R;V.l(A)>=0;){for(C=Math.max(1,Math.floor(V.m()/A.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),x=g(C),I=x.j(A);re(I)||I.l(V)>0;)C-=P,x=g(C),I=x.j(A);J(x)&&(x=D),O=O.add(x),V=le(V,I)}return new K(O,V)}s.B=function(V){return Ae(this,V).h},s.and=function(V){const A=Math.max(this.g.length,V.g.length),C=[];for(let P=0;P<A;P++)C[P]=this.i(P)&V.i(P);return new f(C,this.h&V.h)},s.or=function(V){const A=Math.max(this.g.length,V.g.length),C=[];for(let P=0;P<A;P++)C[P]=this.i(P)|V.i(P);return new f(C,this.h|V.h)},s.xor=function(V){const A=Math.max(this.g.length,V.g.length),C=[];for(let P=0;P<A;P++)C[P]=this.i(P)^V.i(P);return new f(C,this.h^V.h)};function se(V){const A=V.g.length+1,C=[];for(let P=0;P<A;P++)C[P]=V.i(P)<<1|V.i(P-1)>>>31;return new f(C,V.h)}function be(V,A){const C=A>>5;A%=32;const P=V.g.length-C,O=[];for(let x=0;x<P;x++)O[x]=A>0?V.i(x+C)>>>A|V.i(x+C+1)<<32-A:V.i(x+C);return new f(O,V.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ET=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=T,qs=f}).apply(typeof Tv<"u"?Tv:typeof self<"u"?self:typeof window<"u"?window:{});var Rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TT,Sl,bT,Pc,am,AT,ST,wT;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rc=="object"&&Rc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function l(u,m){if(m)e:{var _=r;u=u.split(".");for(var b=0;b<u.length-1;b++){var L=u[b];if(!(L in _))break e;_=_[L]}u=u[u.length-1],b=_[u],m=m(b),m!=b&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(m){var _=[],b;for(b in m)Object.prototype.hasOwnProperty.call(m,b)&&_.push([b,m[b]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function y(u,m,_){return u.call.apply(u.bind,arguments)}function g(u,m,_){return g=y,g.apply(null,arguments)}function T(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function R(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(b,L,H){for(var ae=Array(arguments.length-2),we=2;we<arguments.length;we++)ae[we-2]=arguments[we];return m.prototype[L].apply(b,ae)}}var D=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function G(u){const m=u.length;if(m>0){const _=Array(m);for(let b=0;b<m;b++)_[b]=u[b];return _}return[]}function J(u,m){for(let b=1;b<arguments.length;b++){const L=arguments[b];var _=typeof L;if(_=_!="object"?_:L?Array.isArray(L)?"array":_:"null",_=="array"||_=="object"&&typeof L.length=="number"){_=u.length||0;const H=L.length||0;u.length=_+H;for(let ae=0;ae<H;ae++)u[_+ae]=L[ae]}else u.push(L)}}class re{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Y(u){f.setTimeout(()=>{throw u},0)}function le(){var u=V;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class de{constructor(){this.h=this.g=null}add(m,_){const b=K.get();b.set(m,_),this.h?this.h.next=b:this.g=b,this.h=b}}var K=new re(()=>new Ae,u=>u.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let se,be=!1,V=new de,A=()=>{const u=Promise.resolve(void 0);se=()=>{u.then(C)}};function C(){for(var u;u=le();){try{u.h.call(u.g)}catch(_){Y(_)}var m=K;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}be=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var x=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,m),f.removeEventListener("test",_,m)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function Ne(u,m){O.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}R(Ne,O),Ne.prototype.init=function(u,m){const _=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),F=0;function ne(u,m,_,b,L){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!b,this.ha=L,this.key=++F,this.da=this.fa=!1}function ce(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ie(u,m,_){for(const b in u)m.call(_,u[b],b,u)}function w(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function z(u){const m={};for(const _ in u)m[_]=u[_];return m}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(u,m){let _,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(_ in b)u[_]=b[_];for(let H=0;H<te.length;H++)_=te[H],Object.prototype.hasOwnProperty.call(b,_)&&(u[_]=b[_])}}function he(u){this.src=u,this.g={},this.h=0}he.prototype.add=function(u,m,_,b,L){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const ae=Ee(u,m,b,L);return ae>-1?(m=u[ae],_||(m.fa=!1)):(m=new ne(m,this.src,H,!!b,L),m.fa=_,u.push(m)),m};function Ce(u,m){const _=m.type;if(_ in u.g){var b=u.g[_],L=Array.prototype.indexOf.call(b,m,void 0),H;(H=L>=0)&&Array.prototype.splice.call(b,L,1),H&&(ce(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ee(u,m,_,b){for(let L=0;L<u.length;++L){const H=u[L];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==b)return L}return-1}var kt="closure_lm_"+(Math.random()*1e6|0),Ke={};function kn(u,m,_,b,L){if(Array.isArray(m)){for(let H=0;H<m.length;H++)kn(u,m[H],_,b,L);return null}return _=au(_),u&&u[Me]?u.J(m,_,p(b)?!!b.capture:!1,L):mo(u,m,_,!1,b,L)}function mo(u,m,_,b,L,H){if(!m)throw Error("Invalid event type");const ae=p(L)?!!L.capture:!!L;let we=po(u);if(we||(u[kt]=we=new he(u)),_=we.add(m,_,b,ae,H),_.proxy)return _;if(b=Zr(),_.proxy=b,b.src=u,b.listener=_,u.addEventListener)x||(L=ae),L===void 0&&(L=!1),u.addEventListener(m.toString(),b,L);else if(u.attachEvent)u.attachEvent(Jr(m.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Zr(){function u(_){return m.call(u.src,u.listener,_)}const m=Dh;return u}function Wr(u,m,_,b,L){if(Array.isArray(m))for(var H=0;H<m.length;H++)Wr(u,m[H],_,b,L);else b=p(b)?!!b.capture:!!b,_=au(_),u&&u[Me]?(u=u.i,H=String(m).toString(),H in u.g&&(m=u.g[H],_=Ee(m,_,b,L),_>-1&&(ce(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[H],u.h--)))):u&&(u=po(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ee(m,_,b,L)),(_=u>-1?m[u]:null)&&Js(_))}function Js(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Me])Ce(m.i,u);else{var _=u.type,b=u.proxy;m.removeEventListener?m.removeEventListener(_,b,u.capture):m.detachEvent?m.detachEvent(Jr(_),b):m.addListener&&m.removeListener&&m.removeListener(b),(_=po(m))?(Ce(_,u),_.h==0&&(_.src=null,m[kt]=null)):ce(u)}}}function Jr(u){return u in Ke?Ke[u]:Ke[u]="on"+u}function Dh(u,m){if(u.da)u=!0;else{m=new Ne(m,this);const _=u.listener,b=u.ha||u.src;u.fa&&Js(u),u=_.call(b,m)}return u}function po(u){return u=u[kt],u instanceof he?u:null}var sn="__closure_events_fn_"+(Math.random()*1e9>>>0);function au(u){return typeof u=="function"?u:(u[sn]||(u[sn]=function(m){return u.handleEvent(m)}),u[sn])}function St(){P.call(this),this.i=new he(this),this.M=this,this.G=null}R(St,P),St.prototype[Me]=!0,St.prototype.removeEventListener=function(u,m,_,b){Wr(this,u,m,_,b)};function Nt(u,m){var _,b=u.G;if(b)for(_=[];b;b=b.G)_.push(b);if(u=u.M,b=m.type||m,typeof m=="string")m=new O(m,u);else if(m instanceof O)m.target=m.target||u;else{var L=m;m=new O(b,u),ee(m,L)}L=!0;let H,ae;if(_)for(ae=_.length-1;ae>=0;ae--)H=m.g=_[ae],L=_i(H,b,!0,m)&&L;if(H=m.g=u,L=_i(H,b,!0,m)&&L,L=_i(H,b,!1,m)&&L,_)for(ae=0;ae<_.length;ae++)H=m.g=_[ae],L=_i(H,b,!1,m)&&L}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let b=0;b<_.length;b++)ce(_[b]);delete u.g[m],u.h--}}this.G=null},St.prototype.J=function(u,m,_,b){return this.i.add(String(u),m,!1,_,b)},St.prototype.K=function(u,m,_,b){return this.i.add(String(u),m,!0,_,b)};function _i(u,m,_,b){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let H=0;H<m.length;++H){const ae=m[H];if(ae&&!ae.da&&ae.capture==_){const we=ae.listener,nt=ae.ha||ae.src;ae.fa&&Ce(u.i,ae),L=we.call(nt,b)!==!1&&L}}return L&&!b.defaultPrevented}function Oh(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(u,m||0)}function go(u){u.g=Oh(()=>{u.g=null,u.i&&(u.i=!1,go(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class xh extends P{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:go(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(u){P.call(this),this.h=u,this.g={}}R(er,P);var Xi=[];function Ft(u){ie(u.g,function(m,_){this.g.hasOwnProperty(_)&&Js(m)},u),u.g={}}er.prototype.N=function(){er.Z.N.call(this),Ft(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=f.JSON.stringify,Wt=f.JSON.parse,Vh=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function ou(){}function lu(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $i(){O.call(this,"d")}R($i,O);function Un(){O.call(this,"c")}R(Un,O);var An={},Zi=null;function ea(){return Zi=Zi||new St}An.Ia="serverreachability";function yo(u){O.call(this,An.Ia,u)}R(yo,O);function Wi(u){const m=ea();Nt(m,new yo(m))}An.STAT_EVENT="statevent";function ta(u,m){O.call(this,An.STAT_EVENT,u),this.stat=m}R(ta,O);function ct(u){const m=ea();Nt(m,new ta(m,u))}An.Ja="timingevent";function uu(u,m){O.call(this,An.Ja,u),this.size=m}R(uu,O);function Ji(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function es(){this.g=!0}es.prototype.ua=function(){this.g=!1};function _o(u,m,_,b,L,H){u.info(function(){if(u.g)if(H){var ae="",we=H.split("&");for(let Fe=0;Fe<we.length;Fe++){var nt=we[Fe].split("=");if(nt.length>1){const dt=nt[0];nt=nt[1];const hn=dt.split("_");ae=hn.length>=2&&hn[1]=="type"?ae+(dt+"="+nt+"&"):ae+(dt+"=redacted&")}}}else ae=null;else ae=H;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+m+`
`+_+`
`+ae})}function vo(u,m,_,b,L,H,ae){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+m+`
`+_+`
`+H+" "+ae})}function vi(u,m,_,b){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Zn(u,_)+(b?" "+b:"")})}function Mh(u,m){u.info(function(){return"TIMEOUT: "+m})}es.prototype.info=function(){};function Zn(u,m){if(!u.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var _=H[u];if(!(_.length<2)){var b=_[1];if(Array.isArray(b)&&!(b.length<1)){var L=b[0];if(L!="noop"&&L!="stop"&&L!="close")for(let ae=1;ae<b.length;ae++)b[ae]=""}}}}return bn(H)}catch{return m}}var ht={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ut={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ei;function tr(){}R(tr,ou),tr.prototype.g=function(){return new XMLHttpRequest},Ei=new tr;function nr(u){return encodeURIComponent(String(u))}function Ph(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function Ln(u,m,_,b){this.j=u,this.i=m,this.l=_,this.S=b||1,this.V=new er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ts}function ts(){this.i=null,this.g="",this.h=!1}var na={},Wn={};function Jn(u,m,_){u.M=1,u.A=bi(rt(m)),u.u=_,u.R=!0,ns(u,null)}function ns(u,m){u.F=Date.now(),ir(u),u.B=rt(u.A);var _=u.B,b=u.S;Array.isArray(b)||(b=[String(b)]),du(_.i,"t",b),u.C=0,_=u.j.L,u.h=new ts,u.g=fa(u.j,_?m:null,!u.u),u.P>0&&(u.O=new xh(g(u.Y,u,u.g),u.P)),m=u.V,_=u.g,b=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(Xi[0]=L.toString()),L=Xi);for(let H=0;H<L.length;H++){const ae=kn(_,L[H],b||m.handleEvent,!1,m.h||m);if(!ae)break;m.g[ae.key]=ae}m=u.J?z(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Wi(),_o(u.i,u.v,u.B,u.l,u.S,u.u)}Ln.prototype.ba=function(u){u=u.target;const m=this.O;m&&Gt(u)==3?m.j():this.Y(u)},Ln.prototype.Y=function(u){try{if(u==this.g)e:{const we=Gt(this.g),nt=this.g.ya(),Fe=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||mr(this.g)))){this.K||we!=4||nt==7||(nt==8||Fe<=0?Wi(3):Wi(2)),ti(this);var m=this.g.ca();this.X=m;var _=is(this);if(this.o=m==200,vo(this.i,this.v,this.B,this.l,this.S,we,m),this.o){if(this.U&&!this.L){t:{if(this.g){var b,L=this.g;if((b=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(b)){var H=b;break t}}H=null}if(u=H)vi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ia(this,u);else{this.o=!1,this.m=3,ct(12),ni(this),sr(this);break e}}if(this.R){u=!0;let dt;for(;!this.K&&this.C<_.length;)if(dt=cu(this,_),dt==Wn){we==4&&(this.m=4,ct(14),u=!1),vi(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==na){this.m=4,ct(15),vi(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else vi(this.i,this.l,dt,null),ia(this,dt);if(ft(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||_.length!=0||this.h.h||(this.m=1,ct(16),u=!1),this.o=this.o&&u,!u)vi(this.i,this.l,_,"[Invalid Chunked Response]"),ni(this),sr(this);else if(_.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),No(ae),ae.P=!0,ct(11))}}else vi(this.i,this.l,_,null),ia(this,_);we==4&&ni(this),this.o&&!this.K&&(we==4?Do(this.j,this):(this.o=!1,ir(this)))}else pr(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),ni(this),sr(this)}}}catch{}finally{}};function is(u){if(!ft(u))return u.g.la();const m=mr(u.g);if(m==="")return"";let _="";const b=m.length,L=Gt(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ni(u),sr(u),"";u.h.i=new f.TextDecoder}for(let H=0;H<b;H++)u.h.h=!0,_+=u.h.i.decode(m[H],{stream:!(L&&H==b-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function ft(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function cu(u,m){var _=u.C,b=m.indexOf(`
`,_);return b==-1?Wn:(_=Number(m.substring(_,b)),isNaN(_)?na:(b+=1,b+_>m.length?Wn:(m=m.slice(b,b+_),u.C=b+_,m)))}Ln.prototype.cancel=function(){this.K=!0,ni(this)};function ir(u){u.T=Date.now()+u.H,ei(u,u.H)}function ei(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ji(g(u.aa,u),m)}function ti(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Ln.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Mh(this.i,this.B),this.M!=2&&(Wi(),ct(17)),ni(this),this.m=2,sr(this)):ei(this,this.T-u)};function sr(u){u.j.I==0||u.K||Do(u.j,u)}function ni(u){ti(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ft(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function ia(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||or(_.h,u))){if(!u.L&&or(_.h,u)&&_.I==3){try{var b=_.Ba.g.parse(m)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)ha(_),ii(_);else break e;Co(_),ct(18)}}else _.xa=L[1],0<_.xa-_.K&&L[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Ji(g(_.Va,_),6e3));Sn(_.h)<=1&&_.ta&&(_.ta=void 0)}else wi(_,11)}else if((u.L||_.g==u)&&ha(_),!I(m))for(L=_.Ba.g.parse(m),m=0;m<L.length;m++){let Fe=L[m];const dt=Fe[0];if(!(dt<=_.K))if(_.K=dt,Fe=Fe[1],_.I==2)if(Fe[0]=="c"){_.M=Fe[1],_.ba=Fe[2];const hn=Fe[3];hn!=null&&(_.ka=hn,_.j.info("VER="+_.ka));const si=Fe[4];si!=null&&(_.za=si,_.j.info("SVER="+_.za));const qn=Fe[5];qn!=null&&typeof qn=="number"&&qn>0&&(b=1.5*qn,_.O=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const Bn=u.g;if(Bn){const Hn=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hn){var H=b.h;H.g||Hn.indexOf("spdy")==-1&&Hn.indexOf("quic")==-1&&Hn.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(sa(H,H.h),H.h=null))}if(b.G){const xo=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;xo&&(b.wa=xo,Ye(b.J,b.G,xo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),b=_;var ae=u;if(b.na=bu(b,b.L?b.ba:null,b.W),ae.L){Ti(b.h,ae);var we=ae,nt=b.O;nt&&(we.H=nt),we.D&&(ti(we),ir(we)),b.g=ae}else _u(b);_.i.length>0&&vr(_)}else Fe[0]!="stop"&&Fe[0]!="close"||wi(_,7);else _.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?wi(_,7):yr(_):Fe[0]!="noop"&&_.l&&_.l.qa(Fe),_.A=0)}}Wi(4)}catch{}}var kh=class{constructor(u,m){this.g=u,this.map=m}};function rr(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ar(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Sn(u){return u.h?1:u.g?u.g.size:0}function or(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function sa(u,m){u.g?u.g.add(m):u.h=m}function Ti(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}rr.prototype.cancel=function(){if(this.i=ra(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ra(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return G(u.i)}var aa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uh(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const b=u[_].indexOf("=");let L,H=null;b>=0?(L=u[_].substring(0,b),H=u[_].substring(b+1)):L=u[_],m(L,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function jn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof jn?(this.l=u.l,ss(this,u.j),this.o=u.o,this.g=u.g,lr(this,u.u),this.h=u.h,rs(this,mu(u.i)),this.m=u.m):u&&(m=String(u).match(aa))?(this.l=!1,ss(this,m[1]||"",!0),this.o=ur(m[2]||""),this.g=ur(m[3]||"",!0),lr(this,m[4]),this.h=ur(m[5]||"",!0),rs(this,m[6]||"",!0),this.m=ur(m[7]||"")):(this.l=!1,this.i=new wn(null,this.l))}jn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Dt(m,To,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Dt(m,To,!0),"@"),u.push(nr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Dt(_,_.charAt(0)=="/"?as:bo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Dt(_,fu)),u.join("")},jn.prototype.resolve=function(u){const m=rt(this);let _=!!u.j;_?ss(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var b=u.h;if(_)lr(m,u.u);else if(_=!!u.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var L=m.h.lastIndexOf("/");L!=-1&&(b=m.h.slice(0,L+1)+b)}if(L=b,L==".."||L==".")b="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){b=L.lastIndexOf("/",0)==0,L=L.split("/");const H=[];for(let ae=0;ae<L.length;){const we=L[ae++];we=="."?b&&ae==L.length&&H.push(""):we==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),b&&ae==L.length&&H.push("")):(H.push(we),b=!0)}b=H.join("/")}else b=L}return _?m.h=b:_=u.i.toString()!=="",_?rs(m,mu(u.i)):_=!!u.m,_&&(m.m=u.m),m};function rt(u){return new jn(u)}function ss(u,m,_){u.j=_?ur(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function lr(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function rs(u,m,_){m instanceof wn?(u.i=m,wo(u.i,u.l)):(_||(m=Dt(m,hu)),u.i=new wn(m,u.l))}function Ye(u,m,_){u.i.set(m,_)}function bi(u){return Ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ur(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Dt(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Eo),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Eo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var To=/[#\/\?@]/g,bo=/[#\?:]/g,as=/[#\?]/g,hu=/[#\?@]/g,fu=/#/g;function wn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Ai(u){u.g||(u.g=new Map,u.h=0,u.i&&Uh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}s=wn.prototype,s.add=function(u,m){Ai(this),this.i=null,u=zn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Ao(u,m){Ai(u),m=zn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function So(u,m){return Ai(u),m=zn(u,m),u.g.has(m)}s.forEach=function(u,m){Ai(this),this.g.forEach(function(_,b){_.forEach(function(L){u.call(m,L,b,this)},this)},this)};function oa(u,m){Ai(u);let _=[];if(typeof m=="string")So(u,m)&&(_=_.concat(u.g.get(zn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}s.set=function(u,m){return Ai(this),this.i=null,u=zn(this,u),So(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=oa(this,u),u.length>0?String(u[0]):m):m};function du(u,m,_){Ao(u,m),_.length>0&&(u.i=null,u.g.set(zn(u,m),G(_)),u.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let b=0;b<m.length;b++){var _=m[b];const L=nr(_);_=oa(this,_);for(let H=0;H<_.length;H++){let ae=L;_[H]!==""&&(ae+="="+nr(_[H])),u.push(ae)}}return this.i=u.join("&")};function mu(u){const m=new wn;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function zn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function wo(u,m){m&&!u.j&&(Ai(u),u.i=null,u.g.forEach(function(_,b){const L=b.toLowerCase();b!=L&&(Ao(this,b),du(this,L,_))},u)),u.j=m}function Ro(u,m){const _=new es;if(f.Image){const b=new Image;b.onload=T(Jt,_,"TestLoadImage: loaded",!0,m,b),b.onerror=T(Jt,_,"TestLoadImage: error",!1,m,b),b.onabort=T(Jt,_,"TestLoadImage: abort",!1,m,b),b.ontimeout=T(Jt,_,"TestLoadImage: timeout",!1,m,b),f.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else m(!1)}function os(u,m){const _=new es,b=new AbortController,L=setTimeout(()=>{b.abort(),Jt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:b.signal}).then(H=>{clearTimeout(L),H.ok?Jt(_,"TestPingServer: ok",!0,m):Jt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Jt(_,"TestPingServer: error",!1,m)})}function Jt(u,m,_,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(_)}catch{}}function pu(){this.g=new Vh}function cr(u){this.i=u.Sb||null,this.h=u.ab||!1}R(cr,ou),cr.prototype.g=function(){return new hr(this.i,this.h)};function hr(u,m){St.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}R(hr,St),s=hr.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Si(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,en(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Si(this)),this.g&&(this.readyState=3,Si(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ls(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ls(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?en(this):Si(this),this.readyState==3&&ls(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,en(this))},s.Na=function(u){this.g&&(this.response=u,en(this))},s.ga=function(){this.g&&en(this)};function en(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Si(u)}s.setRequestHeader=function(u,m){this.A.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Si(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function us(u){let m="";return ie(u,function(_,b){m+=b,m+=":",m+=_,m+=`\r
`}),m}function Rn(u,m,_){e:{for(b in _){var b=!1;break e}b=!0}b||(_=us(_),typeof u=="string"?_!=null&&nr(_):Ye(u,m,_))}function Je(u){St.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}R(Je,St);var la=/^https?$/i,gu=["POST","PUT"];s=Je.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,m,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ei.g(),this.g.onreadystatechange=D(g(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){fr(this,H);return}if(u=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)_.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const H of b.keys())_.set(H,b.get(H));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),L=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(gu,m,void 0)>=0)||b||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ae]of _)this.g.setRequestHeader(H,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){fr(this,H)}};function fr(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,dr(u),wt(u)}function dr(u){u.A||(u.A=!0,Nt(u,"complete"),Nt(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Nt(this,"complete"),Nt(this,"abort"),wt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wt(this,!0)),Je.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Io(this):this.Xa())},s.Xa=function(){Io(this)};function Io(u){if(u.h&&typeof c<"u"){if(u.v&&Gt(u)==4)setTimeout(u.Ca.bind(u),0);else if(Nt(u,"readystatechange"),Gt(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var b;if(b=H===0){let ae=String(u.D).match(aa)[1]||null;!ae&&f.self&&f.self.location&&(ae=f.self.location.protocol.slice(0,-1)),b=!la.test(ae?ae.toLowerCase():"")}_=b}if(_)Nt(u,"complete"),Nt(u,"success");else{u.o=6;try{var L=Gt(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",dr(u)}}finally{wt(u)}}}}function wt(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||Nt(u,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Gt(u){return u.g?u.g.readyState:0}s.ca=function(){try{return Gt(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Wt(m)}};function mr(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pr(u){const m={};u=(u.g&&Gt(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(I(u[b]))continue;var _=Ph(u[b]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[L]||[];m[L]=H,H.push(_)}w(m,function(b){return b.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ua(u){this.za=0,this.i=[],this.j=new es,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gr("baseRetryDelayMs",5e3,u),this.Za=gr("retryDelaySeedMs",1e4,u),this.Ta=gr("forwardChannelMaxRetries",2,u),this.va=gr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new rr(u&&u.concurrentRequestLimit),this.Ba=new pu,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ua.prototype,s.ka=8,s.I=1,s.connect=function(u,m,_,b){ct(0),this.W=u,this.H=m||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.J=bu(this,null,this.W),vr(this)};function yr(u){if(_r(u),u.I==3){var m=u.V++,_=rt(u.J);if(Ye(_,"SID",u.M),Ye(_,"RID",m),Ye(_,"TYPE","terminate"),Er(u,_),m=new Ln(u,u.j,m),m.M=2,m.A=bi(rt(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=m.A,_=!0),_||(m.g=fa(m.j,null),m.g.ea(m.A)),m.F=Date.now(),ir(m)}Tu(u)}function ii(u){u.g&&(No(u),u.g.cancel(),u.g=null)}function _r(u){ii(u),u.v&&(f.clearTimeout(u.v),u.v=null),ha(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function vr(u){if(!ar(u.h)&&!u.m){u.m=!0;var m=u.Ea;se||A(),be||(se(),be=!0),V.add(m,u),u.D=0}}function Lh(u,m){return Sn(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ji(g(u.Ea,u,m),Eu(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Ln(this,this.j,u);let H=this.o;if(this.U&&(H?(H=z(H),ee(H,this.U)):H=this.U),this.u!==null||this.R||(L.J=H,H=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(m+=b,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=ca(this,L,m),_=rt(this.J),Ye(_,"RID",u),Ye(_,"CVER",22),this.G&&Ye(_,"X-HTTP-Session-Id",this.G),Er(this,_),H&&(this.R?m="headers="+nr(us(H))+"&"+m:this.u&&Rn(_,this.u,H)),sa(this.h,L),this.Ra&&Ye(_,"TYPE","init"),this.S?(Ye(_,"$req",m),Ye(_,"SID","null"),L.U=!0,Jn(L,_,null)):Jn(L,_,m),this.I=2}}else this.I==3&&(u?yu(this,u):this.i.length==0||ar(this.h)||yu(this))};function yu(u,m){var _;m?_=m.l:_=u.V++;const b=rt(u.J);Ye(b,"SID",u.M),Ye(b,"RID",_),Ye(b,"AID",u.K),Er(u,b),u.u&&u.o&&Rn(b,u.u,u.o),_=new Ln(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=ca(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),sa(u.h,_),Jn(_,b,m)}function Er(u,m){u.H&&ie(u.H,function(_,b){Ye(m,b,_)}),u.l&&ie({},function(_,b){Ye(m,b,_)})}function ca(u,m,_){_=Math.min(u.i.length,_);const b=u.l?g(u.l.Ka,u.l,u):null;e:{var L=u.i;let we=-1;for(;;){const nt=["count="+_];we==-1?_>0?(we=L[0].g,nt.push("ofs="+we)):we=0:nt.push("ofs="+we);let Fe=!0;for(let dt=0;dt<_;dt++){var H=L[dt].g;const hn=L[dt].map;if(H-=we,H<0)we=Math.max(0,L[dt].g-100),Fe=!1;else try{H="req"+H+"_"||"";try{var ae=hn instanceof Map?hn:Object.entries(hn);for(const[si,qn]of ae){let Bn=qn;p(qn)&&(Bn=bn(qn)),nt.push(H+si+"="+encodeURIComponent(Bn))}}catch(si){throw nt.push(H+"type="+encodeURIComponent("_badmap")),si}}catch{b&&b(hn)}}if(Fe){ae=nt.join("&");break e}}ae=void 0}return u=u.i.splice(0,_),m.G=u,ae}function _u(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;se||A(),be||(se(),be=!0),V.add(m,u),u.A=0}}function Co(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ji(g(u.Da,u),Eu(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,vu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ji(g(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),ii(this),vu(this))};function No(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function vu(u){u.g=new Ln(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=rt(u.na);Ye(m,"RID","rpc"),Ye(m,"SID",u.M),Ye(m,"AID",u.K),Ye(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ye(m,"TO",u.ia),Ye(m,"TYPE","xmlhttp"),Er(u,m),u.u&&u.o&&Rn(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=bi(rt(m)),_.u=null,_.R=!0,ns(_,u)}s.Va=function(){this.C!=null&&(this.C=null,ii(this),Co(this),ct(19))};function ha(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Do(u,m){var _=null;if(u.g==m){ha(u),No(u),u.g=null;var b=2}else if(or(u.h,m))_=m.G,Ti(u.h,m),b=1;else return;if(u.I!=0){if(m.o)if(b==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var L=u.D;b=ea(),Nt(b,new uu(b,_)),vr(u)}else _u(u);else if(L=m.m,L==3||L==0&&m.X>0||!(b==1&&Lh(u,m)||b==2&&Co(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),L){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function Eu(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function wi(u,m){if(u.j.info("Error code "+m),m==2){var _=g(u.bb,u),b=u.Ua;const L=!b;b=new jn(b||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||ss(b,"https"),bi(b),L?Ro(b.toString(),_):os(b.toString(),_)}else ct(2);u.I=0,u.l&&u.l.pa(m),Tu(u),_r(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Tu(u){if(u.I=0,u.ja=[],u.l){const m=ra(u.h);(m.length!=0||u.i.length!=0)&&(J(u.ja,m),J(u.ja,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.oa()}}function bu(u,m,_){var b=_ instanceof jn?rt(_):new jn(_);if(b.g!="")m&&(b.g=m+"."+b.g),lr(b,b.u);else{var L=f.location;b=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const H=new jn(null);b&&ss(H,b),m&&(H.g=m),L&&lr(H,L),_&&(H.h=_),b=H}return _=u.G,m=u.wa,_&&m&&Ye(b,_,m),Ye(b,"VER",u.ka),Er(u,b),b}function fa(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Je(new cr({ab:_})):new Je(u.ma),m.Fa(u.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Au(){}s=Au.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function da(){}da.prototype.g=function(u,m){return new tn(u,m)};function tn(u,m){St.call(this),this.g=new ua(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!I(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!I(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new cs(this)}R(tn,St),tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){yr(this.g)},tn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=bn(u),u=_);m.i.push(new kh(m.Ya++,u)),m.I==3&&vr(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,yr(this.g),delete this.g,tn.Z.N.call(this)};function Oo(u){$i.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}R(Oo,$i);function Su(){Un.call(this),this.status=1}R(Su,Un);function cs(u){this.g=u}R(cs,Au),cs.prototype.ra=function(){Nt(this.g,"a")},cs.prototype.qa=function(u){Nt(this.g,new Oo(u))},cs.prototype.pa=function(u){Nt(this.g,new Su)},cs.prototype.oa=function(){Nt(this.g,"b")},da.prototype.createWebChannel=da.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,wT=function(){return new da},ST=function(){return ea()},AT=An,am={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ht.NO_ERROR=0,ht.TIMEOUT=8,ht.HTTP_ERROR=6,Pc=ht,Ut.COMPLETE="complete",bT=Ut,lu.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",St.prototype.listen=St.prototype.J,Sl=lu,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,TT=Je}).apply(typeof Rc<"u"?Rc:typeof self<"u"?self:typeof window<"u"?window:{});const bv="@firebase/firestore",Av="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new Rm("@firebase/firestore");function Ha(){return Fr.logLevel}function ue(s,...e){if(Fr.logLevel<=ke.DEBUG){const n=e.map(Um);Fr.debug(`Firestore (${uo}): ${s}`,...n)}}function Gi(s,...e){if(Fr.logLevel<=ke.ERROR){const n=e.map(Um);Fr.error(`Firestore (${uo}): ${s}`,...n)}}function eo(s,...e){if(Fr.logLevel<=ke.WARN){const n=e.map(Um);Fr.warn(`Firestore (${uo}): ${s}`,...n)}}function Um(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,RT(s,r,n)}function RT(s,e,n){let r=`FIRESTORE (${uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gi(r),new Error(r)}function He(s,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,s||RT(e,l,r)}function Re(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Yi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xt.UNAUTHENTICATED)))}shutdown(){}}class kR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class UR{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let c=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Bi,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Bi)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He(typeof r.accessToken=="string",31837,{l:r}),new IT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class LR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new LR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){He(this.o===void 0,3512);const r=c=>{c.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ue("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const l=c=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Sv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(He(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=qR(40);for(let c=0;c<l.length;++c)r.length<20&&l[c]<n&&(r+=e.charAt(l[c]%62))}return r}}function Ue(s,e){return s<e?-1:s>e?1:0}function om(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const l=s.charAt(r),c=e.charAt(r);if(l!==c)return Fd(l)===Fd(c)?Ue(l,c):Fd(l)?1:-1}return Ue(s.length,e.length)}const BR=55296,HR=57343;function Fd(s){const e=s.charCodeAt(0);return e>=BR&&e<=HR}function to(s,e,n){return s.length===e.length&&s.every(((r,l)=>n(r,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="__name__";class ci{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ci.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const c=ci.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return Ue(e.length,n.length)}static compareSegments(e,n){const r=ci.isNumericId(e),l=ci.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?ci.extractNumericId(e).compare(ci.extractNumericId(n)):om(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qs.fromString(e.substring(4,e.length-2))}}class tt extends ci{construct(e,n,r){return new tt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new tt(n)}static emptyPath(){return new tt([])}}const FR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends ci{construct(e,n,r){return new Bt(e,n,r)}static isValidIdentifier(e){return FR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wv}static keyField(){return new Bt([wv])}static fromServerFormat(e){const n=[];let r="",l=0;const c=()=>{if(r.length===0)throw new oe($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new oe($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new oe($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(r+=p,l++):(c(),l++)}if(c(),f)throw new oe($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(n)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(tt.fromString(e))}static fromName(e){return new pe(tt.fromString(e).popFirst(5))}static empty(){return new pe(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(s,e,n){if(!n)throw new oe($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function GR(s,e,n,r){if(e===!0&&r===!0)throw new oe($.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Rv(s){if(!pe.isDocumentKey(s))throw new oe($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Iv(s){if(pe.isDocumentKey(s))throw new oe($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function NT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function hh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ve(12329,{type:typeof s})}function Tn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new oe($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hh(s);throw new oe($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Zl(s,e){if(!NT(s))throw new oe($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(l&&typeof f!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new oe($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=-62135596800,Nv=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Nv);return new it(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Cv)throw new oe($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nv}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zl(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:bt("string",it._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new it(0,0))}static max(){return new Se(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-1;function QR(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=Se.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new Hs(l,pe.empty(),e)}function KR(s){return new Hs(s.readTime,s.key,Ul)}class Hs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hs(Se.min(),pe.empty(),Ul)}static max(){return new Hs(Se.max(),pe.empty(),Ul)}}function YR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(s.documentKey,e.documentKey),n!==0?n:Ue(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $R{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==XR)throw s;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((r,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,r)=>{n(e)}))}static reject(e){return new W(((n,r)=>{r(e)}))}static waitFor(e){return new W(((n,r)=>{let l=0,c=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++c,f&&c===l&&n()}),(y=>r(y)))})),f=!0,c===l&&n()}))}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next((l=>l?W.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,c)=>{r.push(n.call(this,l,c))})),this.waitFor(r)}static mapArray(e,n){return new W(((r,l)=>{const c=e.length,f=new Array(c);let p=0;for(let y=0;y<c;y++){const g=y;n(e[g]).next((T=>{f[g]=T,++p,p===c&&r(f)}),(T=>l(T)))}}))}static doWhile(e,n){return new W(((r,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):r()};c()}))}}function ZR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ho(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=-1;function dh(s){return s==null}function $c(s){return s===0&&1/s==-1/0}function WR(s){return typeof s=="number"&&Number.isInteger(s)&&!$c(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="";function JR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Dv(e)),e=eI(s.get(n),e);return Dv(e)}function eI(s,e){let n=e;const r=s.length;for(let l=0;l<r;l++){const c=s.charAt(l);switch(c){case"\0":n+="";break;case DT:n+="";break;default:n+=c}}return n}function Dv(s){return s+DT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Zs(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function OT(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||qt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ic(this.root,e,this.comparator,!0)}}class Ic{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,n,r,l,c){this.key=e,this.value=n,this.color=r??qt.RED,this.left=l??qt.EMPTY,this.right=c??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,c){return new qt(e??this.key,n??this.value,r??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const c=r(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,r),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return qt.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,n,r,l,c){return this}insert(e,n,r){return new qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xv(this.data.getIterator())}getIteratorFrom(e){return new xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class xv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new En([])}unionWith(e){let n=new Ct(Bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new xT("Invalid base64 string: "+c):c}})(e);return new Ht(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const tI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(s){if(He(!!s,39018),typeof s=="string"){let e=0;const n=tI.exec(s);if(He(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(s.seconds),nanos:gt(s.nanos)}}function gt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Gs(s){return typeof s=="string"?Ht.fromBase64String(s):Ht.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="server_timestamp",MT="__type__",PT="__previous_value__",kT="__local_write_time__";function zm(s){return(s?.mapValue?.fields||{})[MT]?.stringValue===VT}function mh(s){const e=s.mapValue.fields[PT];return zm(e)?mh(e):e}function Ll(s){const e=Fs(s.mapValue.fields[kT].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,r,l,c,f,p,y,g,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=T}}const Zc="(default)";class jl{constructor(e,n){this.projectId=e,this.database=n||Zc}static empty(){return new jl("","")}get isDefaultDatabase(){return this.database===Zc}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="__type__",iI="__max__",Cc={mapValue:{}},LT="__vector__",Wc="value";function Qs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?zm(s)?4:rI(s)?9007199254740991:sI(s)?10:11:ve(28295,{value:s})}function yi(s,e){if(s===e)return!0;const n=Qs(s);if(n!==Qs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Ll(s).isEqual(Ll(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=Fs(l.timestampValue),p=Fs(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return Gs(l.bytesValue).isEqual(Gs(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return gt(l.geoPointValue.latitude)===gt(c.geoPointValue.latitude)&&gt(l.geoPointValue.longitude)===gt(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return gt(l.integerValue)===gt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=gt(l.doubleValue),p=gt(c.doubleValue);return f===p?$c(f)===$c(p):isNaN(f)&&isNaN(p)}return!1})(s,e);case 9:return to(s.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Ov(f)!==Ov(p))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(p[y]===void 0||!yi(f[y],p[y])))return!1;return!0})(s,e);default:return ve(52216,{left:s})}}function zl(s,e){return(s.values||[]).find((n=>yi(n,e)))!==void 0}function no(s,e){if(s===e)return 0;const n=Qs(s),r=Qs(e);if(n!==r)return Ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(s.booleanValue,e.booleanValue);case 2:return(function(c,f){const p=gt(c.integerValue||c.doubleValue),y=gt(f.integerValue||f.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,e);case 3:return Vv(s.timestampValue,e.timestampValue);case 4:return Vv(Ll(s),Ll(e));case 5:return om(s.stringValue,e.stringValue);case 6:return(function(c,f){const p=Gs(c),y=Gs(f);return p.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(c,f){const p=c.split("/"),y=f.split("/");for(let g=0;g<p.length&&g<y.length;g++){const T=Ue(p[g],y[g]);if(T!==0)return T}return Ue(p.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,f){const p=Ue(gt(c.latitude),gt(f.latitude));return p!==0?p:Ue(gt(c.longitude),gt(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Mv(s.arrayValue,e.arrayValue);case 10:return(function(c,f){const p=c.fields||{},y=f.fields||{},g=p[Wc]?.arrayValue,T=y[Wc]?.arrayValue,R=Ue(g?.values?.length||0,T?.values?.length||0);return R!==0?R:Mv(g,T)})(s.mapValue,e.mapValue);case 11:return(function(c,f){if(c===Cc.mapValue&&f===Cc.mapValue)return 0;if(c===Cc.mapValue)return 1;if(f===Cc.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),g=f.fields||{},T=Object.keys(g);y.sort(),T.sort();for(let R=0;R<y.length&&R<T.length;++R){const D=om(y[R],T[R]);if(D!==0)return D;const G=no(p[y[R]],g[T[R]]);if(G!==0)return G}return Ue(y.length,T.length)})(s.mapValue,e.mapValue);default:throw ve(23264,{he:n})}}function Vv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ue(s,e);const n=Fs(s),r=Fs(e),l=Ue(n.seconds,r.seconds);return l!==0?l:Ue(n.nanos,r.nanos)}function Mv(s,e){const n=s.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const c=no(n[l],r[l]);if(c)return c}return Ue(n.length,r.length)}function io(s){return lm(s)}function lm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=Fs(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Gs(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return pe.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",l=!0;for(const c of n.values||[])l?l=!1:r+=",",r+=lm(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of r)c?c=!1:l+=",",l+=`${f}:${lm(n.fields[f])}`;return l+"}"})(s.mapValue):ve(61005,{value:s})}function kc(s){switch(Qs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mh(s);return e?16+kc(e):16;case 5:return 2*s.stringValue.length;case 6:return Gs(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,c)=>l+kc(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return Zs(r.fields,((c,f)=>{l+=c.length+kc(f)})),l})(s.mapValue);default:throw ve(13486,{value:s})}}function Pv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function um(s){return!!s&&"integerValue"in s}function qm(s){return!!s&&"arrayValue"in s}function kv(s){return!!s&&"nullValue"in s}function Uv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Uc(s){return!!s&&"mapValue"in s}function sI(s){return(s?.mapValue?.fields||{})[UT]?.stringValue===LT}function Dl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Zs(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Dl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dl(s.arrayValue.values[n]);return e}return{...s}}function rI(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===iI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Uc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dl(n)}setAll(e){let n=Bt.emptyPath(),r={},l=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,r,l),r={},l=[],n=p.popLast()}f?r[p.lastSegment()]=Dl(f):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,l)}delete(e){const n=this.field(e.popLast());Uc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];Uc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){Zs(n,((l,c)=>e[l]=c));for(const l of r)delete e[l]}clone(){return new un(Dl(this.value))}}function jT(s){const e=[];return Zs(s.fields,((n,r)=>{const l=new Bt([n]);if(Uc(r)){const c=jT(r.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)})),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,r,l,c,f,p){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new $t(e,0,Se.min(),Se.min(),Se.min(),un.empty(),0)}static newFoundDocument(e,n,r,l){return new $t(e,1,n,Se.min(),r,l,0)}static newNoDocument(e,n){return new $t(e,2,n,Se.min(),Se.min(),un.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,Se.min(),Se.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this.position=e,this.inclusive=n}}function Lv(s,e,n){let r=0;for(let l=0;l<s.position.length;l++){const c=e[l],f=s.position[l];if(c.field.isKeyField()?r=pe.comparator(pe.fromName(f.referenceValue),n.key):r=no(f,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function jv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!yi(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n="asc"){this.field=e,this.dir=n}}function aI(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{}class Tt extends zT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lI(e,n,r):n==="array-contains"?new hI(e,r):n==="in"?new fI(e,r):n==="not-in"?new dI(e,r):n==="array-contains-any"?new mI(e,r):new Tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uI(e,r):new cI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(no(n,this.value)):n!==null&&Qs(this.value)===Qs(n)&&this.matchesComparison(no(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends zT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xn(e,n)}matches(e){return qT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qT(s){return s.op==="and"}function BT(s){return oI(s)&&qT(s)}function oI(s){for(const e of s.filters)if(e instanceof Xn)return!1;return!0}function cm(s){if(s instanceof Tt)return s.field.canonicalString()+s.op.toString()+io(s.value);if(BT(s))return s.filters.map((e=>cm(e))).join(",");{const e=s.filters.map((n=>cm(n))).join(",");return`${s.op}(${e})`}}function HT(s,e){return s instanceof Tt?(function(r,l){return l instanceof Tt&&r.op===l.op&&r.field.isEqual(l.field)&&yi(r.value,l.value)})(s,e):s instanceof Xn?(function(r,l){return l instanceof Xn&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((c,f,p)=>c&&HT(f,l.filters[p])),!0):!1})(s,e):void ve(19439)}function FT(s){return s instanceof Tt?(function(n){return`${n.field.canonicalString()} ${n.op} ${io(n.value)}`})(s):s instanceof Xn?(function(n){return n.op.toString()+" {"+n.getFilters().map(FT).join(" ,")+"}"})(s):"Filter"}class lI extends Tt{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class uI extends Tt{constructor(e,n){super(e,"in",n),this.keys=GT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class cI extends Tt{constructor(e,n){super(e,"not-in",n),this.keys=GT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function GT(s,e){return(e.arrayValue?.values||[]).map((n=>pe.fromName(n.referenceValue)))}class hI extends Tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qm(n)&&zl(n.arrayValue,this.value)}}class fI extends Tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zl(this.value.arrayValue,n)}}class dI extends Tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zl(this.value.arrayValue,n)}}class mI extends Tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>zl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n=null,r=[],l=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=c,this.startAt=f,this.endAt=p,this.Te=null}}function zv(s,e=null,n=[],r=[],l=null,c=null,f=null){return new pI(s,e,n,r,l,c,f)}function Bm(s){const e=Re(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>cm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),dh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>io(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>io(r))).join(",")),e.Te=n}return e.Te}function Hm(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!aI(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!HT(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!jv(s.startAt,e.startAt)&&jv(s.endAt,e.endAt)}function hm(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n=null,r=[],l=[],c=null,f="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gI(s,e,n,r,l,c,f,p){return new Wl(s,e,n,r,l,c,f,p)}function ph(s){return new Wl(s)}function qv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function QT(s){return s.collectionGroup!==null}function Ol(s){const e=Re(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Ct(Bt.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new eh(c,r))})),n.has(Bt.keyField().canonicalString())||e.Ie.push(new eh(Bt.keyField(),r))}return e.Ie}function di(s){const e=Re(s);return e.Ee||(e.Ee=yI(e,Ol(s))),e.Ee}function yI(s,e){if(s.limitType==="F")return zv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new eh(l.field,c)}));const n=s.endAt?new Jc(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Jc(s.startAt.position,s.startAt.inclusive):null;return zv(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function fm(s,e){const n=s.filters.concat([e]);return new Wl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function dm(s,e,n){return new Wl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function gh(s,e){return Hm(di(s),di(e))&&s.limitType===e.limitType}function KT(s){return`${Bm(di(s))}|lt:${s.limitType}`}function Fa(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>FT(l))).join(", ")}]`),dh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>io(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>io(l))).join(",")),`Target(${r})`})(di(s))}; limitType=${s.limitType})`}function yh(s,e){return e.isFoundDocument()&&(function(r,l){const c=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):pe.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,l){for(const c of Ol(r))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const c of r.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(f,p,y){const g=Lv(f,p,y);return f.inclusive?g<=0:g<0})(r.startAt,Ol(r),l)||r.endAt&&!(function(f,p,y){const g=Lv(f,p,y);return f.inclusive?g>=0:g>0})(r.endAt,Ol(r),l))})(s,e)}function _I(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function YT(s){return(e,n)=>{let r=!1;for(const l of Ol(s)){const c=vI(l,e,n);if(c!==0)return c;r=r||l.field.isKeyField()}return 0}}function vI(s,e,n){const r=s.field.isKeyField()?pe.comparator(e.key,n.key):(function(c,f,p){const y=f.data.field(c),g=p.data.field(c);return y!==null&&g!==null?no(y,g):ve(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,c]of r)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Zs(this.inner,((n,r)=>{for(const[l,c]of r)e(l,c)}))}isEmpty(){return OT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=new ot(pe.comparator);function Qi(){return EI}const XT=new ot(pe.comparator);function wl(...s){let e=XT;for(const n of s)e=e.insert(n.key,n);return e}function $T(s){let e=XT;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ur(){return xl()}function ZT(){return xl()}function xl(){return new Kr((s=>s.toString()),((s,e)=>s.isEqual(e)))}const TI=new ot(pe.comparator),bI=new Ct(pe.comparator);function Le(...s){let e=bI;for(const n of s)e=e.add(n);return e}const AI=new Ct(Ue);function SI(){return AI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function WT(s){return{integerValue:""+s}}function JT(s,e){return WR(e)?WT(e):Fm(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function wI(s,e,n){return s instanceof ql?(function(l,c){const f={fields:{[MT]:{stringValue:VT},[kT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&zm(c)&&(c=mh(c)),c&&(f.fields[PT]=c),{mapValue:f}})(n,e):s instanceof Bl?t0(s,e):s instanceof Hl?n0(s,e):(function(l,c){const f=e0(l,c),p=Bv(f)+Bv(l.Ae);return um(f)&&um(l.Ae)?WT(p):Fm(l.serializer,p)})(s,e)}function RI(s,e,n){return s instanceof Bl?t0(s,e):s instanceof Hl?n0(s,e):n}function e0(s,e){return s instanceof Fl?(function(r){return um(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class ql extends _h{}class Bl extends _h{constructor(e){super(),this.elements=e}}function t0(s,e){const n=i0(e);for(const r of s.elements)n.some((l=>yi(l,r)))||n.push(r);return{arrayValue:{values:n}}}class Hl extends _h{constructor(e){super(),this.elements=e}}function n0(s,e){let n=i0(e);for(const r of s.elements)n=n.filter((l=>!yi(l,r)));return{arrayValue:{values:n}}}class Fl extends _h{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Bv(s){return gt(s.integerValue||s.doubleValue)}function i0(s){return qm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n){this.field=e,this.transform=n}}function II(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof Bl&&l instanceof Bl||r instanceof Hl&&l instanceof Hl?to(r.elements,l.elements,yi):r instanceof Fl&&l instanceof Fl?yi(r.Ae,l.Ae):r instanceof ql&&l instanceof ql})(s.transform,e.transform)}class CI{constructor(e,n){this.version=e,this.transformResults=n}}class cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class vh{}function r0(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Eh(s.key,cn.none()):new Jl(s.key,s.data,cn.none());{const n=s.data,r=un.empty();let l=new Ct(Bt.comparator);for(let c of e.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?r.delete(c):r.set(c,f),l=l.add(c)}return new Ws(s.key,r,new En(l.toArray()),cn.none())}}function NI(s,e,n){s instanceof Jl?(function(l,c,f){const p=l.value.clone(),y=Fv(l.fieldTransforms,c,f.transformResults);p.setAll(y),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Ws?(function(l,c,f){if(!Lc(l.precondition,c))return void c.convertToUnknownDocument(f.version);const p=Fv(l.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(a0(l)),y.setAll(p),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(s,e,n):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Vl(s,e,n,r){return s instanceof Jl?(function(c,f,p,y){if(!Lc(c.precondition,f))return p;const g=c.value.clone(),T=Gv(c.fieldTransforms,y,f);return g.setAll(T),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null})(s,e,n,r):s instanceof Ws?(function(c,f,p,y){if(!Lc(c.precondition,f))return p;const g=Gv(c.fieldTransforms,y,f),T=f.data;return T.setAll(a0(c)),T.setAll(g),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((R=>R.field)))})(s,e,n,r):(function(c,f,p){return Lc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(s,e,n)}function DI(s,e){let n=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),c=e0(r.transform,l||null);c!=null&&(n===null&&(n=un.empty()),n.set(r.field,c))}return n||null}function Hv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&to(r,l,((c,f)=>II(c,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Jl extends vh{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Ws extends vh{constructor(e,n,r,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function a0(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function Fv(s,e,n){const r=new Map;He(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let l=0;l<n.length;l++){const c=s[l],f=c.transform,p=e.data.field(c.field);r.set(c.field,RI(f,p,n[l]))}return r}function Gv(s,e,n){const r=new Map;for(const l of s){const c=l.transform,f=n.data.field(l.field);r.set(l.field,wI(c,f,e))}return r}class Eh extends vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OI extends vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&NI(c,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ZT();return this.mutations.forEach((l=>{const c=e.get(l.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(l.key)?null:p;const y=r0(f,p);y!==null&&r.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(Se.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Le())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,((n,r)=>Hv(n,r)))&&to(this.baseMutations,e.baseMutations,((n,r)=>Hv(n,r)))}}class Gm{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){He(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return TI})();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,r[f].version);return new Gm(e,n,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,ze;function PI(s){switch(s){case $.OK:return ve(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ve(15467,{code:s})}}function o0(s){if(s===void 0)return Gi("GRPC error has no .code"),$.UNKNOWN;switch(s){case Et.OK:return $.OK;case Et.CANCELLED:return $.CANCELLED;case Et.UNKNOWN:return $.UNKNOWN;case Et.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Et.INTERNAL:return $.INTERNAL;case Et.UNAVAILABLE:return $.UNAVAILABLE;case Et.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Et.NOT_FOUND:return $.NOT_FOUND;case Et.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Et.ABORTED:return $.ABORTED;case Et.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Et.DATA_LOSS:return $.DATA_LOSS;default:return ve(39323,{code:s})}}(ze=Et||(Et={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=new qs([4294967295,4294967295],0);function Qv(s){const e=kI().encode(s),n=new ET;return n.update(e),new Uint8Array(n.digest())}function Kv(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new qs([n,r],0),new qs([l,c],0)]}class Qm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rl(`Invalid padding: ${n}`);if(r<0)throw new Rl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qs.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(qs.fromNumber(r)));return l.compare(UI)===1&&(l=new qs([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Qv(e),[r,l]=Kv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,l,c);if(!this.we(f))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Qm(c,l,n);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=Qv(e),[r,l]=Kv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,l,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,r,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Th(Se.min(),l,new ot(Ue),Qi(),Le())}}class eu{constructor(e,n,r,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new eu(r,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,r,l){this.be=e,this.removedTargetIds=n,this.key=r,this.De=l}}class l0{constructor(e,n){this.targetId=e,this.Ce=n}}class u0{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class Yv{constructor(){this.ve=0,this.Fe=Xv(),this.Me=Ht.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),n=Le(),r=Le();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:ve(38017,{changeType:c})}})),new eu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Xv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qi(),this.Je=Nc(),this.He=Nc(),this.Ye=new ot(Ue)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(hm(c))if(r===0){const f=new pe(c.path);this.et(n,f,$t.newNoDocument(f,Se.min()))}else He(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const p=this.ut(e),y=p?this.ct(p,e,f):1;if(y!==0){this.it(n);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:c=0}=n;let f,p;try{f=Gs(r).toUint8Array()}catch(y){if(y instanceof xT)return eo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new Qm(f,l,c)}catch(y){return eo(y instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((c=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const p=this.ot(f);if(p){if(c.current&&hm(p.target)){const y=new pe(p.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,$t.newNoDocument(y,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let r=Le();this.He.forEach(((c,f)=>{let p=!0;f.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const l=new Th(e,n,this.Ye,this.je,r);return this.je=Qi(),this.Je=Nc(),this.He=Nc(),this.Ye=new ot(Ue),l}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Yv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ct(Ue),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ct(Ue),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Nc(){return new ot(pe.comparator)}function Xv(){return new ot(pe.comparator)}const jI={asc:"ASCENDING",desc:"DESCENDING"},zI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qI={and:"AND",or:"OR"};class BI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mm(s,e){return s.useProto3Json||dh(e)?e:{value:e}}function th(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c0(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function HI(s,e){return th(s,e.toTimestamp())}function mi(s){return He(!!s,49232),Se.fromTimestamp((function(n){const r=Fs(n);return new it(r.seconds,r.nanos)})(s))}function Km(s,e){return pm(s,e).canonicalString()}function pm(s,e){const n=(function(l){return new tt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function h0(s){const e=tt.fromString(s);return He(g0(e),10190,{key:e.toString()}),e}function gm(s,e){return Km(s.databaseId,e.path)}function Gd(s,e){const n=h0(e);if(n.get(1)!==s.databaseId.projectId)throw new oe($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new oe($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new pe(d0(n))}function f0(s,e){return Km(s.databaseId,e)}function FI(s){const e=h0(s);return e.length===4?tt.emptyPath():d0(e)}function ym(s){return new tt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function d0(s){return He(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function $v(s,e,n){return{name:gm(s,e),fields:n.value.mapValue.fields}}function GI(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ve(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(g,T){return g.useProto3Json?(He(T===void 0||typeof T=="string",58123),Ht.fromBase64String(T||"")):(He(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ht.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(g){const T=g.code===void 0?$.UNKNOWN:o0(g.code);return new oe(T,g.message||"")})(f);n=new u0(r,l,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=Gd(s,r.document.name),c=mi(r.document.updateTime),f=r.document.createTime?mi(r.document.createTime):Se.min(),p=new un({mapValue:{fields:r.document.fields}}),y=$t.newFoundDocument(l,c,f,p),g=r.targetIds||[],T=r.removedTargetIds||[];n=new jc(g,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=Gd(s,r.document),c=r.readTime?mi(r.readTime):Se.min(),f=$t.newNoDocument(l,c),p=r.removedTargetIds||[];n=new jc([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=Gd(s,r.document),c=r.removedTargetIds||[];n=new jc([],c,l,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:c}=r,f=new MI(l,c),p=r.targetId;n=new l0(p,f)}}return n}function QI(s,e){let n;if(e instanceof Jl)n={update:$v(s,e.key,e.value)};else if(e instanceof Eh)n={delete:gm(s,e.key)};else if(e instanceof Ws)n={update:$v(s,e.key,e.data),updateMask:tC(e.fieldMask)};else{if(!(e instanceof OI))return ve(16599,{Vt:e.type});n={verify:gm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,f){const p=f.transform;if(p instanceof ql)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Bl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Hl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Fl)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw ve(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:HI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ve(27497)})(s,e.precondition)),n}function KI(s,e){return s&&s.length>0?(He(e!==void 0,14353),s.map((n=>(function(l,c){let f=l.updateTime?mi(l.updateTime):mi(c);return f.isEqual(Se.min())&&(f=mi(c)),new CI(f,l.transformResults||[])})(n,e)))):[]}function YI(s,e){return{documents:[f0(s,e.path)]}}function XI(s,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=f0(s,l);const c=(function(g){if(g.length!==0)return p0(Xn.create(g,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(g){if(g.length!==0)return g.map((T=>(function(D){return{field:Ga(D.field),direction:WI(D.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=mm(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:l}}function $I(s){let e=FI(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){He(r===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(R){const D=m0(R);return D instanceof Xn&&BT(D)?D.getFilters():[D]})(n.where));let f=[];n.orderBy&&(f=(function(R){return R.map((D=>(function(J){return new eh(Qa(J.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(J.direction))})(D)))})(n.orderBy));let p=null;n.limit&&(p=(function(R){let D;return D=typeof R=="object"?R.value:R,dh(D)?null:D})(n.limit));let y=null;n.startAt&&(y=(function(R){const D=!!R.before,G=R.values||[];return new Jc(G,D)})(n.startAt));let g=null;return n.endAt&&(g=(function(R){const D=!R.before,G=R.values||[];return new Jc(G,D)})(n.endAt)),gI(e,l,f,c,p,"F",y,g)}function ZI(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function m0(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qa(n.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Qa(n.unaryFilter.field);return Tt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Qa(n.unaryFilter.field);return Tt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Qa(n.unaryFilter.field);return Tt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Tt.create(Qa(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Xn.create(n.compositeFilter.filters.map((r=>m0(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(n.compositeFilter.op))})(s):ve(30097,{filter:s})}function WI(s){return jI[s]}function JI(s){return zI[s]}function eC(s){return qI[s]}function Ga(s){return{fieldPath:s.canonicalString()}}function Qa(s){return Bt.fromServerFormat(s.fieldPath)}function p0(s){return s instanceof Tt?(function(n){if(n.op==="=="){if(Uv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NAN"}};if(kv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Uv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NAN"}};if(kv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(n.field),op:JI(n.op),value:n.value}}})(s):s instanceof Xn?(function(n){const r=n.getFilters().map((l=>p0(l)));return r.length===1?r[0]:{compositeFilter:{op:eC(n.op),filters:r}}})(s):ve(54877,{filter:s})}function tC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function g0(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n,r,l,c=Se.min(),f=Se.min(),p=Ht.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.yt=e}}function iC(s){const e=$I({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?dm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.Cn=new rC}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Hs.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class rC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new Ct(tt.comparator),c=!l.has(r);return this.index[n]=l.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new Ct(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},y0=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(y0,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new so(0)}static cr(){return new so(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="LruGarbageCollector",aC=1048576;function Jv([s,e],[n,r]){const l=Ue(s,n);return l===0?Ue(e,r):l}class oC{constructor(e){this.Ir=e,this.buffer=new Ct(Jv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Jv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(Wv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ho(n)?ue(Wv,"Ignoring IndexedDB error during garbage collection: ",n):await co(n)}await this.Vr(3e5)}))}}class uC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(fh.ce);const r=new oC(n);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Zv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,l,c,f,p,y,g;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((R=>(R>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),l=this.params.maximumSequenceNumbersToCollect):l=R,f=Date.now(),this.nthSequenceNumber(e,l)))).next((R=>(r=R,p=Date.now(),this.removeTargets(e,r,n)))).next((R=>(c=R,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((R=>(g=Date.now(),Ha()<=ke.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${R} documents in `+(g-y)+`ms
Total Duration: ${g-T}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:R}))))}}function cC(s,e){return new uC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.changes=new Kr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&Vl(r.mutation,l,En.empty(),it.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Le()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Le()){const l=Ur();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((c=>{let f=wl();return c.forEach(((p,y)=>{f=f.insert(p,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=Ur();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Le())))}populateOverlays(e,n,r){const l=[];return r.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,r,l){let c=Qi();const f=xl(),p=(function(){return xl()})();return n.forEach(((y,g)=>{const T=r.get(g.key);l.has(g.key)&&(T===void 0||T.mutation instanceof Ws)?c=c.insert(g.key,g):T!==void 0?(f.set(g.key,T.mutation.getFieldMask()),Vl(T.mutation,g,T.mutation.getFieldMask(),it.now())):f.set(g.key,En.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((g,T)=>f.set(g,T))),n.forEach(((g,T)=>p.set(g,new fC(T,f.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=xl();let l=new ot(((f,p)=>f-p)),c=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((y=>{const g=n.get(y);if(g===null)return;let T=r.get(y)||En.empty();T=p.applyToLocalView(g,T),r.set(y,T);const R=(l.get(p.batchId)||Le()).add(y);l=l.insert(p.batchId,R)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),g=y.key,T=y.value,R=ZT();T.forEach((D=>{if(!c.has(D)){const G=r0(n.get(D),r.get(D));G!==null&&R.set(D,G),c=c.add(D)}})),f.push(this.documentOverlayCache.saveOverlays(e,g,R))}return W.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return(function(f){return pe.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):QT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-c.size):W.resolve(Ur());let p=Ul,y=c;return f.next((g=>W.forEach(g,((T,R)=>(p<R.largestBatchId&&(p=R.largestBatchId),c.get(T)?W.resolve():this.remoteDocumentCache.getEntry(e,T).next((D=>{y=y.insert(T,D)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,y,g,Le()))).next((T=>({batchId:p,changes:$T(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next((r=>{let l=wl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const c=n.collectionGroup;let f=wl();return this.indexManager.getCollectionParents(e,c).next((p=>W.forEach(p,(y=>{const g=(function(R,D){return new Wl(D,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,r,l).next((T=>{T.forEach(((R,D)=>{f=f.insert(R,D)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,l)))).next((f=>{c.forEach(((y,g)=>{const T=g.getKey();f.get(T)===null&&(f=f.insert(T,$t.newInvalidDocument(T)))}));let p=wl();return f.forEach(((y,g)=>{const T=c.get(y);T!==void 0&&Vl(T.mutation,g,En.empty(),it.now()),yh(n,g)&&(p=p.insert(y,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:mi(l.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:iC(l.bundledQuery),readTime:mi(l.readTime)}})(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.overlays=new ot(pe.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ur();return W.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&r.set(l,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,c)=>{this.St(e,n,c)})),W.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const l=Ur(),c=n.length+1,f=new pe(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const y=p.getNext().value,g=y.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===c&&y.largestBatchId>r&&l.set(y.getKey(),y)}return W.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let c=new ot(((g,T)=>g-T));const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let T=c.get(g.largestBatchId);T===null&&(T=Ur(),c=c.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const p=Ur(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,T)=>p.set(g,T))),!(p.size()>=l)););return W.resolve(p)}St(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new VI(n,r));let c=this.qr.get(n);c===void 0&&(c=Le(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(){this.Qr=new Ct(Pt.$r),this.Ur=new Ct(Pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Pt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Pt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new pe(new tt([])),r=new Pt(n,e),l=new Pt(n,e+1),c=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new pe(new tt([])),r=new Pt(n,e),l=new Pt(n,e+1);let c=Le();return this.Ur.forEachInRange([r,l],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new Pt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return pe.comparator(e.key,n.key)||Ue(e.Yr,n.Yr)}static Kr(e,n){return Ue(e.Yr,n.Yr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(Pt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new xI(c,n,r,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new Pt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ei(r),c=l<0?0:l;return W.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?jm:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pt(n,0),l=new Pt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,l],(f=>{const p=this.Xr(f.Yr);c.push(p)})),W.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ct(Ue);return n.forEach((l=>{const c=new Pt(l,0),f=new Pt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(p=>{r=r.add(p.Yr)}))})),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let c=r;pe.isDocumentKey(c)||(c=c.child(""));const f=new Pt(new pe(c),0);let p=new Ct(Ue);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===l&&(p=p.add(y.Yr)),!0)}),f),W.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){He(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(n.mutations,(l=>{const c=new Pt(l.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Pt(n,0),l=this.Zr.firstAfterOrEqual(r);return W.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.ri=e,this.docs=(function(){return new ot(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),c=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=Qi();return n.forEach((l=>{const c=this.docs.get(l);r=r.insert(l,c?c.document.mutableCopy():$t.newInvalidDocument(l))})),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let c=Qi();const f=n.path,p=new pe(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:g,value:{document:T}}=y.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||YR(KR(T),r)<=0||(l.has(T.key)||yh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return W.resolve(c)}getAllFromCollectionGroup(e,n,r,l){ve(9500)}ii(e,n){return W.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new vC(this)}getSize(e){return W.resolve(this.size)}}class vC extends hC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.persistence=e,this.si=new Kr((n=>Bm(n)),Hm),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Ym,this.targetCount=0,this.ai=so.ur()}forEachTarget(e,n){return this.si.forEach(((r,l)=>n(l))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new so(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let l=0;const c=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),W.waitFor(c).next((()=>l))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((f=>{c.push(l.markPotentiallyOrphaned(e,f))})),W.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.ui={},this.overlays={},this.ci=new fh(0),this.li=!1,this.li=!0,this.hi=new gC,this.referenceDelegate=e(this),this.Pi=new EC(this),this.indexManager=new sC,this.remoteDocumentCache=(function(l){return new _C(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new nC(n),this.Ii=new mC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new yC(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const l=new TC(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return W.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class TC extends $R{constructor(e){super(),this.currentSequenceNumber=e}}class Xm{constructor(e){this.persistence=e,this.Ri=new Ym,this.Vi=null}static mi(e){return new Xm(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(r=>{const l=pe.fromPath(r);return this.gi(e,l).next((c=>{c||n.removeEntry(l,Se.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class nh{constructor(e,n){this.persistence=e,this.pi=new Kr((r=>JR(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=cC(this,n)}static mi(e,n){return new nh(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return W.forEach(this.pi,((r,l)=>this.br(e,r,l).next((c=>c?W.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((p=>{p||(r++,c.removeEntry(f,Se.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=kc(e.data.value)),n}br(e,n,r){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return W.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=l}static As(e,n){let r=Le(),l=Le();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new $m(e,n.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tS()?8:ZR(Zt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,l,r).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new bC;return this.Ss(e,n,f).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,f,p.size)}))})).next((()=>c.result))}bs(e,n,r,l){return r.documentReadCount<this.fs?(Ha()<=ke.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Fa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(Ha()<=ke.DEBUG&&ue("QueryEngine","Query:",Fa(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(Ha()<=ke.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Fa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,di(n))):W.resolve())}ys(e,n){if(qv(n))return W.resolve(null);let r=di(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=dm(n,null,"F"),r=di(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const f=Le(...c);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const g=this.Ds(n,p);return this.Cs(n,g,f,y.readTime)?this.ys(e,dm(n,null,"F")):this.vs(e,g,n,y)}))))})))))}ws(e,n,r,l){return qv(n)||l.isEqual(Se.min())?W.resolve(null):this.ps.getDocuments(e,r).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,r,l)?W.resolve(null):(Ha()<=ke.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Fa(n)),this.vs(e,f,n,QR(l,Ul)).next((p=>p)))}))}Ds(e,n){let r=new Ct(YT(e));return n.forEach(((l,c)=>{yh(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,r){return Ha()<=ke.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Fa(n)),this.ps.getDocumentsMatchingQuery(e,n,Hs.min(),r)}vs(e,n,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="LocalStore",SC=3e8;class wC{constructor(e,n,r,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new ot(Ue),this.xs=new Kr((c=>Bm(c)),Hm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function RC(s,e,n,r){return new wC(s,e,n,r)}async function v0(s,e){const n=Re(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const f=[],p=[];let y=Le();for(const g of l){f.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}for(const g of c){p.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(r,y).next((g=>({Ls:g,removedBatchIds:f,addedBatchIds:p})))}))}))}function IC(s,e){const n=Re(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,g,T){const R=g.batch,D=R.keys();let G=W.resolve();return D.forEach((J=>{G=G.next((()=>T.getEntry(y,J))).next((re=>{const Y=g.docVersions.get(J);He(Y!==null,48541),re.version.compareTo(Y)<0&&(R.applyToRemoteDocument(re,g),re.isValidDocument()&&(re.setReadTime(g.commitVersion),T.addEntry(re)))}))})),G.next((()=>p.mutationQueue.removeMutationBatch(y,R)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=Le();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(y=y.add(p.batch.mutations[g].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function E0(s){const e=Re(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function CC(s,e){const n=Re(s),r=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((T,R)=>{const D=l.get(R);if(!D)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,R).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,R))));let G=D.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(R)!==null?G=G.withResumeToken(Ht.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):T.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(T.resumeToken,r)),l=l.insert(R,G),(function(re,Y,le){return re.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-re.snapshotVersion.toMicroseconds()>=SC?!0:le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0})(D,G,T)&&p.push(n.Pi.updateTargetData(c,G))}));let y=Qi(),g=Le();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(NC(c,f,e.documentUpdates).next((T=>{y=T.ks,g=T.qs}))),!r.isEqual(Se.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((R=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(T)}return W.waitFor(p).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,g))).next((()=>y))})).then((c=>(n.Ms=l,c)))}function NC(s,e,n){let r=Le(),l=Le();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let f=Qi();return n.forEach(((p,y)=>{const g=c.get(p);y.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(Se.min())?(e.removeEntry(p,y.readTime),f=f.insert(p,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),f=f.insert(p,y)):ue(Zm,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",y.version)})),{ks:f,qs:l}}))}function DC(s,e){const n=Re(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=jm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function OC(s,e){const n=Re(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,e).next((c=>c?(l=c,W.resolve(l)):n.Pi.allocateTargetId(r).next((f=>(l=new Us(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function _m(s,e,n){const r=Re(s),l=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!ho(f))throw f;ue(Zm,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function eE(s,e,n){const r=Re(s);let l=Se.min(),c=Le();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,g,T){const R=Re(y),D=R.xs.get(T);return D!==void 0?W.resolve(R.Ms.get(D)):R.Pi.getTargetData(g,T)})(r,f,di(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((y=>{c=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?l:Se.min(),n?c:Le()))).next((p=>(xC(r,_I(e),p),{documents:p,Qs:c})))))}function xC(s,e,n){let r=s.Os.get(e)||Se.min();n.forEach(((l,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class tE{constructor(){this.activeTargetIds=SI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VC{constructor(){this.Mo=new tE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="ConnectivityMonitor";class iE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(nE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(nE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=null;function vm(){return Dc===null?Dc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dc++,"0x"+Dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="RestConnection",PC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===Zc?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,n,r,l,c){const f=vm(),p=this.zo(e,n.toUriEncodedString());ue(Qd,`Sending RPC '${e}' ${f}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,c);const{host:g}=new URL(p),T=ao(g);return this.Jo(e,p,y,r,T).then((R=>(ue(Qd,`Received RPC '${e}' ${f}: `,R),R)),(R=>{throw eo(Qd,`RPC '${e}' ${f} failed with error: `,R,"url: ",p,"request:",r),R}))}Ho(e,n,r,l,c,f){return this.Go(e,n,r,l,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),r&&r.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const r=PC[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class LC extends kC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,c){const f=vm();return new Promise(((p,y)=>{const g=new TT;g.setWithCredentials(!0),g.listenOnce(bT.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Pc.NO_ERROR:const R=g.getResponseJson();ue(Yt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(R)),p(R);break;case Pc.TIMEOUT:ue(Yt,`RPC '${e}' ${f} timed out`),y(new oe($.DEADLINE_EXCEEDED,"Request time out"));break;case Pc.HTTP_ERROR:const D=g.getStatus();if(ue(Yt,`RPC '${e}' ${f} failed with status:`,D,"response text:",g.getResponseText()),D>0){let G=g.getResponseJson();Array.isArray(G)&&(G=G[0]);const J=G?.error;if(J&&J.status&&J.message){const re=(function(le){const de=le.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(de)>=0?de:$.UNKNOWN})(J.status);y(new oe(re,J.message))}else y(new oe($.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new oe($.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ue(Yt,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(l);ue(Yt,`RPC '${e}' ${f} sending request:`,l),g.send(n,"POST",T,r,15)}))}T_(e,n,r){const l=vm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=wT(),p=ST(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const T=c.join("");ue(Yt,`Creating RPC '${e}' stream ${l}: ${T}`,y);const R=f.createWebChannel(T,y);this.I_(R);let D=!1,G=!1;const J=new UC({Yo:Y=>{G?ue(Yt,`Not sending because RPC '${e}' stream ${l} is closed:`,Y):(D||(ue(Yt,`Opening RPC '${e}' stream ${l} transport.`),R.open(),D=!0),ue(Yt,`RPC '${e}' stream ${l} sending:`,Y),R.send(Y))},Zo:()=>R.close()}),re=(Y,le,de)=>{Y.listen(le,(K=>{try{de(K)}catch(Ae){setTimeout((()=>{throw Ae}),0)}}))};return re(R,Sl.EventType.OPEN,(()=>{G||(ue(Yt,`RPC '${e}' stream ${l} transport opened.`),J.o_())})),re(R,Sl.EventType.CLOSE,(()=>{G||(G=!0,ue(Yt,`RPC '${e}' stream ${l} transport closed`),J.a_(),this.E_(R))})),re(R,Sl.EventType.ERROR,(Y=>{G||(G=!0,eo(Yt,`RPC '${e}' stream ${l} transport errored. Name:`,Y.name,"Message:",Y.message),J.a_(new oe($.UNAVAILABLE,"The operation could not be completed")))})),re(R,Sl.EventType.MESSAGE,(Y=>{if(!G){const le=Y.data[0];He(!!le,16349);const de=le,K=de?.error||de[0]?.error;if(K){ue(Yt,`RPC '${e}' stream ${l} received error:`,K);const Ae=K.status;let se=(function(A){const C=Et[A];if(C!==void 0)return o0(C)})(Ae),be=K.message;se===void 0&&(se=$.INTERNAL,be="Unknown error status: "+Ae+" with message "+K.message),G=!0,J.a_(new oe(se,be)),R.close()}else ue(Yt,`RPC '${e}' stream ${l} received:`,le),J.u_(le)}})),re(p,AT.STAT_EVENT,(Y=>{Y.stat===am.PROXY?ue(Yt,`RPC '${e}' stream ${l} detected buffering proxy`):Y.stat===am.NOPROXY&&ue(Yt,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{J.__()}),0),J}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Kd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(s){return new BI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n,r=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&ue("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="PersistentStream";class b0{constructor(e,n,r,l,c,f,p,y){this.Mi=e,this.S_=r,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new T0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Gi(n.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new oe($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(sE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ue(sE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jC extends b0{constructor(e,n,r,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=GI(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Se.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Se.min():f.readTime?mi(f.readTime):Se.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ym(this.serializer),n.addTarget=(function(c,f){let p;const y=f.target;if(p=hm(y)?{documents:YI(c,y)}:{query:XI(c,y).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=c0(c,f.resumeToken);const g=mm(c,f.expectedCount);g!==null&&(p.expectedCount=g)}else if(f.snapshotVersion.compareTo(Se.min())>0){p.readTime=th(c,f.snapshotVersion.toTimestamp());const g=mm(c,f.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const r=ZI(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ym(this.serializer),n.removeTarget=e,this.q_(n)}}class zC extends b0{constructor(e,n,r,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=KI(e.writeResults,e.commitTime),r=mi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ym(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>QI(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{}class BC extends qC{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new oe($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,pm(n,r),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new oe($.UNKNOWN,c.toString())}))}Ho(e,n,r,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,pm(n,r),l,f,p,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new oe($.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class HC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gi(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="RemoteStore";class FC{constructor(e,n,r,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{Yr(this)&&(ue(Gr,"Restarting streams for network reachability change."),await(async function(y){const g=Re(y);g.Ea.add(4),await tu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Ah(g)})(this))}))})),this.Ra=new HC(r,l)}}async function Ah(s){if(Yr(s))for(const e of s.da)await e(!0)}async function tu(s){for(const e of s.da)await e(!1)}function A0(s,e){const n=Re(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),tp(n)?ep(n):fo(n).O_()&&Jm(n,e))}function Wm(s,e){const n=Re(s),r=fo(n);n.Ia.delete(e),r.O_()&&S0(n,e),n.Ia.size===0&&(r.O_()?r.L_():Yr(n)&&n.Ra.set("Unknown"))}function Jm(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fo(s).Y_(e)}function S0(s,e){s.Va.Ue(e),fo(s).Z_(e)}function ep(s){s.Va=new LI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),fo(s).start(),s.Ra.ua()}function tp(s){return Yr(s)&&!fo(s).x_()&&s.Ia.size>0}function Yr(s){return Re(s).Ea.size===0}function w0(s){s.Va=void 0}async function GC(s){s.Ra.set("Online")}async function QC(s){s.Ia.forEach(((e,n)=>{Jm(s,e)}))}async function KC(s,e){w0(s),tp(s)?(s.Ra.ha(e),ep(s)):s.Ra.set("Unknown")}async function YC(s,e,n){if(s.Ra.set("Online"),e instanceof u0&&e.state===2&&e.cause)try{await(async function(l,c){const f=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(s,e)}catch(r){ue(Gr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ih(s,r)}else if(e instanceof jc?s.Va.Ze(e):e instanceof l0?s.Va.st(e):s.Va.tt(e),!n.isEqual(Se.min()))try{const r=await E0(s.localStore);n.compareTo(r)>=0&&await(function(c,f){const p=c.Va.Tt(f);return p.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const T=c.Ia.get(g);T&&c.Ia.set(g,T.withResumeToken(y.resumeToken,f))}})),p.targetMismatches.forEach(((y,g)=>{const T=c.Ia.get(y);if(!T)return;c.Ia.set(y,T.withResumeToken(Ht.EMPTY_BYTE_STRING,T.snapshotVersion)),S0(c,y);const R=new Us(T.target,y,g,T.sequenceNumber);Jm(c,R)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){ue(Gr,"Failed to raise snapshot:",r),await ih(s,r)}}async function ih(s,e,n){if(!ho(e))throw e;s.Ea.add(1),await tu(s),s.Ra.set("Offline"),n||(n=()=>E0(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ue(Gr,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Ah(s)}))}function R0(s,e){return e().catch((n=>ih(s,n,e)))}async function Sh(s){const e=Re(s),n=Ks(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jm;for(;XC(e);)try{const l=await DC(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,$C(e,l)}catch(l){await ih(e,l)}I0(e)&&C0(e)}function XC(s){return Yr(s)&&s.Ta.length<10}function $C(s,e){s.Ta.push(e);const n=Ks(s);n.O_()&&n.X_&&n.ea(e.mutations)}function I0(s){return Yr(s)&&!Ks(s).x_()&&s.Ta.length>0}function C0(s){Ks(s).start()}async function ZC(s){Ks(s).ra()}async function WC(s){const e=Ks(s);for(const n of s.Ta)e.ea(n.mutations)}async function JC(s,e,n){const r=s.Ta.shift(),l=Gm.from(r,e,n);await R0(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Sh(s)}async function eN(s,e){e&&Ks(s).X_&&await(async function(r,l){if((function(f){return PI(f)&&f!==$.ABORTED})(l.code)){const c=r.Ta.shift();Ks(r).B_(),await R0(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Sh(r)}})(s,e),I0(s)&&C0(s)}async function rE(s,e){const n=Re(s);n.asyncQueue.verifyOperationInProgress(),ue(Gr,"RemoteStore received new credentials");const r=Yr(n);n.Ea.add(3),await tu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ah(n)}async function tN(s,e){const n=Re(s);e?(n.Ea.delete(2),await Ah(n)):e||(n.Ea.add(2),await tu(n),n.Ra.set("Unknown"))}function fo(s){return s.ma||(s.ma=(function(n,r,l){const c=Re(n);return c.sa(),new jC(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:GC.bind(null,s),t_:QC.bind(null,s),r_:KC.bind(null,s),H_:YC.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),tp(s)?ep(s):s.Ra.set("Unknown")):(await s.ma.stop(),w0(s))}))),s.ma}function Ks(s){return s.fa||(s.fa=(function(n,r,l){const c=Re(n);return c.sa(),new zC(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:ZC.bind(null,s),r_:eN.bind(null,s),ta:WC.bind(null,s),na:JC.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Sh(s)):(await s.fa.stop(),s.Ta.length>0&&(ue(Gr,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n,r,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=c,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,c){const f=Date.now()+r,p=new np(e,n,f,l,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ip(s,e){if(Gi("AsyncQueue",`${e}: ${s}`),ho(s))return new oe($.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{static emptySet(e){return new Wa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=wl(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Wa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.ga=new ot(pe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ro{constructor(e,n,r,l,c,f,p,y,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,l,c){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new ro(e,n,Wa.emptySet(n),f,r,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class iN{constructor(){this.queries=oE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=Re(n),c=l.queries;l.queries=oE(),c.forEach(((f,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new oe($.ABORTED,"Firestore shutting down"))}}function oE(){return new Kr((s=>KT(s)),gh)}async function sp(s,e){const n=Re(s);let r=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(r=2):(c=new nN,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=ip(f,`Initialization of query '${Fa(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&ap(n)}async function rp(s,e){const n=Re(s),r=e.query;let l=3;const c=n.queries.get(r);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sN(s,e){const n=Re(s);let r=!1;for(const l of e){const c=l.query,f=n.queries.get(c);if(f){for(const p of f.Sa)p.Fa(l)&&(r=!0);f.wa=l}}r&&ap(n)}function rN(s,e,n){const r=Re(s),l=r.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);r.queries.delete(e)}function ap(s){s.Ca.forEach((e=>{e.next()}))}var Em,lE;(lE=Em||(Em={})).Ma="default",lE.Cache="cache";class op{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new ro(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this.key=e}}class D0{constructor(e){this.key=e}}class aN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=YT(e),this.tu=new Wa(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new aE,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((T,R)=>{const D=l.get(T),G=yh(this.query,R)?R:null,J=!!D&&this.mutatedKeys.has(D.key),re=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Y=!1;D&&G?D.data.isEqual(G.data)?J!==re&&(r.track({type:3,doc:G}),Y=!0):this.su(D,G)||(r.track({type:2,doc:G}),Y=!0,(y&&this.eu(G,y)>0||g&&this.eu(G,g)<0)&&(p=!0)):!D&&G?(r.track({type:0,doc:G}),Y=!0):D&&!G&&(r.track({type:1,doc:D}),Y=!0,(y||g)&&(p=!0)),Y&&(G?(f=f.add(G),c=re?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,R)=>(function(G,J){const re=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:Y})}};return re(G)-re(J)})(T.type,R.type)||this.eu(T.doc,R.doc))),this.ou(r),l=l??!1;const p=n&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,g=y!==this.Za;return this.Za=y,f.length!==0||g?{snapshot:new ro(this.query,e.tu,c,f,e.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new D0(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new N0(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ro.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lp="SyncEngine";class oN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class lN{constructor(e){this.key=e,this.hu=!1}}class uN{constructor(e,n,r,l,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Kr((p=>KT(p)),gh),this.Iu=new Map,this.Eu=new Set,this.du=new ot(pe.comparator),this.Au=new Map,this.Ru=new Ym,this.Vu={},this.mu=new Map,this.fu=so.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cN(s,e,n=!0){const r=k0(s);let l;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await O0(r,e,n,!0),l}async function hN(s,e){const n=k0(s);await O0(n,e,!0,!1)}async function O0(s,e,n,r){const l=await OC(s.localStore,di(e)),c=l.targetId,f=s.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await fN(s,e,c,f==="current",l.resumeToken)),s.isPrimaryClient&&n&&A0(s.remoteStore,l),p}async function fN(s,e,n,r,l){s.pu=(R,D,G)=>(async function(re,Y,le,de){let K=Y.view.ru(le);K.Cs&&(K=await eE(re.localStore,Y.query,!1).then((({documents:V})=>Y.view.ru(V,K))));const Ae=de&&de.targetChanges.get(Y.targetId),se=de&&de.targetMismatches.get(Y.targetId)!=null,be=Y.view.applyChanges(K,re.isPrimaryClient,Ae,se);return cE(re,Y.targetId,be.au),be.snapshot})(s,R,D,G);const c=await eE(s.localStore,e,!0),f=new aN(e,c.Qs),p=f.ru(c.documents),y=eu.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",l),g=f.applyChanges(p,s.isPrimaryClient,y);cE(s,n,g.au);const T=new oN(e,n,f);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),g.snapshot}async function dN(s,e,n){const r=Re(s),l=r.Tu.get(e),c=r.Iu.get(l.targetId);if(c.length>1)return r.Iu.set(l.targetId,c.filter((f=>!gh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await _m(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&Wm(r.remoteStore,l.targetId),Tm(r,l.targetId)})).catch(co)):(Tm(r,l.targetId),await _m(r.localStore,l.targetId,!0))}async function mN(s,e){const n=Re(s),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wm(n.remoteStore,r.targetId))}async function pN(s,e,n){const r=bN(s);try{const l=await(function(f,p){const y=Re(f),g=it.now(),T=p.reduce(((G,J)=>G.add(J.key)),Le());let R,D;return y.persistence.runTransaction("Locally write mutations","readwrite",(G=>{let J=Qi(),re=Le();return y.Ns.getEntries(G,T).next((Y=>{J=Y,J.forEach(((le,de)=>{de.isValidDocument()||(re=re.add(le))}))})).next((()=>y.localDocuments.getOverlayedDocuments(G,J))).next((Y=>{R=Y;const le=[];for(const de of p){const K=DI(de,R.get(de.key).overlayedDocument);K!=null&&le.push(new Ws(de.key,K,jT(K.value.mapValue),cn.exists(!0)))}return y.mutationQueue.addMutationBatch(G,g,le,p)})).next((Y=>{D=Y;const le=Y.applyToLocalDocumentSet(R,re);return y.documentOverlayCache.saveOverlays(G,Y.batchId,le)}))})).then((()=>({batchId:D.batchId,changes:$T(R)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(f,p,y){let g=f.Vu[f.currentUser.toKey()];g||(g=new ot(Ue)),g=g.insert(p,y),f.Vu[f.currentUser.toKey()]=g})(r,l.batchId,n),await nu(r,l.changes),await Sh(r.remoteStore)}catch(l){const c=ip(l,"Failed to persist write");n.reject(c)}}async function x0(s,e){const n=Re(s);try{const r=await CC(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const f=n.Au.get(c);f&&(He(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?He(f.hu,14607):l.removedDocuments.size>0&&(He(f.hu,42227),f.hu=!1))})),await nu(n,r,e)}catch(r){await co(r)}}function uE(s,e,n){const r=Re(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((c,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const y=Re(f);y.onlineState=p;let g=!1;y.queries.forEach(((T,R)=>{for(const D of R.Sa)D.va(p)&&(g=!0)})),g&&ap(y)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gN(s,e,n){const r=Re(s);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),c=l&&l.key;if(c){let f=new ot(pe.comparator);f=f.insert(c,$t.newNoDocument(c,Se.min()));const p=Le().add(c),y=new Th(Se.min(),new Map,new ot(Ue),f,p);await x0(r,y),r.du=r.du.remove(c),r.Au.delete(e),up(r)}else await _m(r.localStore,e,!1).then((()=>Tm(r,e,n))).catch(co)}async function yN(s,e){const n=Re(s),r=e.batch.batchId;try{const l=await IC(n.localStore,e);M0(n,r,null),V0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nu(n,l)}catch(l){await co(l)}}async function _N(s,e,n){const r=Re(s);try{const l=await(function(f,p){const y=Re(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let T;return y.mutationQueue.lookupMutationBatch(g,p).next((R=>(He(R!==null,37113),T=R.keys(),y.mutationQueue.removeMutationBatch(g,R)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T))).next((()=>y.localDocuments.getDocuments(g,T)))}))})(r.localStore,e);M0(r,e,n),V0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nu(r,l)}catch(l){await co(l)}}function V0(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function M0(s,e,n){const r=Re(s);let l=r.Vu[r.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function Tm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||P0(s,r)}))}function P0(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Wm(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),up(s))}function cE(s,e,n){for(const r of n)r instanceof N0?(s.Ru.addReference(r.key,e),vN(s,r)):r instanceof D0?(ue(lp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||P0(s,r.key)):ve(19791,{wu:r})}function vN(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(ue(lp,"New document in limbo: "+n),s.Eu.add(r),up(s))}function up(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new pe(tt.fromString(e)),r=s.fu.next();s.Au.set(r,new lN(n)),s.du=s.du.insert(n,r),A0(s.remoteStore,new Us(di(ph(n.path)),r,"TargetPurposeLimboResolution",fh.ce))}}async function nu(s,e,n){const r=Re(s),l=[],c=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{f.push(r.pu(y,e,n).then((g=>{if((g||n)&&r.isPrimaryClient){const T=g?!g.fromCache:n?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(g){l.push(g);const T=$m.As(y.targetId,g);c.push(T)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(y,g){const T=Re(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(R=>W.forEach(g,(D=>W.forEach(D.Es,(G=>T.persistence.referenceDelegate.addReference(R,D.targetId,G))).next((()=>W.forEach(D.ds,(G=>T.persistence.referenceDelegate.removeReference(R,D.targetId,G)))))))))}catch(R){if(!ho(R))throw R;ue(Zm,"Failed to update sequence numbers: "+R)}for(const R of g){const D=R.targetId;if(!R.fromCache){const G=T.Ms.get(D),J=G.snapshotVersion,re=G.withLastLimboFreeSnapshotVersion(J);T.Ms=T.Ms.insert(D,re)}}})(r.localStore,c))}async function EN(s,e){const n=Re(s);if(!n.currentUser.isEqual(e)){ue(lp,"User change. New user:",e.toKey());const r=await v0(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new oe($.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nu(n,r.Ls)}}function TN(s,e){const n=Re(s),r=n.Au.get(e);if(r&&r.hu)return Le().add(r.key);{let l=Le();const c=n.Iu.get(e);if(!c)return l;for(const f of c){const p=n.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function k0(s){const e=Re(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=x0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gN.bind(null,e),e.Pu.H_=sN.bind(null,e.eventManager),e.Pu.yu=rN.bind(null,e.eventManager),e}function bN(s){const e=Re(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_N.bind(null,e),e}class sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return RC(this.persistence,new AC,e.initialUser,this.serializer)}Cu(e){return new _0(Xm.mi,this.serializer)}Du(e){return new VC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sh.provider={build:()=>new sh};class AN extends sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){He(this.persistence.referenceDelegate instanceof nh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new _0((r=>nh.mi(r,n)),this.serializer)}}class bm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=EN.bind(null,this.syncEngine),await tN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iN})()}createDatastore(e){const n=bh(e.databaseInfo.databaseId),r=(function(c){return new LC(c)})(e.databaseInfo);return(function(c,f,p,y){return new BC(c,f,p,y)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,c,f,p){return new FC(r,l,c,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>uE(this.syncEngine,n,0)),(function(){return iE.v()?new iE:new MC})())}createSyncEngine(e,n){return(function(l,c,f,p,y,g,T){const R=new uN(l,c,f,p,y,g);return T&&(R.gu=!0),R})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Re(n);ue(Gr,"RemoteStore shutting down."),r.Ea.add(5),await tu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bm.provider={build:()=>new bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="FirestoreClient";class SN{constructor(e,n,r,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=Xt.UNAUTHENTICATED,this.clientId=Lm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async f=>{ue(Ys,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(ue(Ys,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ip(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Yd(s,e){s.asyncQueue.verifyOperationInProgress(),ue(Ys,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await v0(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function hE(s,e){s.asyncQueue.verifyOperationInProgress();const n=await wN(s);ue(Ys,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>rE(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>rE(e.remoteStore,l))),s._onlineComponents=e}async function wN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ue(Ys,"Using user provided OfflineComponentProvider");try{await Yd(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===$.FAILED_PRECONDITION||l.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;eo("Error using user provided cache. Falling back to memory cache: "+n),await Yd(s,new sh)}}else ue(Ys,"Using default OfflineComponentProvider"),await Yd(s,new AN(void 0));return s._offlineComponents}async function U0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ue(Ys,"Using user provided OnlineComponentProvider"),await hE(s,s._uninitializedComponentsProvider._online)):(ue(Ys,"Using default OnlineComponentProvider"),await hE(s,new bm))),s._onlineComponents}function RN(s){return U0(s).then((e=>e.syncEngine))}async function rh(s){const e=await U0(s),n=e.eventManager;return n.onListen=cN.bind(null,e.syncEngine),n.onUnlisten=dN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mN.bind(null,e.syncEngine),n}function IN(s,e,n={}){const r=new Bi;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,g){const T=new cp({next:D=>{T.Nu(),f.enqueueAndForget((()=>rp(c,R)));const G=D.docs.has(p);!G&&D.fromCache?g.reject(new oe($.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&D.fromCache&&y&&y.source==="server"?g.reject(new oe($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(D)},error:D=>g.reject(D)}),R=new op(ph(p.path),T,{includeMetadataChanges:!0,qa:!0});return sp(c,R)})(await rh(s),s.asyncQueue,e,n,r))),r.promise}function CN(s,e,n={}){const r=new Bi;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,g){const T=new cp({next:D=>{T.Nu(),f.enqueueAndForget((()=>rp(c,R))),D.fromCache&&y.source==="server"?g.reject(new oe($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(D)},error:D=>g.reject(D)}),R=new op(p,T,{includeMetadataChanges:!0,qa:!0});return sp(c,R)})(await rh(s),s.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="firestore.googleapis.com",dE=!0;class mE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=j0,this.ssl=dE}else this.host=e.host,this.ssl=e.ssl??dE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=y0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aC)throw new oe($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=L0(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wh{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new PR;switch(r.type){case"firstParty":return new jR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=fE.get(n);r&&(ue("ComponentProvider","Removing Datastore"),fE.delete(n),r.terminate())})(this),Promise.resolve()}}function NN(s,e,n,r={}){s=Tn(s,wh);const l=ao(e),c=s._getSettings(),f={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(xE(`https://${p}`),VE("Firestore",!0)),c.host!==j0&&c.host!==p&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:l,emulatorOptions:r};if(!zr(y,f)&&(s._setSettings(y),r.mockUserToken)){let g,T;if(typeof r.mockUserToken=="string")g=r.mockUserToken,T=Xt.MOCK_USER;else{g=QA(r.mockUserToken,s._app?.options.projectId);const R=r.mockUserToken.sub||r.mockUserToken.user_id;if(!R)throw new oe($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Xt(R)}s._authCredentials=new kR(new IT(g,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xr(this.firestore,e,this._query)}}class yt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yt(this.firestore,e,this._key)}toJSON(){return{type:yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Zl(n,yt._jsonSchema))return new yt(e,r||null,new pe(tt.fromString(n.referencePath)))}}yt._jsonSchemaVersion="firestore/documentReference/1.0",yt._jsonSchema={type:bt("string",yt._jsonSchemaVersion),referencePath:bt("string")};class Bs extends Xr{constructor(e,n,r){super(e,n,ph(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new pe(e))}withConverter(e){return new Bs(this.firestore,e,this._path)}}function Ka(s,e,...n){if(s=At(s),CT("collection","path",e),s instanceof wh){const r=tt.fromString(e,...n);return Iv(r),new Bs(s,null,r)}{if(!(s instanceof yt||s instanceof Bs))throw new oe($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(tt.fromString(e,...n));return Iv(r),new Bs(s.firestore,null,r)}}function vn(s,e,...n){if(s=At(s),arguments.length===1&&(e=Lm.newId()),CT("doc","path",e),s instanceof wh){const r=tt.fromString(e,...n);return Rv(r),new yt(s,null,new pe(r))}{if(!(s instanceof yt||s instanceof Bs))throw new oe($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(tt.fromString(e,...n));return Rv(r),new yt(s.firestore,s instanceof Bs?s.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="AsyncQueue";class gE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new T0(this,"async_queue_retry"),this._c=()=>{const r=Kd();r&&ue(pE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Kd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Kd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Bi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ho(e))throw e;ue(pE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Gi("INTERNAL UNHANDLED ERROR: ",yE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=np.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&ve(47125,{Pc:yE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function yE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of r)if(c in l&&typeof l[c]=="function")return!0;return!1})(s,["next","error","complete"])}class Ki extends wh{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new gE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gE(e),this._firestoreClient=void 0,await e}}}function DN(s,e){const n=typeof s=="object"?s:UE(),r=typeof s=="string"?s:Zc,l=Cm(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const c=FA("firestore");c&&NN(l,...c)}return l}function iu(s){if(s._terminated)throw new oe($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||ON(s),s._firestoreClient}function ON(s){const e=s._freezeSettings(),n=(function(l,c,f,p){return new nI(l,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,L0(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new SN(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(Ht.fromBase64String(e))}catch(n){throw new oe($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pn(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zl(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:bt("string",Pn._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pi._jsonSchemaVersion}}static fromJSON(e){if(Zl(e,pi._jsonSchema))return new pi(e.latitude,e.longitude)}}pi._jsonSchemaVersion="firestore/geoPoint/1.0",pi._jsonSchema={type:bt("string",pi._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zl(e,gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new gi(e.vectorValues);throw new oe($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:bt("string",gi._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=/^__.*__$/;class VN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ws(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jl(e,this.data,n,this.fieldTransforms)}}class z0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ws(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function q0(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:s})}}class hp{constructor(e,n,r,l,c,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ah(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(q0(this.Ac)&&xN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class MN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bh(e)}Cc(e,n,r,l=!1){return new hp({Ac:e,methodName:n,Dc:r,path:Bt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ih(s){const e=s._freezeSettings(),n=bh(s._databaseId);return new MN(s._databaseId,!!e.ignoreUndefinedProperties,n)}function fp(s,e,n,r,l,c={}){const f=s.Cc(c.merge||c.mergeFields?2:0,e,n,l);pp("Data must be an object, but it was:",f,r);const p=B0(r,f);let y,g;if(c.merge)y=new En(f.fieldMask),g=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const R of c.mergeFields){const D=Am(e,R,n);if(!f.contains(D))throw new oe($.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);F0(T,D)||T.push(D)}y=new En(T),g=f.fieldTransforms.filter((R=>y.covers(R.field)))}else y=null,g=f.fieldTransforms;return new VN(new un(p),y,g)}class Ch extends su{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ch}}class dp extends su{_toFieldTransform(e){return new s0(e.path,new ql)}isEqual(e){return e instanceof dp}}class mp extends su{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Fl(e.serializer,JT(e.serializer,this.Fc));return new s0(e.path,n)}isEqual(e){return e instanceof mp&&this.Fc===e.Fc}}function PN(s,e,n,r){const l=s.Cc(1,e,n);pp("Data must be an object, but it was:",l,r);const c=[],f=un.empty();Zs(r,((y,g)=>{const T=gp(e,y,n);g=At(g);const R=l.yc(T);if(g instanceof Ch)c.push(T);else{const D=ru(g,R);D!=null&&(c.push(T),f.set(T,D))}}));const p=new En(c);return new z0(f,p,l.fieldTransforms)}function kN(s,e,n,r,l,c){const f=s.Cc(1,e,n),p=[Am(e,r,n)],y=[l];if(c.length%2!=0)throw new oe($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<c.length;D+=2)p.push(Am(e,c[D])),y.push(c[D+1]);const g=[],T=un.empty();for(let D=p.length-1;D>=0;--D)if(!F0(g,p[D])){const G=p[D];let J=y[D];J=At(J);const re=f.yc(G);if(J instanceof Ch)g.push(G);else{const Y=ru(J,re);Y!=null&&(g.push(G),T.set(G,Y))}}const R=new En(g);return new z0(T,R,f.fieldTransforms)}function UN(s,e,n,r=!1){return ru(n,s.Cc(r?4:3,e))}function ru(s,e){if(H0(s=At(s)))return pp("Unsupported field value:",e,s),B0(s,e);if(s instanceof su)return(function(r,l){if(!q0(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const c=[];let f=0;for(const p of r){let y=ru(p,l.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}})(s,e)}return(function(r,l){if((r=At(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JT(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=it.fromDate(r);return{timestampValue:th(l.serializer,c)}}if(r instanceof it){const c=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:th(l.serializer,c)}}if(r instanceof pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pn)return{bytesValue:c0(l.serializer,r._byteString)};if(r instanceof yt){const c=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Km(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof gi)return(function(f,p){return{mapValue:{fields:{[UT]:{stringValue:LT},[Wc]:{arrayValue:{values:f.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return Fm(p.serializer,g)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${hh(r)}`)})(s,e)}function B0(s,e){const n={};return OT(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zs(s,((r,l)=>{const c=ru(l,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function H0(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof it||s instanceof pi||s instanceof Pn||s instanceof yt||s instanceof su||s instanceof gi)}function pp(s,e,n){if(!H0(n)||!NT(n)){const r=hh(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Am(s,e,n){if((e=At(e))instanceof Rh)return e._internalPath;if(typeof e=="string")return gp(s,e);throw ah("Field path arguments must be of type string or ",s,!1,void 0,n)}const LN=new RegExp("[~\\*/\\[\\]]");function gp(s,e,n){if(e.search(LN)>=0)throw ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Rh(...e.split("."))._internalPath}catch{throw ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function ah(s,e,n,r,l){const c=r&&!r.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${r}`),f&&(y+=` in document ${l}`),y+=")"),new oe($.INVALID_ARGUMENT,p+s+y)}function F0(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n,r,l,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Q0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jN extends G0{data(){return super.data()}}function Q0(s,e){return typeof e=="string"?gp(s,e):e instanceof Rh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new oe($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yp{}class zN extends yp{}function vE(s,e,...n){let r=[];e instanceof yp&&r.push(e),r=r.concat(n),(function(c){const f=c.filter((y=>y instanceof vp)).length,p=c.filter((y=>y instanceof _p)).length;if(f>1||f>0&&p>0)throw new oe($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class _p extends zN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _p(e,n,r)}_apply(e){const n=this._parse(e);return Y0(e._query,n),new Xr(e.firestore,e.converter,fm(e._query,n))}_parse(e){const n=Ih(e.firestore);return(function(c,f,p,y,g,T,R){let D;if(g.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new oe($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){TE(R,T);const J=[];for(const re of R)J.push(EE(y,c,re));D={arrayValue:{values:J}}}else D=EE(y,c,R)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||TE(R,T),D=UN(p,f,R,T==="in"||T==="not-in");return Tt.create(g,T,D)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class vp extends yp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vp(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let f=l;const p=c.getFlattenedFilters();for(const y of p)Y0(f,y),f=fm(f,y)})(e._query,n),new Xr(e.firestore,e.converter,fm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function EE(s,e,n){if(typeof(n=At(n))=="string"){if(n==="")throw new oe($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QT(e)&&n.indexOf("/")!==-1)throw new oe($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(tt.fromString(n));if(!pe.isDocumentKey(r))throw new oe($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pv(s,new pe(r))}if(n instanceof yt)return Pv(s,n._key);throw new oe($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hh(n)}.`)}function TE(s,e){if(!Array.isArray(s)||s.length===0)throw new oe($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y0(s,e){const n=(function(l,c){for(const f of l)for(const p of f.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new oe($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qN{convertValue(e,n="none"){switch(Qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zs(e,((l,c)=>{r[l]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[Wc].arrayValue?.values?.map((r=>gt(r.doubleValue)));return new gi(n)}convertGeoPoint(e){return new pi(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ll(e));default:return null}}convertTimestamp(e){const n=Fs(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=tt.fromString(e);He(g0(r),9688,{name:e});const l=new jl(r.get(1),r.get(3)),c=new pe(r.popFirst(5));return l.isEqual(n)||Gi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(s,e,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,r}class Il{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lr extends G0{constructor(e,n,r,l,c,f){super(e,n,r,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Q0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Lr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Lr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lr._jsonSchema={type:bt("string",Lr._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class zc extends Lr{data(e={}){return super.data(e)}}class jr{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Il(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new zc(this._firestore,this._userDataWriter,r.key,r,new Il(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const y=new zc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Il(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new zc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Il(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,T=-1;return p.type!==0&&(g=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:BN(p.type),doc:y,oldIndex:g,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function BN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(s){s=Tn(s,yt);const e=Tn(s.firestore,Ki);return IN(iu(e),s._key).then((n=>X0(e,s,n)))}jr._jsonSchemaVersion="firestore/querySnapshot/1.0",jr._jsonSchema={type:bt("string",jr._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class Tp extends qN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}}function FN(s){s=Tn(s,Xr);const e=Tn(s.firestore,Ki),n=iu(e),r=new Tp(e);return K0(s._query),CN(n,s._query).then((l=>new jr(e,r,s,l)))}function Xd(s,e,n){s=Tn(s,yt);const r=Tn(s.firestore,Ki),l=Ep(s.converter,e,n);return Nh(r,[fp(Ih(r),"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,cn.none())])}function bE(s){return Nh(Tn(s.firestore,Ki),[new Eh(s._key,cn.none())])}function GN(s,e){const n=Tn(s.firestore,Ki),r=vn(s),l=Ep(s.converter,e);return Nh(n,[fp(Ih(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,cn.exists(!1))]).then((()=>r))}function AE(s,...e){s=At(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||_E(e[r])||(n=e[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(_E(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let c,f,p;if(s instanceof yt)f=Tn(s.firestore,Ki),p=ph(s._key.path),c={next:y=>{e[r]&&e[r](X0(f,s,y))},error:e[r+1],complete:e[r+2]};else{const y=Tn(s,Xr);f=Tn(y.firestore,Ki),p=y._query;const g=new Tp(f);c={next:T=>{e[r]&&e[r](new jr(f,g,y,T))},error:e[r+1],complete:e[r+2]},K0(s._query)}return(function(g,T,R,D){const G=new cp(D),J=new op(T,G,R);return g.asyncQueue.enqueueAndForget((async()=>sp(await rh(g),J))),()=>{G.Nu(),g.asyncQueue.enqueueAndForget((async()=>rp(await rh(g),J)))}})(iu(f),p,l,c)}function Nh(s,e){return(function(r,l){const c=new Bi;return r.asyncQueue.enqueueAndForget((async()=>pN(await RN(r),l,c))),c.promise})(iu(s),e)}function X0(s,e,n){const r=n.docs.get(e._key),l=new Tp(s);return new Lr(s,l,e._key,r,new Il(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ih(e)}set(e,n,r){this._verifyNotCommitted();const l=$d(e,this._firestore),c=Ep(l.converter,n,r),f=fp(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,r);return this._mutations.push(f.toMutation(l._key,cn.none())),this}update(e,n,r,...l){this._verifyNotCommitted();const c=$d(e,this._firestore);let f;return f=typeof(n=At(n))=="string"||n instanceof Rh?kN(this._dataReader,"WriteBatch.update",c._key,n,r,l):PN(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(f.toMutation(c._key,cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$d(e,this._firestore);return this._mutations=this._mutations.concat(new Eh(n._key,cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $d(s,e){if((s=At(s)).firestore!==e)throw new oe($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function SE(){return new dp("serverTimestamp")}function wE(s){return new mp("increment",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(s){return iu(s=Tn(s,Ki)),new QN(s,(e=>Nh(s,e)))}(function(e,n=!0){(function(l){uo=l})(oo),Ja(new qr("firestore",((r,{instanceIdentifier:l,options:c})=>{const f=r.getProvider("app").getImmediate(),p=new Ki(new UR(r.getProvider("auth-internal")),new zR(f,r.getProvider("app-check-internal")),(function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new oe($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(g.options.projectId,T)})(f,l),f);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),zs(bv,Av,e),zs(bv,Av,"esm2020")})();const KN={apiKey:"AIzaSyCoFF99YGFehQbCUbXlrjGb25EbAGaCXdI",authDomain:"gestion-ventas-app-64f18.firebaseapp.com",projectId:"gestion-ventas-app-64f18",storageBucket:"gestion-ventas-app-64f18.firebasestorage.app",messagingSenderId:"273200916717",appId:"1:273200916717:web:db24c10e9e013b32af44e4"},$0=kE(KN),Ba=VR($0),Mt=DN($0),Z0="btech",W0=720*60*60*1e3,bp=Pe.createContext(),YN=({children:s})=>{const[e,n]=Pe.useState([]),[r,l]=Pe.useState([]),[c,f]=Pe.useState(!0),[p,y]=Pe.useState("home"),[g,T]=Pe.useState([]),[R,D]=Pe.useState(null),[G,J]=Pe.useState(!0),[re,Y]=Pe.useState({isVisible:!1,type:"alert",message:"",onConfirm:null,onCancel:null});Pe.useEffect(()=>{const ie=b1(Ba,async w=>{if(w){const z=vn(Mt,"usuarios",w.uid),te=await HN(z);if(te.exists()){const ee=te.data();if(ee.userType==="free"){const Ce=(ee.registeredAt?.toDate?ee.registeredAt.toDate().getTime():new Date(ee.registeredAt||Date.now()).getTime())+W0;if(Date.now()>Ce){Y({isVisible:!0,type:"alert",message:"Tu prueba gratuita de 30 das ha expirado. Contacta al administrador.",onConfirm:()=>{Bd(Ba),Y({isVisible:!1})}}),D(null),J(!1);return}}D({uid:w.uid,email:w.email,...ee})}else Y({isVisible:!0,type:"alert",message:"Error: No se encontr el perfil de usuario. Contacta soporte.",onConfirm:()=>{Bd(Ba),Y({isVisible:!1})}})}else D(null);J(!1)});return()=>ie()},[]),Pe.useEffect(()=>{if(!R){n([]);return}f(!0);const ie=vE(Ka(Mt,"usuarios",R.uid,"productos")),w=AE(ie,z=>{const te=[];z.forEach(ee=>{te.push({...ee.data(),id:ee.id})}),n(te),f(!1)},z=>{console.error("Error cargando productos: ",z),f(!1)});return()=>w()},[R]),Pe.useEffect(()=>{if(!R){l([]);return}const ie=vE(Ka(Mt,"usuarios",R.uid,"ventas")),w=AE(ie,z=>{const te=[];z.forEach(ee=>{const he=ee.data();te.push({...he,id:ee.id,date:he.date?.toDate?he.date.toDate().toISOString():he.date||new Date().toISOString()})}),l(te)},z=>{console.error("Error cargando ventas: ",z)});return()=>w()},[R]);const le=(ie,w=()=>{})=>{Y({isVisible:!0,type:"alert",message:ie,onConfirm:()=>{w(),Y({isVisible:!1})},onCancel:null})},de=(ie,w,z=()=>{})=>{Y({isVisible:!0,type:"confirm",message:ie,onConfirm:()=>{w(),Y({isVisible:!1})},onCancel:()=>{z(),Y({isVisible:!1})}})},K=()=>{re.onCancel&&re.onCancel(),Y({isVisible:!1})},Ae=async(ie,w)=>{try{await v1(Ba,ie,w),y("home")}catch(z){console.error(z),z.code==="auth/user-not-found"||z.code==="auth/wrong-password"||z.code==="auth/invalid-credential"?le("Email o contrasea incorrecta."):le("Error al iniciar sesin: "+z.message)}},se=async(ie,w,z)=>{try{const ee=(await _1(Ba,w,z)).user,he=ie.toLowerCase()===Z0?"admin":"free",Ce=vn(Mt,"usuarios",ee.uid);await Xd(Ce,{username:ie,userType:he,registeredAt:SE()}),y("home"),le(he==="free"?"Registro exitoso! Tu prueba de 30 das ha comenzado.":"Registro de Administrador exitoso!")}catch(te){console.error(te),te.code==="auth/email-already-in-use"?le("El correo electrnico ya est en uso."):le("Error al registrar: "+te.message)}},be=()=>{Bd(Ba)},V=async()=>{if(R?.userType==="admin")try{const w=(await FN(Ka(Mt,"usuarios"))).docs.map(z=>({id:z.id,...z.data(),registeredAt:z.data().registeredAt?.toDate?z.data().registeredAt.toDate().toISOString():"N/A"}));T(w)}catch(ie){console.error("Error fetching users:",ie),le("No tienes permiso para ver los usuarios.")}},A=async(ie,w)=>{if(ie===R.id){le("No puedes eliminarte a ti mismo.");return}de(`Seguro que quieres borrar TODOS los datos de ${w}? Esto borrar su perfil, productos y ventas de la base de datos (no se puede deshacer).`,async()=>{try{await bE(vn(Mt,"usuarios",ie)),le(`Datos de ${w} eliminados de Firestore.`),V()}catch(z){console.error("Error deleting user data:",z),le("Error al borrar datos: "+z.message)}})},C=()=>Ka(Mt,"usuarios",R.uid,"productos"),P=()=>Ka(Mt,"usuarios",R.uid,"ventas"),O=async ie=>{try{await GN(C(),ie)}catch(w){console.error("Error aadiendo producto: ",w)}},x=async ie=>{try{const w=vn(Mt,"usuarios",R.uid,"productos",ie.id),{id:z,...te}=ie;await Xd(w,te)}catch(w){console.error("Error editando producto: ",w)}},I=async ie=>{if(r.some(w=>w.items.some(z=>z.productId===ie)))return le("Error: No se puede eliminar un producto que ya ha sido parte de una venta."),!1;try{return await bE(vn(Mt,"usuarios",R.uid,"productos",ie)),!0}catch(w){return console.error("Error borrando producto: ",w),!1}},Ne=async ie=>{try{const w=qc(Mt),z=vn(P());w.set(z,{...ie,date:SE()}),ie.items.forEach(te=>{const ee=vn(Mt,"usuarios",R.uid,"productos",te.productId);w.update(ee,{stock:wE(-te.quantity)})}),await w.commit()}catch(w){console.error("Error al aadir venta: ",w),le("Error al registrar la venta.")}},Me=async ie=>{const w=r.find(z=>z.id===ie);if(w)try{const z=qc(Mt),te=vn(Mt,"usuarios",R.uid,"ventas",ie);z.delete(te),w.items.forEach(ee=>{const he=vn(Mt,"usuarios",R.uid,"productos",ee.productId);z.update(he,{stock:wE(ee.quantity)})}),await z.commit(),le("Venta anulada y stock devuelto.")}catch(z){console.error("Error anulando venta: ",z),le("Error al anular la venta.")}},F=async()=>{try{const ie=qc(Mt);r.forEach(w=>{const z=vn(P(),w.id);ie.delete(z)}),await ie.commit(),le("Historial de ventas borrado.")}catch(ie){console.error("Error borrando historial: ",ie),le("Error al borrar el historial.")}},ne=()=>{de("Seguro que quieres borrar TODO el historial de ventas? NO SE PUEDE RECUPERAR",()=>{F()})},ce=async(ie,w)=>{try{const z=vn(Mt,"usuarios",R.uid,"ventas",ie);await Xd(z,{status:w},{merge:!0})}catch(z){console.error("Error actualizando estado: ",z)}};return S.jsx(bp.Provider,{value:{products:e,sales:r,isLoading:c,currentView:p,setCurrentView:y,currentUser:R,users:g,isAuthLoading:G,login:Ae,logout:be,register:se,fetchAllUsers:V,deleteUserFromAdmin:A,modal:re,closeModal:K,showAlert:le,showConfirm:de,addProduct:O,editProduct:x,addSale:Ne,deleteSale:Me,deleteProduct:I,clearSales:ne,updateSaleStatus:ce,db:Mt},children:s})},$r=()=>Pe.useContext(bp),XN=({children:s,visible:e,onClose:n})=>e?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"modal-backdrop fade show",onClick:n}),S.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",onClick:n,children:S.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:r=>r.stopPropagation(),children:S.jsx("div",{className:"modal-content rounded-4 shadow",children:s})})})]}):null,$N=()=>{const{modal:s}=$r();return s.isVisible?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"modal-backdrop fade show"}),S.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",children:S.jsx("div",{className:"modal-dialog modal-dialog-centered",children:S.jsxs("div",{className:"modal-content rounded-4 shadow animate-fade-in-up",children:[S.jsx("div",{className:"modal-body p-4 text-center",children:S.jsx("p",{className:"mb-0 fs-5",children:s.message})}),S.jsxs("div",{className:"modal-footer flex-nowrap p-0",children:[s.type==="confirm"&&S.jsx("button",{type:"button",className:"btn btn-lg btn-link fs-6 text-decoration-none col-6 m-0 rounded-0 border-end",onClick:s.onCancel,children:"Cancelar"}),S.jsx("button",{type:"button",className:`btn btn-lg btn-link fs-6 text-decoration-none col-${s.type==="confirm"?"6":"12"} m-0 rounded-0 text-primary-emphasis`,onClick:s.onConfirm,children:s.type==="confirm"?"Confirmar":"Aceptar"})]})]})})})]}):null},Sm=()=>S.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:S.jsx("div",{className:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"},children:S.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),ZN=()=>{const{login:s,register:e,showAlert:n}=$r(),[r,l]=Pe.useState("login"),[c,f]=Pe.useState(""),[p,y]=Pe.useState(""),[g,T]=Pe.useState(""),[R,D]=Pe.useState(""),[G,J]=Pe.useState(!1),re=Pe.useRef(null),Y=K=>{if(K.preventDefault(),!re.current.checkValidity()){K.stopPropagation(),J(!0);return}s(c,g)},le=K=>{if(K.preventDefault(),!re.current.checkValidity()){K.stopPropagation(),J(!0);return}if(g!==R){n("Las contraseas no coinciden.");return}e(p,c,g)},de=K=>{l(K),f(""),y(""),T(""),D(""),J(!1)};return S.jsx("div",{className:"container vh-100 d-flex flex-column justify-content-center",children:S.jsx("div",{className:"row justify-content-center",children:S.jsx("div",{className:"col-12 col-md-8 col-lg-6",children:S.jsx("div",{className:"card shadow-lg border-0 rounded-4",children:r==="login"?S.jsxs("div",{className:"card-body p-4 p-sm-5",children:[S.jsx("h2",{className:"card-title text-center fw-bold h3 mb-4",children:"Iniciar Sesin"}),S.jsxs("form",{ref:re,noValidate:!0,className:G?"was-validated":"",onSubmit:Y,children:[S.jsxs("div",{className:"mb-3",children:[S.jsx("label",{className:"form-label",children:"Email"}),S.jsx("input",{type:"email",className:"form-control form-control-lg",value:c,onChange:K=>f(K.target.value),required:!0}),S.jsx("div",{className:"invalid-feedback",children:"El email es requerido."})]}),S.jsxs("div",{className:"mb-3",children:[S.jsx("label",{className:"form-label",children:"Contrasea"}),S.jsx("input",{type:"password",className:"form-control form-control-lg",value:g,onChange:K=>T(K.target.value),required:!0}),S.jsx("div",{className:"invalid-feedback",children:"La contrasea es requerida."})]}),S.jsxs("div",{className:"d-grid gap-3 mt-4",children:[S.jsx("button",{type:"submit",className:"btn btn-primary btn-lg",children:"Ingresar"}),S.jsx("button",{type:"button",className:"btn btn-success btn-lg",onClick:()=>de("register"),children:"Prueba gratuita por 30 das"})]})]})]}):S.jsxs("div",{className:"card-body p-4 p-sm-5",children:[S.jsx("h2",{className:"card-title text-center fw-bold h3 mb-4",children:"Registro (Prueba 30 Das)"}),S.jsxs("form",{ref:re,noValidate:!0,className:G?"was-validated":"",onSubmit:le,children:[S.jsxs("div",{className:"mb-3",children:[S.jsx("label",{className:"form-label",children:"Nombre de Usuario"}),S.jsx("input",{type:"text",className:"form-control form-control-lg",value:p,onChange:K=>y(K.target.value),required:!0}),S.jsx("div",{className:"invalid-feedback",children:"Elige un nombre de usuario."})]}),S.jsxs("div",{className:"mb-3",children:[S.jsx("label",{className:"form-label",children:"Email"}),S.jsx("input",{type:"email",className:"form-control form-control-lg",value:c,onChange:K=>f(K.target.value),required:!0}),S.jsx("div",{className:"invalid-feedback",children:"Tu email (para iniciar sesin)."})]}),S.jsxs("div",{className:"mb-3",children:[S.jsx("label",{className:"form-label",children:"Contrasea"}),S.jsx("input",{type:"password",className:"form-control form-control-lg",value:g,onChange:K=>T(K.target.value),required:!0,minLength:"6"}),S.jsx("div",{className:"invalid-feedback",children:"La contrasea debe tener al menos 6 caracteres."})]}),S.jsxs("div",{className:"mb-3",children:[S.jsx("label",{className:"form-label",children:"Confirmar Contrasea"}),S.jsx("input",{type:"password",className:"form-control form-control-lg",value:R,onChange:K=>D(K.target.value),required:!0}),S.jsx("div",{className:"invalid-feedback",children:"Confirma tu contrasea."})]}),S.jsxs("div",{className:"d-grid gap-3 mt-4",children:[S.jsx("button",{type:"submit",className:"btn btn-success btn-lg",children:"Registrarme"}),S.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>de("login"),children:"Ya tienes cuenta? Iniciar Sesin"})]})]})]})})})})})},WN=()=>{const{sales:s,isLoading:e,setCurrentView:n,currentUser:r}=$r();if(e)return S.jsx(Sm,{});const l=new Date().toISOString().split("T")[0],c=s.filter(g=>g.date.startsWith(l)),f=c.reduce((g,T)=>g+T.total,0),p=c.reduce((g,T)=>g+T.profit,0),y=s.filter(g=>g.status==="Pendiente").length;return S.jsxs("div",{className:"p-3 p-md-4",children:[S.jsxs("header",{className:"text-center mb-4",children:[S.jsx("h1",{className:"h3 fw-bold text-dark",children:"Resumen del Da"}),S.jsx("p",{className:"text-muted mb-0",children:new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),S.jsxs("div",{className:"row row-cols-1 row-cols-sm-2 g-3 mb-4",children:[S.jsx("div",{className:"col",children:S.jsxs("div",{className:"card card-body text-center shadow-sm rounded-3 border-0 h-100",children:[S.jsx("i",{className:"bi bi-cash-stack fs-1 text-primary"}),S.jsx("p",{className:"text-muted small mt-2 mb-0",children:"Ventas de Hoy"}),S.jsxs("p",{className:"h4 fw-bold text-dark mt-1 mb-0",children:["$",f.toFixed(2)]})]})}),S.jsx("div",{className:"col",children:S.jsxs("div",{className:"card card-body text-center shadow-sm rounded-3 border-0 h-100",children:[S.jsx("i",{className:"bi bi-graph-up-arrow fs-1 text-success"}),S.jsx("p",{className:"text-muted small mt-2 mb-0",children:"Ganancia de Hoy"}),S.jsxs("p",{className:"h4 fw-bold text-dark mt-1 mb-0",children:["$",p.toFixed(2)]})]})})]}),y>0&&S.jsx("div",{className:"card card-body shadow-sm rounded-3 border-0 mb-4",children:S.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[S.jsxs("div",{className:"d-flex align-items-center",children:[S.jsx("i",{className:"bi bi-box-seam fs-2 text-warning"}),S.jsx("p",{className:"ms-3 mb-0 fw-semibold text-dark",children:"Pedidos Pendientes"})]}),S.jsx("p",{className:"h4 fw-bold text-warning-emphasis mb-0",children:y})]})}),S.jsxs("div",{className:"d-grid gap-3",children:[S.jsxs("button",{onClick:()=>n("new_sale"),className:"btn btn-primary btn-lg w-100 d-flex align-items-center justify-content-center gap-2",children:[S.jsx("i",{className:"bi bi-cart-plus-fill"}),S.jsx("span",{children:"Cargar Venta"})]}),S.jsxs("button",{onClick:()=>n("inventory"),className:"btn btn-outline-primary btn-lg w-100 d-flex align-items-center justify-content-center gap-2",children:[S.jsx("i",{className:"bi bi-list-check"}),S.jsx("span",{children:"Inventario"})]}),S.jsxs("button",{onClick:()=>n("history"),className:"btn btn-outline-primary btn-lg w-100 d-flex align-items-center justify-content-center gap-2",children:[S.jsx("i",{className:"bi bi-clock-history"}),S.jsx("span",{children:"Historial de Ventas"})]}),r.userType==="admin"&&S.jsxs("button",{onClick:()=>n("admin_users"),className:"btn btn-outline-danger btn-lg w-100 d-flex align-items-center justify-content-center gap-2",children:[S.jsx("i",{className:"bi bi-people-fill"}),S.jsx("span",{children:"Administrar Usuarios"})]})]})]})},JN=()=>{const{products:s,addProduct:e,editProduct:n,deleteProduct:r,showConfirm:l,showAlert:c,db:f,currentUser:p}=$r(),[y,g]=Pe.useState(!1),[T,R]=Pe.useState(!1),[D,G]=Pe.useState({id:null,name:"",costPrice:"",sellingPrice:"",stock:""}),[J,re]=Pe.useState(!1),[Y,le]=Pe.useState(!1),de=Pe.useRef(null),K=Pe.useRef(null),[Ae,se]=Pe.useState(!1),be=x=>{const I=x.target.files[0];if(!I)return;se(!0);const Ne=new FileReader;Ne.onload=Me=>{try{const F=Me.target.result,ne=window.XLSX.read(F,{type:"binary"}),ce=ne.SheetNames[0],ie=ne.Sheets[ce],w=window.XLSX.utils.sheet_to_json(ie);V(w)}catch(F){console.error("Error al leer el archivo:",F),c("Error al leer el archivo. Asegrate de que tenga el formato correcto."),se(!1)}finally{K.current&&(K.current.value="")}},Ne.readAsBinaryString(I)},V=async x=>{if(!x||x.length===0){c("El archivo est vaco o no se pudo leer."),se(!1);return}const I=["name","costPrice","sellingPrice","stock"],Ne=x[0];if(!I.every(F=>Ne.hasOwnProperty(F))){c(`Error: El archivo Excel debe tener estas columnas exactas: ${I.join(", ")}`),se(!1);return}try{const F=qc(f),ne=Ka(f,"usuarios",p.uid,"productos");let ce=0;x.forEach(ie=>{const w=parseFloat(ie.costPrice),z=parseFloat(ie.sellingPrice),te=parseInt(ie.stock,10);if(isNaN(w)||isNaN(z)||isNaN(te)||!ie.name){console.warn("Producto saltado por datos invlidos:",ie);return}const ee=vn(ne);F.set(ee,{name:String(ie.name),costPrice:w,sellingPrice:z,stock:te}),ce++}),await F.commit(),c(`xito! Se importaron ${ce} productos nuevos al inventario.`)}catch(F){console.error("Error al subir el batch a Firebase:",F),c("Error al guardar los productos en la base de datos.")}finally{se(!1)}},A=(x=null)=>{x?(G({...x,costPrice:String(x.costPrice),sellingPrice:String(x.sellingPrice),stock:String(x.stock)}),R(!0)):(G({id:null,name:"",costPrice:"",sellingPrice:"",stock:""}),R(!1)),re(!1),le(!1),g(!0)},C=async x=>{if(x.preventDefault(),!de.current.checkValidity()){x.stopPropagation(),re(!0);return}le(!0);const Ne={name:D.name,costPrice:parseFloat(D.costPrice),sellingPrice:parseFloat(D.sellingPrice),stock:parseInt(D.stock,10)};try{T?await n({...Ne,id:D.id}):await e(Ne),g(!1)}catch(Me){c("Error al guardar: "+Me.message)}finally{le(!1)}},P=(x,I)=>{x.stopPropagation(),l("Ests seguro de que quieres eliminar este producto?",async()=>{await r(I)&&T&&D.id===I&&g(!1)})},O=x=>{const{name:I,value:Ne}=x.target;G(Me=>({...Me,[I]:Ne}))};return S.jsxs("div",{style:{paddingBottom:"20px"},children:[S.jsxs("div",{className:"p-3",children:[S.jsxs("button",{className:"btn btn-primary w-100 mb-3 d-flex align-items-center justify-content-center gap-2",onClick:()=>A(),disabled:Ae,children:[S.jsx("i",{className:"bi bi-plus-lg"}),S.jsx("span",{children:"Agregar Producto"})]}),S.jsx("button",{className:"btn btn-outline-success w-100 mb-3 d-flex align-items-center justify-content-center gap-2",onClick:()=>K.current.click(),disabled:Ae,children:Ae?S.jsxs(S.Fragment,{children:[S.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),S.jsx("span",{children:"Importando..."})]}):S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"bi bi-file-earmark-arrow-up-fill"}),"Importar desde Excel"]})}),S.jsx("input",{type:"file",ref:K,style:{display:"none"},onChange:be,accept:".xlsx, .xls"}),S.jsx("hr",{className:"my-3"}),s.length===0&&!Ae?S.jsx("p",{className:"text-center text-muted mt-5",children:"No hay productos en el inventario."}):S.jsx("div",{className:"list-group",children:s.map(x=>S.jsxs("div",{onClick:()=>A(x),className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center cursor-pointer",children:[S.jsxs("div",{className:"flex-grow-1 me-3",children:[S.jsx("p",{className:"fw-semibold text-dark mb-0",children:x.name}),S.jsxs("p",{className:"text-muted small mb-0",children:["Precio: $",x.sellingPrice.toFixed(2)," | Costo: $",x.costPrice.toFixed(2)]})]}),S.jsx("div",{className:"d-flex align-items-center",children:S.jsxs("div",{className:"text-center bg-primary-subtle text-primary-emphasis rounded-3 p-2",style:{minWidth:"70px"},children:[S.jsx("p",{className:"h4 mb-0 fw-bold",children:x.stock}),S.jsx("p",{className:"small mb-0",style:{fontSize:"0.7rem"},children:"en Stock"})]})})]},x.id))})]}),S.jsx(XN,{visible:y,onClose:()=>g(!1),children:S.jsxs("form",{ref:de,noValidate:!0,className:J?"was-validated":"",onSubmit:C,children:[S.jsxs("div",{className:"modal-header",children:[S.jsx("h5",{className:"modal-title",children:T?"Editar Producto":"Nuevo Producto"}),S.jsx("button",{type:"button",className:"btn-close",onClick:()=>g(!1),disabled:Y})]}),S.jsxs("div",{className:"modal-body",children:[S.jsxs("div",{className:"mb-3",children:[S.jsx("label",{className:"form-label",children:"Nombre del producto"}),S.jsx("input",{name:"name",placeholder:"Ej: Botella 1.5L",className:"form-control",value:D.name,onChange:O,required:!0,disabled:Y}),S.jsx("div",{className:"invalid-feedback",children:"El nombre es obligatorio."})]}),S.jsxs("div",{className:"row g-2 mb-3",children:[S.jsxs("div",{className:"col",children:[S.jsx("label",{className:"form-label",children:"Precio de costo"}),S.jsx("input",{name:"costPrice",type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"form-control",value:D.costPrice,onChange:O,required:!0,disabled:Y}),S.jsx("div",{className:"invalid-feedback",children:"Campo requerido."})]}),S.jsxs("div",{className:"col",children:[S.jsx("label",{className:"form-label",children:"Precio de venta"}),S.jsx("input",{name:"sellingPrice",type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"form-control",value:D.sellingPrice,onChange:O,required:!0,disabled:Y}),S.jsx("div",{className:"invalid-feedback",children:"Campo requerido."})]})]}),S.jsxs("div",{className:"mb-3",children:[S.jsx("label",{className:"form-label",children:"Stock"}),S.jsx("input",{name:"stock",type:"number",step:"1",min:"0",placeholder:"0",className:"form-control",value:D.stock,onChange:O,required:!0,disabled:Y}),S.jsx("div",{className:"invalid-feedback",children:"El stock es requerido."})]})]}),S.jsxs("div",{className:"modal-footer d-flex",children:[T&&S.jsx("button",{type:"button",className:"btn btn-outline-danger me-auto",onClick:x=>P(x,D.id),disabled:Y,children:"Eliminar"}),S.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(!1),disabled:Y,children:"Cancelar"}),S.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Y,children:Y?S.jsxs(S.Fragment,{children:[S.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),S.jsx("span",{className:"ms-1",children:"Guardando..."})]}):"Guardar"})]})]})})]})},e2=()=>{const{products:s,addSale:e,setCurrentView:n,showAlert:r}=$r(),[l,c]=Pe.useState([]),[f,p]=Pe.useState(""),[y,g]=Pe.useState(!1),[T,R]=Pe.useState(!1),D="",G=async()=>{g(!0);try{const K=await navigator.clipboard.readText();if(!K){r("El portapapeles est vaco."),g(!1);return}const se=`Analiza el pedido y extrae productos y cantidades. Reglas: 1. Solo devuelve productos de esta lista: [${s.map(F=>F.name).join(", ")}]. 2. Ignora lo que no est en la lista. 3. Ignora saludos y otra conversacin. 4. Tu respuesta DEBE ser solo un JSON. Pedido: "${K}"`,be=`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${D}`,A=await fetch(be,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:se}]}],generationConfig:{responseMimeType:"application/json",responseSchema:{type:"ARRAY",items:{type:"OBJECT",properties:{productName:{type:"STRING"},quantity:{type:"NUMBER"}}}}}})});if(!A.ok)throw new Error(`Error de API: ${A.statusText}`);const P=(await A.json()).candidates[0].content.parts[0].text,O=JSON.parse(P);let x=[...l],I=0,Ne=[];O.forEach(F=>{const ne=s.find(ce=>ce.name.toLowerCase()===F.productName.toLowerCase());if(ne){const ce=F.quantity,ie=x.find(z=>z.productId===ne.id),w=ie?ie.quantity:0;ce+w<=ne.stock?(ie?ie.quantity+=ce:x.push({...ne,productId:ne.id,quantity:ce}),I++):r(`Stock insuficiente para ${ne.name}. Solo quedan ${ne.stock}.`)}else Ne.push(F.productName)}),c(x);let Me=`Se agregaron ${I} productos al carrito.`;Ne.length>0&&(Me+=` No se encontraron: ${Ne.join(", ")}.`),r(Me)}catch(K){console.error("Error procesando pedido:",K),r(`Error al procesar el pedido: ${K.message}. Asegrate de que el texto copiado sea un pedido.`)}finally{g(!1)}},J=K=>{const Ae=l.find(se=>se.productId===K.id);Ae?Ae.quantity<K.stock?c(l.map(se=>se.productId===K.id?{...se,quantity:se.quantity+1}:se)):r(`No puedes agregar ms ${K.name}. Stock mximo alcanzado.`):K.stock>0&&c([...l,{...K,productId:K.id,quantity:1}])},re=K=>{l.find(se=>se.productId===K).quantity>1?c(l.map(se=>se.productId===K?{...se,quantity:se.quantity-1}:se)):c(l.filter(se=>se.productId!==K))},Y=async()=>{if(l.length===0){r("El carrito est vaco.");return}if(!f.trim()){r("Por favor, ingresa el nombre del cliente.");return}R(!0);const K=l.reduce((se,be)=>se+be.sellingPrice*be.quantity,0),Ae=l.reduce((se,be)=>se+be.costPrice*be.quantity,0);try{await e({items:l.map(se=>({productId:se.productId,productName:se.name,quantity:se.quantity,price:se.sellingPrice,cost:se.costPrice})),total:K,profit:K-Ae,customerName:f.trim(),status:"Pendiente"}),r(`Venta para ${f.trim()} registrada. Total: $${K.toFixed(2)}`,()=>{n("history")})}catch(se){r("Error al guardar la venta: "+se.message)}finally{R(!1)}},le=l.reduce((K,Ae)=>K+Ae.sellingPrice*Ae.quantity,0),de=s.filter(K=>K.stock>0);return S.jsxs("div",{className:"d-flex flex-column new-sale-layout",children:[S.jsx("div",{className:"p-3 border-bottom",children:S.jsxs("button",{onClick:G,disabled:y||T,className:"btn btn-success btn-lg w-100 d-flex align-items-center justify-content-center gap-2",children:[y?S.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):S.jsx("i",{className:"bi bi-clipboard-plus-fill"}),S.jsx("span",{children:y?"Procesando...":"Pegar Pedido de WhatsApp"})]})}),S.jsxs("div",{className:"row g-0 flex-grow-1",style:{minHeight:"0"},children:[S.jsxs("div",{className:"col-6 d-flex flex-column border-end",children:[S.jsx("h2",{className:"h5 mb-0 p-3 border-bottom",children:"Productos"}),S.jsx("div",{className:"overflow-y-auto flex-grow-1",children:de.length===0?S.jsx("p",{className:"text-center text-muted p-3",children:"No hay productos con stock."}):S.jsx("div",{className:"list-group list-group-flush",children:de.map(K=>S.jsxs("button",{onClick:()=>J(K),type:"button",className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",disabled:T,children:[S.jsxs("div",{children:[S.jsx("span",{className:"fw-semibold",children:K.name}),S.jsxs("span",{className:"text-muted ms-2",children:["(",K.stock,")"]})]}),S.jsxs("span",{className:"text-dark fw-bold",children:["$",K.sellingPrice.toFixed(2)]})]},K.id))})})]}),S.jsxs("div",{className:"col-6 d-flex flex-column bg-light",children:[S.jsx("h2",{className:"h5 mb-0 p-3 border-bottom",children:"Carrito"}),S.jsx("div",{className:"overflow-y-auto p-3 flex-grow-1",children:l.length===0?S.jsx("p",{className:"text-center text-muted mt-4",children:"El carrito est vaco."}):S.jsx("div",{className:"d-flex flex-column gap-2",children:l.map(K=>S.jsx("div",{className:"card card-body shadow-sm border-0 p-2",children:S.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[S.jsxs("div",{children:[S.jsx("p",{className:"fw-semibold mb-0",children:K.name}),S.jsxs("p",{className:"text-muted small mb-0",children:["$",K.sellingPrice.toFixed(2)," x ",K.quantity," = ",S.jsxs("strong",{children:["$",(K.sellingPrice*K.quantity).toFixed(2)]})]})]}),S.jsxs("div",{className:"d-flex align-items-center gap-2",children:[S.jsx("button",{onClick:()=>re(K.productId),className:"btn btn-sm btn-outline-danger rounded-circle",style:{width:"30px",height:"30px",lineHeight:"1"},disabled:T,children:S.jsx("i",{className:"bi bi-dash-lg"})}),S.jsx("span",{className:"fw-bold mx-1",children:K.quantity}),S.jsx("button",{onClick:()=>J(K),className:"btn btn-sm btn-outline-success rounded-circle",style:{width:"30px",height:"30px",lineHeight:"1"},disabled:T,children:S.jsx("i",{className:"bi bi-plus-lg"})})]})]})},K.productId))})})]})]}),S.jsxs("footer",{className:"p-3 border-top bg-white shadow-lg",children:[S.jsxs("div",{className:"mb-3",children:[S.jsx("label",{htmlFor:"customerNameInput",className:"form-label fw-semibold",children:"Nombre del Cliente"}),S.jsx("input",{type:"text",id:"customerNameInput",placeholder:"Escribe el nombre aqu...",value:f,onChange:K=>p(K.target.value),className:"form-control form-control-lg",disabled:T})]}),S.jsx("div",{className:"text-center mb-3",children:S.jsxs("span",{className:"h3 fw-bold",children:["Total: $",le.toFixed(2)]})}),S.jsx("button",{onClick:Y,className:"btn btn-primary btn-lg w-100",disabled:T||l.length===0,children:T?S.jsxs(S.Fragment,{children:[S.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),S.jsx("span",{className:"ms-1",children:"Confirmando..."})]}):"Confirmar Venta"})]})]})},t2=()=>{const{sales:s,deleteSale:e,products:n,clearSales:r,updateSaleStatus:l,showAlert:c,showConfirm:f,currentUser:p}=$r(),y=()=>{if(typeof window.XLSX>"u"){c("La librera de exportacin no est lista. Intntalo de nuevo en un momento.");return}try{if(s.length===0){c("No hay ventas para exportar.");return}const g=new Date().toISOString().split("T")[0],T={};s.forEach(A=>{A.items.forEach(C=>{const P=(C.price-C.cost)*C.quantity,O=C.productName||"Producto Borrado";T[O]=(T[O]||0)+P})});const R=s.reduce((A,C)=>A+C.total,0),D=s.reduce((A,C)=>A+C.profit,0),G=n.map(A=>({ID:A.id,Nombre:A.name,Costo:A.costPrice,"Precio Venta":A.sellingPrice,Stock:A.stock})),J=s.map(A=>{const C=A.items.map(P=>`${P.productName||"N/A"} (x${P.quantity})`).join(", ");return{"ID Venta":A.id,Fecha:new Date(A.date).toLocaleString(),Cliente:A.customerName,Estado:A.status,Items:C,Total:A.total,Ganancia:A.profit}}),re=[["Resumen General de Ventas:",p.username],["Fecha de Exportacin:",new Date().toLocaleDateString("es-ES")],[],["Ganancia por Producto (Total)"],["Producto","Ganancia Total"],...Object.entries(T),[],["Totales Histricos"],["Venta Total",R],["Ganancia Total",D]],Y=window.XLSX.utils.book_new(),le=window.XLSX.utils.aoa_to_sheet(re),de=window.XLSX.utils.json_to_sheet(J),K=window.XLSX.utils.json_to_sheet(G);le["!cols"]=[{wch:30},{wch:15}],de["!cols"]=[{wch:15},{wch:20},{wch:25},{wch:15},{wch:40},{wch:10},{wch:10}],K["!cols"]=[{wch:15},{wch:30},{wch:10},{wch:10},{wch:10}],window.XLSX.utils.book_append_sheet(Y,le,"Resumen General"),window.XLSX.utils.book_append_sheet(Y,de,"Historial Ventas"),window.XLSX.utils.book_append_sheet(Y,K,"Inventario");const Ae=window.XLSX.write(Y,{bookType:"xlsx",type:"array"}),se=new Blob([Ae],{type:"application/octet-stream"}),be=URL.createObjectURL(se),V=document.createElement("a");V.href=be,V.download=`reporte_${p.username}_${g}.xlsx`,V.click(),URL.revokeObjectURL(be),f("Exportacin exitosa. Deseas borrar TODO el historial de ventas?",r)}catch(g){console.error("Error al exportar:",g),c(`Error al exportar: ${g.message}`)}};return S.jsxs("div",{className:"p-3",children:[S.jsxs("button",{onClick:y,className:"btn btn-success btn-lg w-100 d-flex align-items-center justify-content-center gap-2 mb-3",children:[S.jsx("i",{className:"bi bi-file-earmark-excel-fill"}),S.jsx("span",{children:"Exportar Historial"})]}),s.length===0?S.jsx("p",{className:"text-center text-muted mt-5",children:"No hay ventas registradas."}):S.jsx("div",{className:"d-flex flex-column gap-3",children:[...s].sort((g,T)=>new Date(T.date)-new Date(g.date)).map(g=>S.jsx("div",{className:"card shadow-sm border-0",children:S.jsxs("div",{className:"card-body",children:[S.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[S.jsxs("div",{className:"flex-grow-1",children:[S.jsx("p",{className:"fw-bold h5 text-dark mb-0",children:g.customerName}),S.jsx("p",{className:"text-muted small mb-2",children:new Date(g.date).toLocaleString()}),S.jsx("span",{className:`badge rounded-pill ${g.status==="Entregado"?"text-bg-success":"text-bg-warning"}`,children:g.status})]}),S.jsx("button",{onClick:()=>f("Ests seguro de que quieres anular esta venta? El stock ser devuelto.",()=>e(g.id)),className:"btn btn-link text-danger p-1 ms-2",children:S.jsx("i",{className:"bi bi-trash-fill fs-5"})})]}),S.jsxs("div",{className:"mt-2 pt-2 border-top",children:[S.jsxs("p",{className:"text-muted small mb-1",children:[S.jsx("strong",{children:"Productos:"})," ",g.items.map(T=>`${T.productName||"N/A"} (x${T.quantity})`).join(", ")]}),S.jsxs("p",{className:"fw-semibold text-dark mb-0",children:["Total: $",g.total.toFixed(2)," | Ganancia: $",g.profit.toFixed(2)]})]}),g.status==="Pendiente"&&S.jsx("button",{onClick:()=>l(g.id,"Entregado"),className:"btn btn-primary w-100 mt-3",children:"Marcar como Entregado"})]})},g.id))})]})},n2=()=>{const{users:s,fetchAllUsers:e,deleteUserFromAdmin:n,currentUser:r}=$r();Pe.useEffect(()=>{e()},[]);const l=c=>{if(c.userType==="admin")return S.jsx("span",{className:"text-primary fw-bold",children:"Admin"});const f=new Date(c.registeredAt).getTime();if(!f)return S.jsx("span",{className:"text-muted",children:"Fecha invlida"});const y=f+W0-Date.now();if(y<=0)return S.jsx("span",{className:"text-danger",children:"Prueba Expirada"});const g=Math.ceil(y/(1e3*60*60*24));return S.jsx("span",{className:"text-success",children:`Usuario Free (Quedan ${g} das)`})};return S.jsx("div",{className:"p-3",children:s.length===0?S.jsx("p",{className:"text-center text-muted mt-5",children:"No hay usuarios registrados."}):S.jsx("div",{className:"list-group",children:s.map(c=>S.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[S.jsxs("div",{children:[S.jsx("p",{className:"fw-semibold text-dark mb-0",children:c.username}),S.jsx("p",{className:"small mb-0",children:l(c)}),S.jsxs("p",{className:"text-muted small mb-0",children:["Registrado: ",c.registeredAt?new Date(c.registeredAt).toLocaleDateString():"N/A"]})]}),c.id!==r.id&&c.username!==Z0&&S.jsx("button",{onClick:()=>n(c.id,c.username),className:"btn btn-outline-danger btn-sm",children:S.jsx("i",{className:"bi bi-trash-fill"})})]},c.id))})})};function i2(){const{currentView:s,setCurrentView:e,currentUser:n,isAuthLoading:r,isLoading:l,logout:c}=Pe.useContext(bp);if(r)return S.jsx("div",{className:"app-container",style:{justifyContent:"center",alignItems:"center"},children:S.jsx(Sm,{})});if(!n)return S.jsx("div",{className:"app-container",children:S.jsx(ZN,{})});const f=()=>{switch(s){case"inventory":return"Inventario";case"new_sale":return"Nueva Venta";case"history":return"Historial de Ventas";case"admin_users":return"Administrar Usuarios";default:return"Gestin de Ventas"}};return S.jsxs("div",{className:"app-container",children:[S.jsxs("header",{className:"bg-primary text-white p-3 d-flex align-items-center shadow-sm",children:[s!=="home"&&S.jsx("button",{onClick:()=>e("home"),className:"btn btn-link text-white p-0 me-3",children:S.jsx("i",{className:"bi bi-arrow-left-circle fs-3"})}),S.jsx("h1",{className:"h4 mb-0 fw-bold",children:f()}),S.jsx("button",{onClick:c,className:"btn btn-link text-white p-0 ms-auto",title:"Cerrar Sesin",children:S.jsx("i",{className:"bi bi-box-arrow-right fs-3"})})]}),S.jsx("main",{className:"flex-grow-1 overflow-y-auto",children:l&&s!=="new_sale"&&s!=="history"?S.jsx(Sm,{}):(()=>{switch(s){case"inventory":return S.jsx(JN,{});case"new_sale":return S.jsx(e2,{});case"history":return S.jsx(t2,{});case"admin_users":return S.jsx(n2,{});default:return S.jsx(WN,{})}})()})]})}function s2(){return Pe.useEffect(()=>{const s=document.createElement("link");s.href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap",s.rel="stylesheet";const e=document.createElement("link");e.href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css",e.rel="stylesheet";const n=document.createElement("link");n.href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css",n.rel="stylesheet";const r=document.createElement("script");r.src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js",r.async=!0;const l=document.createElement("script");return l.src="https://cdn.sheetjs.com/xlsx-0.20.2/package/dist/xlsx.full.min.js",l.async=!0,document.head.appendChild(s),document.head.appendChild(e),document.head.appendChild(n),document.body.appendChild(r),document.body.appendChild(l),()=>{document.head.removeChild(s),document.head.removeChild(e),document.head.removeChild(n),document.body.contains(r)&&document.body.removeChild(r),document.body.contains(l)&&document.body.removeChild(l)}},[]),S.jsxs(S.Fragment,{children:[S.jsx("style",{children:`
          @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
          
          body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
          }
          
          .app-wrapper {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 0;
            min-height: 100vh;
            width: 100%;
          }
          
          .app-container {
            width: 100%;
            margin: 0 auto;
            background-color: #ffffff;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            max-height: 100vh;
            border: none;
            border-radius: 0;
            box-shadow: none;
            overflow: hidden;
          }

          .app-container main {
            flex-grow: 1;
            overflow-y: auto;
          }
          
          .new-sale-layout {
            height: 100%;
            display: flex;
            flex-direction: column;
          }
          
          @media (min-width: 768px) {
            .app-wrapper {
              padding: 2rem 1rem;
            }

            .app-container {
              max-width: 960px;
              width: 100%;
              border: 1px solid #dee2e6;
              border-radius: 0.5rem;
              box-shadow: 0 0.5rem 1.5rem rgba(0,0,0,0.05);
              min-height: 90vh;
              max-height: 90vh;
              height: auto; 
            }
          }
          
          @media (min-width: 1200px) {
            .app-container {
              max-width: 1140px;
            }
          }

          .cursor-pointer {
            cursor: pointer;
          }

          .list-group-item-action {
            transition: background-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
          }
          .list-group-item-action:hover {
            background-color: #f8f9fa;
            box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,0.04);
            transform: translateY(-1px);
          }
          
          @keyframes fadeIn-up {
            from {
              opacity: 0;
              transform: translate3d(0, 15px, 0);
            }
            to {
              opacity: 1;
              transform: translate3d(0, 0, 0);
            }
          }
          .animate-fade-in-up {
            animation: fadeIn-up 0.3s ease-out;
          }
        `}),S.jsx("div",{className:"app-wrapper",children:S.jsxs(YN,{children:[S.jsx(i2,{}),S.jsx($N,{})]})})]})}PA.createRoot(document.getElementById("root")).render(S.jsx(Pe.StrictMode,{children:S.jsx(s2,{})}));
